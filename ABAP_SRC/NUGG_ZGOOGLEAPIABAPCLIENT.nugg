<?xml version="1.0" encoding="utf-16"?>
<nugget name="NUGG_ZGOOGLEAPIABAPCLIENT.NUGG">
 <CLAS CLSNAME="ZGOOGLE_HTTP_REST" VERSION="1" LANGU="E" DESCRIPT="google_http_rest" UUID="024C9CBAD63F1ED3BC8F0AADE9F80BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_HTTP_REST definition
  public
  create public .

public section.

  class-methods CREATEREQUESTURI
    importing
      value(SERVICEPATH) type STRING
      value(RESPATH) type STRING
      value(PARAMS) type ZGOOGLE_HTTP_PARAM_T
    returning
      value(RP_VALUE) type STRING .
  class-methods EXECUTE
    importing
      value(IO_HTTP_REQUEST) type ref to ZGOOGLE_HTTP_REQUEST
      value(IO_CLIENT) type ref to ZGOOGLE_CLIENT
      value(IP_CONTENT_TYPE) type ZGOOGLE_STRING
    returning
      value(ET_RETURN) type ZGOOGLE_STRING_T .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <method CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="CREATEREQUESTURI" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="CREATEREQUESTURI" SCONAME="SERVICEPATH" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="CREATEREQUESTURI" SCONAME="RESPATH" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="CREATEREQUESTURI" SCONAME="PARAMS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_HTTP_PARAM_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_HTTP_PARAM_T"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="CREATEREQUESTURI" SCONAME="RP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method CREATEREQUESTURI.

  DATA lv_requesturl TYPE string.
  DATA ls_params TYPE zgoogle_http_param_s.
  DATA lv_parname TYPE string.

  CONCATENATE servicepath respath INTO lv_requesturl.

  LOOP AT params INTO ls_params.
    IF ls_params-location EQ &apos;path&apos;.
      CONCATENATE &apos;{&apos; ls_params-vkey &apos;}&apos; INTO lv_parname.
      REPLACE ALL OCCURRENCES OF lv_parname IN lv_requesturl WITH ls_params-vvalue.
    ELSEIF ls_params-location EQ &apos;query&apos;.
      IF sy-tabix EQ 1.
        CONCATENATE lv_requesturl &apos;?&apos; INTO lv_requesturl.
      ENDIF.
      CONCATENATE lv_requesturl &apos;&amp;&apos; ls_params-vkey &apos;=&apos; ls_params-vvalue INTO lv_requesturl.
    ENDIF.
  ENDLOOP.

  rp_value = lv_requesturl.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="EXECUTE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="EXECUTE" SCONAME="IO_HTTP_REQUEST" VERSION="1" LANGU="E" DESCRIPT="google_http_request" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_HTTP_REQUEST"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="EXECUTE" SCONAME="IO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="EXECUTE" SCONAME="IP_CONTENT_TYPE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_string" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REST" CMPNAME="EXECUTE" SCONAME="ET_RETURN" VERSION="1" LANGU="E" DESCRIPT="String table" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING_T"/>
   <source>method EXECUTE.

  DATA lo_response TYPE REF TO if_http_response.
  DATA xml_xstring TYPE string.
  DATA lo_io TYPE REF TO zgoogle_io_generic.
  DATA lv_code TYPE i.
  DATA ls_return TYPE LINE OF zgoogle_string_t.
  DATA lv_proxy TYPE string.
  DATA lv_proxy_port TYPE string.

  lo_io = io_client-&gt;getio( ).

*  io_http_request-&gt;set_proxy( io_client-&gt;get_proxy( ) ).
  CALL METHOD io_client-&gt;get_proxy
    RECEIVING
      rv_value = lv_proxy.
  CALL METHOD io_http_request-&gt;set_proxy
    EXPORTING
      ip_value = lv_proxy.

*  io_http_request-&gt;set_proxy_port( io_client-&gt;get_proxy_port( ) ).
  CALL METHOD io_client-&gt;get_proxy_port
    RECEIVING
      rv_value = lv_proxy_port.
  CALL METHOD io_http_request-&gt;set_proxy_port
    EXPORTING
      ip_value = lv_proxy_port.

  lo_io-&gt;makerequest(
    EXPORTING
      io_http_request  =   io_http_request   &quot; google_http_request
      ip_content_type = ip_content_type
    IMPORTING
      eo_http_response = lo_response    &quot; HTTP Framework (iHTTP) HTTP Response
      ev_responsestr   = xml_xstring
  ).

  IF lo_response IS NOT INITIAL.
    lo_response-&gt;get_status(
      IMPORTING
        code   =  lv_code  &quot; HTTP status code
*        reason =     &quot; HTTP status description
    ).
    IF lv_code EQ 200.
      ls_return = xml_xstring.
      APPEND ls_return TO et_return.
    ENDIF.
  ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_HTTP_REQUEST" VERSION="1" LANGU="E" DESCRIPT="google_http_request" UUID="024C9CBAD63F1ED3BC8F0A737B1F2BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_HTTP_REQUEST definition
  public
  create public .

public section.

  data PV_ACCESSKEY type STRING .
  constants GZIP_UA type STRING value &apos; (gzip)&apos;. &quot;#EC NOTEXT

  methods CONSTRUCTOR
    importing
      value(URL) type STRING
      value(METHOD) type STRING
      value(POSTBODY) type ZGOOGLE_POSTBODY_T .
  methods SETREQUESTMETHOD
    importing
      value(IP_METHOD) type STRING .
  methods SETURL
    importing
      value(IP_URL) type STRING .
  methods SETREQUESTHEADERS
    importing
      value(IP_KEY) type STRING
      value(IP_VALUE) type STRING .
  methods SETPOSTBODY
    importing
      value(IT_POSTBODY) type ZGOOGLE_POSTBODY_T .
  methods SETBASECOMPONENT
    importing
      value(IP_BASEPATH) type STRING .
  methods SETEXPECTEDCLASS
    importing
      value(IP_EXPECTEDCLASS) type STRING .
  methods SETQUERYPARAM
    importing
      value(IP_KEY) type STRING
      value(IP_VALUE) type STRING .
  methods DISABLEGZIP .
  methods GET_URL
    returning
      value(RV_URL) type STRING .
  methods GETPOSTBODY
    returning
      value(RT_POSTBODY) type ZGOOGLE_POSTBODY_T .
  methods GETREQUESTMETHOD
    returning
      value(RV_VALUE) type STRING .
  methods GETBASECOMPONENT
    returning
      value(RP_BASEPATH) type STRING .
  methods GETREQUESTHEADERS
    returning
      value(RT_HEADERS) type ZGOOGLE_HTTP_HEADERS_T .
  methods GET_PROXY
    returning
      value(RV_VALUE) type STRING .
  methods GET_PROXY_PORT
    returning
      value(RV_VALUE) type STRING .
  methods SET_PROXY
    importing
      value(IP_VALUE) type STRING .
  methods SET_PROXY_PORT
    importing
      value(IP_VALUE) type STRING .</publicSection>
  <protectedSection>protected section.

  data PV_QUERYPARAMS type ZGOOGLE_KCV_T .
  data PV_REQUESTMETHOD type STRING .
  data PT_REQUESTHEADERS type ZGOOGLE_HTTP_HEADERS_T .
  data PV_BASECOMPONENT type STRING .
  data PV_PATH type STRING .
  data PT_POSTBODY type ZGOOGLE_POSTBODY_T .
  data PV_USERAGENT type STRING .
  data PV_CANGZIP type STRING .
  data PV_RESPONSEHTTPCODE type STRING .
  data PV_RESPONSEHEADERS type STRING .
  data PV_RESPONSEBODY type STRING .
  data PV_EXPECTEDCLASS type STRING .
  data PV_PROXY type STRING .
  data PV_PROXY_PORT type STRING .</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GZIP_UA" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="14 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos; (gzip)&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PT_POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" EXPOSURE="1" STATE="1" EDITORDER="6 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PT_REQUESTHEADERS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_HTTP_PARAM_T" EXPOSURE="1" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_HTTP_HEADERS_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_ACCESSKEY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="13 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_BASECOMPONENT" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_CANGZIP" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="8 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_EXPECTEDCLASS" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="12 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_PATH" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_PROXY" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="15 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_PROXY_PORT" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="16 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_QUERYPARAMS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_HTTP_PARAM_T" EXPOSURE="1" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_KCV_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_REQUESTMETHOD" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_RESPONSEBODY" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="11 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_RESPONSEHEADERS" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="10 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_RESPONSEHTTPCODE" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="9 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="PV_USERAGENT" VERSION="1" LANGU="E" EXPOSURE="1" STATE="1" EDITORDER="7 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="CONSTRUCTOR" SCONAME="URL" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="CONSTRUCTOR" SCONAME="METHOD" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="CONSTRUCTOR" SCONAME="POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" CMPTYPE="1" MTDTYPE="2" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T"/>
   <source>method CONSTRUCTOR.

    me-&gt;seturl( url ).
    me-&gt;setrequestmethod( method ).
    me-&gt;setpostbody( postbody ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="DISABLEGZIP" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="9 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method DISABLEGZIP.

    CLEAR me-&gt;pv_cangzip.
    REPLACE zgoogle_http_request=&gt;gzip_ua WITH &apos;&apos; INTO me-&gt;pv_useragent.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETBASECOMPONENT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="13 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETBASECOMPONENT" SCONAME="RP_BASEPATH" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETBASECOMPONENT.

    rp_basepath = me-&gt;pv_basecomponent.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETPOSTBODY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="11 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETPOSTBODY" SCONAME="RT_POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T"/>
   <source>method GETPOSTBODY.

    rt_postbody = me-&gt;pt_postbody.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETREQUESTHEADERS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="14 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETREQUESTHEADERS" SCONAME="RT_HEADERS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_HTTP_PARAM_S" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_HTTP_HEADERS_T"/>
   <source>method GETREQUESTHEADERS.

    rt_headers = me-&gt;pt_requestheaders.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETREQUESTMETHOD" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="12 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GETREQUESTMETHOD" SCONAME="RV_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETREQUESTMETHOD.

    rv_value = me-&gt;pv_requestmethod.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GET_PROXY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="15 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GET_PROXY" SCONAME="RV_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_PROXY.

    rv_value = me-&gt;pv_proxy.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GET_PROXY_PORT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="16 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GET_PROXY_PORT" SCONAME="RV_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_PROXY_PORT.

    rv_value = me-&gt;pv_proxy_port.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GET_URL" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="10 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="GET_URL" SCONAME="RV_URL" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_URL.

    rv_url = me-&gt;pv_path.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETBASECOMPONENT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETBASECOMPONENT" SCONAME="IP_BASEPATH" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETBASECOMPONENT.

    me-&gt;pv_basecomponent = ip_basepath.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETEXPECTEDCLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETEXPECTEDCLASS" SCONAME="IP_EXPECTEDCLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETEXPECTEDCLASS.

    me-&gt;pv_expectedclass = ip_expectedclass.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETPOSTBODY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETPOSTBODY" SCONAME="IT_POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T"/>
   <source>method SETPOSTBODY.

    me-&gt;pt_postbody = it_postbody.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETQUERYPARAM" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="8 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETQUERYPARAM" SCONAME="IP_KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETQUERYPARAM" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETQUERYPARAM.
    FIELD-SYMBOLS: &lt;fs_queryparams&gt; TYPE zgoogle_kcv_s.
    DATA: ls_queryparams TYPE zgoogle_kcv_s.

    READ TABLE me-&gt;pv_queryparams ASSIGNING &lt;fs_queryparams&gt; WITH KEY vkey = ip_key.
    IF sy-subrc EQ 0.
      &lt;fs_queryparams&gt;-vvalue = ip_value.
    ELSE.
      ls_queryparams-vkey = ip_key.
      ls_queryparams-vvalue = ip_value.
      APPEND ls_queryparams TO me-&gt;pv_queryparams.
    ENDIF.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETREQUESTHEADERS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETREQUESTHEADERS" SCONAME="IP_KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETREQUESTHEADERS" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETREQUESTHEADERS.

  DATA ls_header TYPE zgoogle_http_headers_s.
  ls_header-vkey = ip_key.
  ls_header-vvalue = ip_value.

  append ls_header to me-&gt;pt_requestheaders.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETREQUESTMETHOD" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETREQUESTMETHOD" SCONAME="IP_METHOD" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETREQUESTMETHOD.

    me-&gt;pv_requestmethod = ip_method.
    TRANSLATE me-&gt;pv_requestmethod TO UPPER CASE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETURL" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SETURL" SCONAME="IP_URL" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETURL.

    DATA lv_url TYPE string.
    lv_url = ip_url.
    IF lv_url(4) NE &apos;http&apos;.
      IF lv_url(1) NE &apos;/&apos;.
        CONCATENATE &apos;/&apos; lv_url INTO lv_url.
      ENDIF.
    ENDIF.
    me-&gt;pv_path = lv_url.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SET_PROXY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="17 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SET_PROXY" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SET_PROXY.

    pv_proxy = ip_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SET_PROXY_PORT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="18 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_HTTP_REQUEST" CMPNAME="SET_PROXY_PORT" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SET_PROXY_PORT.

    pv_proxy_port = ip_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZCX_JSON_DOCUMENT" VERSION="1" LANGU="E" DESCRIPT="JSON Document Class Exceptions" UUID="024C9CBAD63F1ED3BC8F0A737B1F0BBA" CATEGORY="40" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSFINAL="X" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 " REFCLSNAME="CX_STATIC_CHECK">
  <implementing CLSNAME="ZCX_JSON_DOCUMENT" REFCLSNAME="IF_T100_MESSAGE" VERSION="1" EXPOSURE="2" STATE="1" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" RELTYPE="1" EDITORDER="0 "/>
  <publicSection>class ZCX_JSON_DOCUMENT definition
  public
  inheriting from CX_STATIC_CHECK
  final
  create public .

public section.

  interfaces IF_T100_MESSAGE .

  constants:
    begin of CONVERSATION_ERROR,
      msgid type symsgid value &apos;ZJSON&apos;,
      msgno type symsgno value &apos;001&apos;,
      attr1 type scx_attrname value &apos;ERROR_TEXT&apos;,
      attr2 type scx_attrname value &apos;TYPE_KIND&apos;,
      attr3 type scx_attrname value &apos;ACTUAL_VALUE&apos;,
      attr4 type scx_attrname value &apos;&apos;,
    end of CONVERSATION_ERROR .
  constants:
    begin of NOT_SUPPORTED,
      msgid type symsgid value &apos;ZJSON&apos;,
      msgno type symsgno value &apos;002&apos;,
      attr1 type scx_attrname value &apos;&apos;,
      attr2 type scx_attrname value &apos;&apos;,
      attr3 type scx_attrname value &apos;&apos;,
      attr4 type scx_attrname value &apos;&apos;,
    end of NOT_SUPPORTED .
  data ERROR_TEXT type STRING .
  data TYPE_KIND type STRING .
  data ACTUAL_VALUE type STRING .

  methods CONSTRUCTOR
    importing
      !TEXTID like IF_T100_MESSAGE=&gt;T100KEY optional
      !PREVIOUS like PREVIOUS optional
      !ERROR_TEXT type STRING optional
      !TYPE_KIND type STRING optional
      !ACTUAL_VALUE type STRING optional .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="ACTUAL_VALUE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONVERSATION_ERROR" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTEXPVIRT="0" TYPTYPE="4" SRCROW1="12 " SRCCOLUMN1="4 " SRCROW2="19 " SRCCOLUMN2="28 " LOCKED="X" R3RELEASE="731" TYPESRC_LENG="328 " TYPESRC="begin of CONVERSATION_ERROR,
      msgid type symsgid value &apos;ZJSON&apos;,
      msgno type symsgno value &apos;001&apos;,
      attr1 type scx_attrname value &apos;ERROR_TEXT&apos;,
      attr2 type scx_attrname value &apos;TYPE_KIND&apos;,
      attr3 type scx_attrname value &apos;ACTUAL_VALUE&apos;,
      attr4 type scx_attrname value &apos;&apos;,
    end of CONVERSATION_ERROR
"/>
  <attribute CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="ERROR_TEXT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="NOT_SUPPORTED" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTEXPVIRT="0" TYPTYPE="4" SRCROW1="21 " SRCCOLUMN1="4 " SRCROW2="28 " SRCCOLUMN2="23 " LOCKED="X" R3RELEASE="731" TYPESRC_LENG="287 " TYPESRC="begin of NOT_SUPPORTED,
      msgid type symsgid value &apos;ZJSON&apos;,
      msgno type symsgno value &apos;002&apos;,
      attr1 type scx_attrname value &apos;&apos;,
      attr2 type scx_attrname value &apos;&apos;,
      attr3 type scx_attrname value &apos;&apos;,
      attr4 type scx_attrname value &apos;&apos;,
    end of NOT_SUPPORTED
"/>
  <attribute CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="TYPE_KIND" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <inheritance CLSNAME="ZCX_JSON_DOCUMENT" REFCLSNAME="CX_STATIC_CHECK" VERSION="1" STATE="1" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
  <method CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" LOCKED="X" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONSTRUCTOR" SCONAME="TEXTID" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="0" TYPE="IF_T100_MESSAGE=&gt;T100KEY" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONSTRUCTOR" SCONAME="PREVIOUS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="0" TYPE="PREVIOUS" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONSTRUCTOR" SCONAME="ERROR_TEXT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONSTRUCTOR" SCONAME="TYPE_KIND" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCX_JSON_DOCUMENT" CMPNAME="CONSTRUCTOR" SCONAME="ACTUAL_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <source>method CONSTRUCTOR.
CALL METHOD SUPER-&gt;CONSTRUCTOR
EXPORTING
PREVIOUS = PREVIOUS
.
me-&gt;ERROR_TEXT = ERROR_TEXT .
me-&gt;TYPE_KIND = TYPE_KIND .
me-&gt;ACTUAL_VALUE = ACTUAL_VALUE .
clear me-&gt;textid.
if textid is initial.
  IF_T100_MESSAGE~T100KEY = IF_T100_MESSAGE=&gt;DEFAULT_TEXTID.
else.
  IF_T100_MESSAGE~T100KEY = TEXTID.
endif.
endmethod.</source>
   <methodDocumentation/>
   <methodDocumentation/>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_IO_GENERIC" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_IO_GENERIC" UUID="024C9CBAD63F1ED3BC8F0A4D6C3EEBBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_IO_GENERIC definition
  public
  create public .

public section.

  constants C_CTYPE_JSON type STRING value &apos;application/json&apos;. &quot;#EC NOTEXT
  constants C_CTYPE_XWWWFORMURLENCODED type STRING value &apos;application/x-www-form-urlencoded&apos;. &quot;#EC NOTEXT

  methods MAKEREQUEST
    importing
      value(IO_HTTP_REQUEST) type ref to ZGOOGLE_HTTP_REQUEST
      value(IP_CONTENT_TYPE) type ZGOOGLE_STRING
    exporting
      value(EO_HTTP_RESPONSE) type ref to IF_HTTP_RESPONSE
      value(EV_RESPONSESTR) type STRING .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="C_CTYPE_JSON" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;application/json&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="C_CTYPE_XWWWFORMURLENCODED" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;application/x-www-form-urlencoded&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="MAKEREQUEST" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="MAKEREQUEST" SCONAME="IO_HTTP_REQUEST" VERSION="1" LANGU="E" DESCRIPT="google_http_request" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_HTTP_REQUEST"/>
   <parameter CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="MAKEREQUEST" SCONAME="IP_CONTENT_TYPE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_string" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING"/>
   <parameter CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="MAKEREQUEST" SCONAME="EO_HTTP_RESPONSE" VERSION="1" LANGU="E" DESCRIPT="HTTP Framework (iHTTP) HTTP Response" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="0" TYPTYPE="3" TYPE="IF_HTTP_RESPONSE"/>
   <parameter CLSNAME="ZGOOGLE_IO_GENERIC" CMPNAME="MAKEREQUEST" SCONAME="EV_RESPONSESTR" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method MAKEREQUEST.

    DATA: client TYPE REF TO if_http_client.
    DATA: request TYPE REF TO cl_http_request, &quot;if_http_request
          rc TYPE sy-subrc,
          http_rc TYPE sy-subrc.
    DATA lv_url TYPE string.
    DATA lv_basepath TYPE string.
    DATA lv_geturl TYPE string.
    DATA lv_method TYPE string.
    DATA lv_lines TYPE i.
    DATA lt_headers TYPE zgoogle_http_headers_t.
    DATA ls_headers TYPE zgoogle_http_headers_s.
    DATA lt_postbody TYPE zgoogle_postbody_t.
    DATA ls_postbody TYPE zgoogle_postbody_s.
    DATA lv_str TYPE string.
    DATA lv_body TYPE string.
    DATA lv_proxy TYPE string.
    DATA lv_proxy_port TYPE string.

    lv_url = io_http_request-&gt;get_url( ).
    lv_basepath = io_http_request-&gt;getbasecomponent( ).

    &quot;method set
    lv_method = io_http_request-&gt;getrequestmethod( ).
    lv_geturl = lv_basepath.

    lv_proxy = io_http_request-&gt;get_proxy( ).
    lv_proxy_port = io_http_request-&gt;get_proxy_port( ).

    CALL METHOD cl_http_client=&gt;create
      EXPORTING
        host               = lv_geturl
        scheme             = cl_http_client=&gt;schemetype_https
        proxy_host         = lv_proxy
        proxy_service      = lv_proxy_port
        ssl_id             = &apos;ANONYM&apos;
*       SAP_USERNAME       =
*       SAP_CLIENT         =
      IMPORTING
        client             = client
      EXCEPTIONS
        argument_not_found = 1
        plugin_not_active  = 2
        internal_error     = 3
        OTHERS             = 4.
    IF sy-subrc &lt;&gt; 0.
* MESSAGE ID SY-MSGID TYPE SY-MSGTY NUMBER SY-MSGNO
*            WITH SY-MSGV1 SY-MSGV2 SY-MSGV3 SY-MSGV4.
    ENDIF.

    request ?= client-&gt;request.

    IF lv_method EQ &apos;GET&apos;.
      CALL METHOD client-&gt;request-&gt;set_method(
        if_http_request=&gt;co_request_method_get ).

      client-&gt;request-&gt;set_header_field(
        name = &apos;Content-length&apos;
        value = &apos;0&apos;
        ).
    ELSEIF lv_method EQ &apos;POST&apos;.
      CALL METHOD client-&gt;request-&gt;set_method(
        if_http_request=&gt;co_request_method_post ).

      client-&gt;request-&gt;set_header_field(
      name = &apos;Content-Type&apos;
      value = ip_content_type
      ).
    ELSEIF lv_method EQ &apos;DELETE&apos;.
      CALL METHOD client-&gt;request-&gt;set_method( &apos;DELETE&apos; ).
    ELSEIF lv_method EQ &apos;PUT&apos;.
      CALL METHOD client-&gt;request-&gt;set_method( &apos;PUT&apos; ).
    ENDIF.

* set protocol version
    client-&gt;request-&gt;set_version(
         if_http_request=&gt;co_protocol_version_1_1 ).

* headers
    client-&gt;request-&gt;set_header_field(
      name = &apos;Host&apos;
      value = lv_basepath
      ).

    CALL METHOD cl_http_utility=&gt;if_http_utility~set_request_uri
      EXPORTING
        request = client-&gt;request
        uri     = lv_url.

    &quot;requestheaders set
    lt_headers = io_http_request-&gt;getrequestheaders( ).
    LOOP AT lt_headers INTO ls_headers.
      client-&gt;request-&gt;set_header_field(
        name = ls_headers-vkey
        value = ls_headers-vvalue
        ).
    ENDLOOP.

    &quot;user agent set
    &quot;TODO

    &quot;requestbody set
    lt_postbody = io_http_request-&gt;getpostbody( ).
    DESCRIBE TABLE lt_postbody LINES lv_lines.

    IF lt_postbody IS NOT INITIAL.
      LOOP AT lt_postbody INTO ls_postbody.
*optional Request fields
        IF ip_content_type EQ zgoogle_io_generic=&gt;c_ctype_xwwwformurlencoded.
          lv_str = cl_http_utility=&gt;if_http_utility~escape_url( ls_postbody-value ).
        ELSE.
          lv_str = ls_postbody-value.
        ENDIF.
        CALL METHOD request-&gt;set_form_field
          EXPORTING
            name  = ls_postbody-key
            value = lv_str.
        IF ip_content_type EQ zgoogle_io_generic=&gt;c_ctype_xwwwformurlencoded.
          IF sy-tabix NE 1.
            CONCATENATE lv_body &apos;&amp;&apos; ls_postbody-key &apos;=&apos; lv_str INTO lv_body.
          ELSE.
            CONCATENATE lv_body ls_postbody-key &apos;=&apos; lv_str INTO lv_body.
          ENDIF.
        ELSEIF ip_content_type EQ zgoogle_io_generic=&gt;c_ctype_json.
          IF lv_lines EQ 1.
            CONCATENATE lv_body &apos;{ &apos; ls_postbody-key &apos;: &apos; lv_str &apos; }&apos; INTO lv_body.
          ELSE.
            IF sy-tabix NE 1 AND sy-tabix NE lv_lines.
              CONCATENATE lv_body &apos; &apos; ls_postbody-key &apos;: &apos; lv_str &apos;,&apos; INTO lv_body.
            ELSEIF sy-tabix EQ lv_lines.
              CONCATENATE lv_body &apos;&apos; ls_postbody-key &apos;: &apos; lv_str &apos; }&apos;  INTO lv_body.
            ELSE.
              CONCATENATE lv_body &apos;{ &apos; ls_postbody-key &apos;: &apos; lv_str &apos;,&apos;  INTO lv_body.
            ENDIF.
          ENDIF.
        ENDIF.
      ENDLOOP.
    ENDIF.

    client-&gt;request-&gt;set_cdata( lv_body ).

    &quot;execute
    CALL METHOD client-&gt;send
      EXCEPTIONS
        http_communication_failure = 1
        http_invalid_state         = 2
        http_processing_failed     = 3
        http_invalid_timeout       = 4
        OTHERS                     = 5.
    IF sy-subrc &lt;&gt; 0.
    ENDIF.

    CALL METHOD client-&gt;receive
      EXCEPTIONS
        http_communication_failure = 1
        http_invalid_state         = 2
        http_processing_failed     = 3
        OTHERS                     = 4.

    rc = sy-subrc. &quot;error receive

    IF rc = 0.
      eo_http_response = client-&gt;response.
      ev_responsestr = client-&gt;response-&gt;get_cdata( ).
    ENDIF.

* very important: close your connection
    client-&gt;close( ).
endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_AUTH_OAUTH2" VERSION="1" LANGU="E" DESCRIPT="google_auth_oauth2" UUID="024C9CBAD63F1ED3BC8F0A4D6C3ECBBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_AUTH_OAUTH2 definition
  public
  create public .

public section.

  constants PC_NAME type STRING value &apos;ZGOOGLE_AUTH_OAUTH2&apos;. &quot;#EC NOTEXT
  constants PC_OAUTH2_REVOKE_URI type STRING value &apos;https://accounts.google.com/o/oauth2/revoke&apos;. &quot;#EC NOTEXT
  constants PC_OAUTH2_TOKEN_URI type STRING value &apos;https://accounts.google.com/o/oauth2/token&apos;. &quot;#EC NOTEXT
  constants PC_OAUTH2_AUTH_URL type STRING value &apos;https://accounts.google.com/o/oauth2/auth&apos;. &quot;#EC NOTEXT
  constants PC_CLOCK_SKEW_SECS type N value 300. &quot;#EC NOTEXT
  constants PC_AUTH_TOKEN_LIFETIME_SECS type N value 300. &quot;#EC NOTEXT
  constants PC_MAX_TOKEN_LIFETIME_SECS type N value 86400. &quot;#EC NOTEXT
  constants PC_OAUTH2_ISSUER type STRING value &apos;accounts.google.com&apos;. &quot;#EC NOTEXT

  methods CONSTRUCTOR
    importing
      !IO_CLIENT type ref to ZGOOGLE_CLIENT .
  methods SIGN
    importing
      value(IO_HTTP_REQUEST) type ref to ZGOOGLE_HTTP_REQUEST
    returning
      value(RO_HTTP_REQUEST) type ref to ZGOOGLE_HTTP_REQUEST .
  methods ISACCESSTOKENEXPIRED
    returning
      value(EP_VALUE) type ZGOOGLE_BOOL .
  methods REFRESHTOKEN
    importing
      value(IP_REFRESHTOKEN) type STRING .
  methods REFRESHTOKENREQUEST
    importing
      value(IP_CLIENT_ID) type STRING
      value(IP_CLIENT_SECRET) type STRING
      value(IP_REFRESH_TOKEN) type STRING
      value(IP_GRANT_TYPE) type STRING
    exceptions
      GOOGLE_AUTH_EXCEPTION .
  methods GETACCESSTOKEN
    returning
      value(RS_TOKEN) type ZGOOGLE_TOKEN_S .
  methods CREATEAUTHURL
    importing
      value(IP_SCOPES) type STRING
    returning
      value(RP_URL) type STRING .
  methods AUTHENTICATE
    importing
      value(IP_CODE) type STRING optional
      value(IS_ACCESS) type ZGOOGLE_ACCESS optional
    returning
      value(RS_AUTH) type ZGOOGLE_TOKEN_S .
  methods SETACCESSTOKEN
    importing
      value(IP_JSON) type STRING optional
      value(IS_TOKEN) type ZGOOGLE_ACCESS optional
      value(IP_REFRESH) type ZGOOGLE_BOOL optional .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.

  data PV_ASSERTIONCREDENTIALS type STRING .
  data PV_STATE type STRING .
  data PS_TOKEN type ZGOOGLE_TOKEN_S .
  data PO_CLIENT type ref to ZGOOGLE_CLIENT .</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_AUTH_TOKEN_LIFETIME_SECS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="10 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="300" ATTEXPVIRT="0" TYPTYPE="1" TYPE="N" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_CLOCK_SKEW_SECS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="9 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="300" ATTEXPVIRT="0" TYPTYPE="1" TYPE="N" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_MAX_TOKEN_LIFETIME_SECS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="11 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="86400" ATTEXPVIRT="0" TYPTYPE="1" TYPE="N" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_NAME" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;ZGOOGLE_AUTH_OAUTH2&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_OAUTH2_AUTH_URL" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="8 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;https://accounts.google.com/o/oauth2/auth&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_OAUTH2_ISSUER" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="12 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;accounts.google.com&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_OAUTH2_REVOKE_URI" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="6 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;https://accounts.google.com/o/oauth2/revoke&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PC_OAUTH2_TOKEN_URI" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="7 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;https://accounts.google.com/o/oauth2/token&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" EXPOSURE="0" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PS_TOKEN" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_TOKEN_S" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PV_ASSERTIONCREDENTIALS" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="PV_STATE" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="AUTHENTICATE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="8 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="AUTHENTICATE" SCONAME="IP_CODE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="AUTHENTICATE" SCONAME="IS_ACCESS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_ACCESS" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_ACCESS" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="AUTHENTICATE" SCONAME="RS_AUTH" VERSION="1" LANGU="E" DESCRIPT="Boolean" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_TOKEN_S"/>
   <source>method AUTHENTICATE.

  DATA lo_http_request TYPE REF TO zgoogle_http_request.
  DATA lt_body TYPE zgoogle_postbody_t.
  DATA ls_body TYPE zgoogle_postbody_s.
  DATA lt_result TYPE zgoogle_kcv_t.
  DATA ls_result TYPE zgoogle_kcv_s.
  DATA lt_config TYPE zgoogle_kcv_t.
  DATA ls_config TYPE zgoogle_kcv_s.
  DATA lv_code TYPE i.
  DATA lo_response TYPE REF TO if_http_response.
  DATA xml_xstring TYPE string.
  DATA lo_io TYPE REF TO zgoogle_io_generic.
  DATA: lv_url2 TYPE string.
  DATA: lv_url3 TYPE string.
  DATA: len TYPE i.
  DATA: pos1 TYPE i.
  DATA: pos2 TYPE i.
  DATA: pos3 TYPE i.
  DATA: lv_proxy TYPE string.
  DATA: lv_proxy_port TYPE string.

  IF is_access IS SUPPLIED.
    me-&gt;setaccesstoken( is_token = is_access ).
    rs_auth = me-&gt;ps_token.
    RETURN.
  ENDIF.

  ls_body-key = &apos;code&apos;.
  ls_body-value = ip_code.
  APPEND ls_body TO lt_body.
  ls_body-key = &apos;grant_type&apos;.
  ls_body-value = &apos;authorization_code&apos;.
  APPEND ls_body TO lt_body.
  ls_body-key = &apos;redirect_uri&apos;.
  lt_result = me-&gt;po_client-&gt;getclassconfig(
                io_class = me
                ip_key   = &apos;redirect_uri&apos;
*                    ip_class =
            ).
  READ TABLE lt_result INDEX 1 INTO ls_result.
  ls_body-value = ls_result-vvalue.
  APPEND ls_body TO lt_body.
  ls_body-key = &apos;client_id&apos;.
  lt_result = me-&gt;po_client-&gt;getclassconfig(
                io_class = me
                ip_key   = &apos;client_id&apos;
*                    ip_class =
            ).
  READ TABLE lt_result INDEX 1 INTO ls_result.
  ls_body-value = ls_result-vvalue.
  APPEND ls_body TO lt_body.
  ls_body-key = &apos;client_secret&apos;.
  lt_result = me-&gt;po_client-&gt;getclassconfig(
                io_class = me
                ip_key   = &apos;client_secret&apos;
*                    ip_class =
            ).
  READ TABLE lt_result INDEX 1 INTO ls_result.
  ls_body-value = ls_result-vvalue.
  APPEND ls_body TO lt_body.

  FIND FIRST OCCURRENCE OF &apos;//&apos; IN me-&gt;pc_oauth2_token_uri MATCH OFFSET pos1.
  FIND FIRST OCCURRENCE OF &apos;/o/&apos; IN me-&gt;pc_oauth2_token_uri MATCH OFFSET pos2.
  len = pos2 - pos1 - 2.
  pos1 = pos1 + 2.
  lv_url2 = me-&gt;pc_oauth2_token_uri+pos1(len).
  len = STRLEN( me-&gt;pc_oauth2_token_uri ) - pos2.
  lv_url3 = me-&gt;pc_oauth2_token_uri+pos2(len).

  CREATE OBJECT lo_http_request
    EXPORTING
      url      = lv_url3
      method   = &apos;POST&apos;
      postbody = lt_body.    &quot; ZGOOGLE_POSTBODY_T

  lo_http_request-&gt;setbasecomponent( ip_basepath = lv_url2 ).

  me-&gt;po_client-&gt;getclassconfig(
*       io_class = &apos;Google_Http_Request&apos;
   ip_key   =  &apos;disable_gzip&apos;
   ip_class = &apos;ZGOOGLE_HTTP_REQUEST&apos;
).
  READ TABLE lt_config INTO ls_config INDEX 1.
  IF ls_config-vvalue EQ &apos;X&apos;.
    lo_http_request-&gt;disablegzip( ).
  ENDIF.

  lo_io = me-&gt;po_client-&gt;getio( ).

*  lo_http_request-&gt;set_proxy( me-&gt;po_client-&gt;get_proxy( ) ).
  CALL METHOD me-&gt;po_client-&gt;get_proxy
    RECEIVING
      rv_value = lv_proxy.
  CALL METHOD lo_http_request-&gt;set_proxy
    EXPORTING
      ip_value = lv_proxy.

*  lo_http_request-&gt;set_proxy_port( me-&gt;po_client-&gt;get_proxy_port( ) ).
  CALL METHOD me-&gt;po_client-&gt;get_proxy_port
    RECEIVING
      rv_value = lv_proxy_port.
  CALL METHOD lo_http_request-&gt;set_proxy_port
    EXPORTING
      ip_value = lv_proxy_port.

  lo_io-&gt;makerequest(
    EXPORTING
      ip_content_type  = zgoogle_io_generic=&gt;c_ctype_xwwwformurlencoded
      io_http_request  =   lo_http_request   &quot; google_http_request
    IMPORTING
      eo_http_response = lo_response    &quot; HTTP Framework (iHTTP) HTTP Response
      ev_responsestr   = xml_xstring
  ).

  IF lo_response IS NOT INITIAL.
    lo_response-&gt;get_status(
      IMPORTING
        code   =  lv_code  &quot; HTTP status code
*        reason =     &quot; HTTP status description
    ).
    IF lv_code EQ 200.
      me-&gt;setaccesstoken( ip_json = xml_xstring ).
      rs_auth = me-&gt;ps_token.
    ENDIF.
  ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="CONSTRUCTOR" SCONAME="IO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT"/>
   <source>method CONSTRUCTOR.
    me-&gt;po_client = io_client.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="CREATEAUTHURL" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="CREATEAUTHURL" SCONAME="IP_SCOPES" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="CREATEAUTHURL" SCONAME="RP_URL" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method CREATEAUTHURL.

    DATA lt_result TYPE zgoogle_kcv_t.
    DATA ls_result TYPE zgoogle_kcv_s.

    CONCATENATE zgoogle_auth_oauth2=&gt;pc_oauth2_auth_url &apos;?&apos; INTO rp_url IN CHARACTER MODE.
    CONCATENATE rp_url &apos;response_type=&apos; &apos;code&apos; &apos;&amp;&apos; INTO rp_url IN CHARACTER MODE.

    me-&gt;po_client-&gt;getclassconfig(
      EXPORTING
        io_class = me
        ip_key   = &apos;redirect_uri&apos;
*        ip_class =
      RECEIVING
        rt_value =  lt_result   &quot; ZGOOGLE_KCV_T
    ).
    READ TABLE lt_result INTO ls_result INDEX 1.

    CONCATENATE rp_url &apos;redirect_uri=&apos; ls_result-vvalue &apos;&amp;&apos; INTO rp_url IN CHARACTER MODE.

    me-&gt;po_client-&gt;getclassconfig(
      EXPORTING
        io_class = me
        ip_key   = &apos;client_id&apos;
*        ip_class =
      RECEIVING
        rt_value =  lt_result   &quot; ZGOOGLE_KCV_T
    ).
    READ TABLE lt_result INTO ls_result INDEX 1.

    CONCATENATE rp_url &apos;client_id=&apos; ls_result-vvalue &apos;&amp;&apos; INTO rp_url IN CHARACTER MODE.
    CONCATENATE rp_url &apos;scope=&apos; ip_scopes &apos;&amp;&apos; INTO rp_url IN CHARACTER MODE.

    me-&gt;po_client-&gt;getclassconfig(
      EXPORTING
        io_class = me
        ip_key   = &apos;access_type&apos;
*        ip_class =
      RECEIVING
        rt_value =  lt_result   &quot; ZGOOGLE_KCV_T
    ).
    READ TABLE lt_result INTO ls_result INDEX 1.

    CONCATENATE rp_url &apos;access_type=&apos; ls_result-vvalue &apos;&amp;&apos; INTO rp_url IN CHARACTER MODE.

    me-&gt;po_client-&gt;getclassconfig(
      EXPORTING
        io_class = me
        ip_key   = &apos;approval_prompt&apos;
*        ip_class =
      RECEIVING
        rt_value =  lt_result   &quot; ZGOOGLE_KCV_T
    ).
    READ TABLE lt_result INTO ls_result INDEX 1.

    CONCATENATE rp_url &apos;approval_prompt=&apos; ls_result-vvalue INTO rp_url IN CHARACTER MODE.


*   If the list of scopes contains plus.login, add request_visible_actions
*   to auth URL.
    SEARCH ip_scopes FOR &apos;plus.login&apos;.
    IF sy-subrc EQ 0.
      me-&gt;po_client-&gt;getclassconfig(
     EXPORTING
       io_class = me
       ip_key   = &apos;request_visible_actions&apos;
*        ip_class =
     RECEIVING
       rt_value =  lt_result   &quot; ZGOOGLE_KCV_T
   ).
      READ TABLE lt_result INTO ls_result INDEX 1.

      CONCATENATE rp_url &apos;&amp;&apos; &apos;request_visible_actions=&apos; ls_result-vvalue INTO rp_url IN CHARACTER MODE.

    ENDIF.

    IF me-&gt;pv_state IS NOT INITIAL.
      CONCATENATE rp_url &apos;&amp;&apos; &apos;state=&apos; me-&gt;pv_state INTO rp_url IN CHARACTER MODE.
    ENDIF.

    CONDENSE rp_url NO-GAPS.
    rp_url = rp_url.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="GETACCESSTOKEN" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="GETACCESSTOKEN" SCONAME="RS_TOKEN" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_S" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_TOKEN_S"/>
   <source>method GETACCESSTOKEN.

    rs_token = me-&gt;ps_token.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="ISACCESSTOKENEXPIRED" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="ISACCESSTOKENEXPIRED" SCONAME="EP_VALUE" VERSION="1" LANGU="E" DESCRIPT="Boolean" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL"/>
   <source>method ISACCESSTOKENEXPIRED.

    IF me-&gt;ps_token IS INITIAL OR me-&gt;ps_token-created IS INITIAL.
      ep_value = &apos;X&apos;.
      RETURN.
    ENDIF.

*   If the token is set to expire in the next 30 seconds.
      DATA lv_secs TYPE i.
      lv_secs = ps_token-expires_in - 30.

      DATA lv_time type tims.
      lv_time = me-&gt;ps_token-created + lv_secs.

      IF lv_time LT sy-uzeit or me-&gt;ps_token-data ne sy-datum.
        ep_value = &apos;X&apos;.
        RETURN.
      ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKEN" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKEN" SCONAME="IP_REFRESHTOKEN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method REFRESHTOKEN.

    DATA lt_client_id TYPE zgoogle_kcv_t.
    DATA ls_client_id TYPE zgoogle_kcv_s.
    DATA lt_client_s TYPE zgoogle_kcv_t.
    DATA ls_client_s TYPE zgoogle_kcv_s.

    lt_client_id = me-&gt;po_client-&gt;getclassconfig(
                                                                            io_class = me
                                                                            ip_key   = &apos;client_id&apos;
*                                                                           ip_class =
                                                       ).
    lt_client_s = me-&gt;po_client-&gt;getclassconfig(
                                                                            io_class = me
                                                                            ip_key   = &apos;client_secret&apos;
*                                                                           ip_class =
                                                       ).

    READ TABLE lt_client_id INTO ls_client_id INDEX 1.
    READ TABLE lt_client_s INTO ls_client_s INDEX 1.


    me-&gt;refreshtokenrequest( EXPORTING ip_client_id =  ls_client_id-vvalue
                                       ip_client_secret = ls_client_s-vvalue
                                       ip_refresh_token = ip_refreshtoken
                                       ip_grant_type = &apos;refresh_token&apos; ).


endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKENREQUEST" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKENREQUEST" SCONAME="IP_CLIENT_ID" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKENREQUEST" SCONAME="IP_CLIENT_SECRET" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKENREQUEST" SCONAME="IP_REFRESH_TOKEN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKENREQUEST" SCONAME="IP_GRANT_TYPE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <exception CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="REFRESHTOKENREQUEST" SCONAME="GOOGLE_AUTH_EXCEPTION" VERSION="1" LANGU="E" DESCRIPT="Could not json decode the access token" MTDTYPE="0" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
   <source>METHOD refreshtokenrequest.

  DATA lt_postbody      TYPE zgoogle_postbody_t.
  DATA ls_postbody      TYPE zgoogle_postbody_s.
  DATA lo_http_response TYPE REF TO if_http_response.
  DATA lv_code          TYPE i.
  DATA lv_body          TYPE string.
  DATA lo_writer        TYPE REF TO cl_sxml_string_writer.
  DATA lv_token         TYPE xstring.
  DATA lt_config TYPE zgoogle_kcv_t.
  DATA ls_config TYPE zgoogle_kcv_s.
  DATA: lv_url2 TYPE string.
  DATA: lv_url3 TYPE string.
  DATA: len TYPE i.
  DATA: pos1 TYPE i.
  DATA: pos2 TYPE i.
  DATA: pos3 TYPE i.
  DATA: lv_proxy TYPE string.
  DATA: lv_proxy_port TYPE string.
  DATA: lo_io TYPE REF TO zgoogle_io_generic.

  ls_postbody-key = &apos;client_id&apos;.
  ls_postbody-value = ip_client_id.
  APPEND ls_postbody TO lt_postbody.

  ls_postbody-key = &apos;client_secret&apos;.
  ls_postbody-value = ip_client_secret.
  APPEND ls_postbody TO lt_postbody.

  ls_postbody-key = &apos;refresh_token&apos;.
  ls_postbody-value = ip_refresh_token.
  APPEND ls_postbody TO lt_postbody.

  ls_postbody-key = &apos;grant_type&apos;.
  ls_postbody-value = ip_grant_type.
  APPEND ls_postbody TO lt_postbody.

  FIND FIRST OCCURRENCE OF &apos;//&apos; IN me-&gt;pc_oauth2_token_uri MATCH OFFSET pos1.
  FIND FIRST OCCURRENCE OF &apos;/o/&apos; IN me-&gt;pc_oauth2_token_uri MATCH OFFSET pos2.
  len = pos2 - pos1 - 2.
  pos1 = pos1 + 2.
  lv_url2 = me-&gt;pc_oauth2_token_uri+pos1(len).
  len = strlen( me-&gt;pc_oauth2_token_uri ) - pos2.
  lv_url3 = me-&gt;pc_oauth2_token_uri+pos2(len).

  DATA lo_http_request TYPE REF TO zgoogle_http_request.
  CREATE OBJECT lo_http_request
    EXPORTING
      url      = lv_url3
      method   = &apos;POST&apos;
      postbody = lt_postbody.    &quot; ZGOOGLE_POSTBODY_T

  lo_http_request-&gt;setbasecomponent( ip_basepath = lv_url2 ).

  me-&gt;po_client-&gt;getclassconfig(
*       io_class = &apos;Google_Http_Request&apos;
   ip_key   =  &apos;disable_gzip&apos;
   ip_class = &apos;ZGOOGLE_HTTP_REQUEST&apos;
).
  READ TABLE lt_config INTO ls_config INDEX 1.
  IF ls_config-vvalue EQ &apos;X&apos;.
    lo_http_request-&gt;disablegzip( ).
  ENDIF.

*  lo_http_request-&gt;set_proxy( me-&gt;po_client-&gt;get_proxy( ) ).
  CALL METHOD me-&gt;po_client-&gt;get_proxy
    RECEIVING
      rv_value = lv_proxy.
  CALL METHOD lo_http_request-&gt;set_proxy
    EXPORTING
      ip_value = lv_proxy.

*  lo_http_request-&gt;set_proxy_port( me-&gt;po_client-&gt;get_proxy_port( ) ).
  CALL METHOD me-&gt;po_client-&gt;get_proxy_port
    RECEIVING
      rv_value = lv_proxy_port.
  CALL METHOD lo_http_request-&gt;set_proxy_port
    EXPORTING
      ip_value = lv_proxy_port.

*  me-&gt;po_client-&gt;getio( )-&gt;makerequest(
*    EXPORTING
*      ip_content_type  = zgoogle_io_generic=&gt;c_ctype_xwwwformurlencoded
*      io_http_request  = lo_http_request    &quot; google_http_request
*    IMPORTING
*      eo_http_response = lo_http_response    &quot; HTTP Framework (iHTTP) HTTP Response
*      ev_responsestr   = lv_body
*  ).
  CALL METHOD me-&gt;po_client-&gt;getio
    RECEIVING
      ro_io = lo_io.
  CALL METHOD lo_io-&gt;makerequest
    EXPORTING
      io_http_request  = lo_http_request    &quot; google_http_request
      ip_content_type  = zgoogle_io_generic=&gt;c_ctype_xwwwformurlencoded
    IMPORTING
      eo_http_response = lo_http_response    &quot; HTTP Framework (iHTTP) HTTP Response
      ev_responsestr   = lv_body.



  IF lo_http_response IS NOT INITIAL.
    lo_http_response-&gt;get_status( IMPORTING code = lv_code ).
    IF lv_code EQ 200.
      me-&gt;setaccesstoken( ip_json = lv_body ip_refresh = &apos;X&apos; ).
      me-&gt;ps_token-created = sy-uzeit.
*      rs_auth = me-&gt;ps_token.
    ENDIF.
  ENDIF.

ENDMETHOD.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SETACCESSTOKEN" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="9 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SETACCESSTOKEN" SCONAME="IP_JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SETACCESSTOKEN" SCONAME="IS_TOKEN" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_S" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_ACCESS" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SETACCESSTOKEN" SCONAME="IP_REFRESH" VERSION="1" LANGU="E" DESCRIPT="Boolean" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" PAROPTIONL="X"/>
   <source>method SETACCESSTOKEN.

    DATA lo_json TYPE REF TO zcl_json_document.
    TYPES: BEGIN OF s_data,
                error TYPE string,
                error_description TYPE string,
                access_token TYPE string,
                token_type TYPE string,
                expires_in TYPE i,
                refresh_token TYPE string,
                id_token TYPE string,
             END OF s_data.
    DATA ls_data TYPE s_data.

    IF ip_json IS SUPPLIED.
      zcl_json_document=&gt;create_with_json(
        EXPORTING
          json          = ip_json
*      date_format   =
        RECEIVING
          json_document = lo_json    &quot; JSON Document
      ).
      lo_json-&gt;get_data(
        IMPORTING
          data              = ls_data
      ).

      me-&gt;ps_token-expires_in = ls_data-expires_in.
      IF ip_refresh NE &apos;X&apos;.
        me-&gt;ps_token-refresh_token = ls_data-refresh_token.
      ENDIF.
      me-&gt;ps_token-value = ls_data-access_token.
      me-&gt;ps_token-created = sy-uzeit.
      me-&gt;ps_token-data = sy-datum.

*      CATCH zcx_json_document.    &quot;
    ELSE.
      me-&gt;ps_token-expires_in = is_token-expires_in.
      IF ip_refresh NE &apos;X&apos;.
        me-&gt;ps_token-refresh_token = is_token-refresh_token.
      ENDIF.
      me-&gt;ps_token-value = is_token-access_token.
      me-&gt;ps_token-created = is_token-created.
      me-&gt;ps_token-data = is_token-data.
    ENDIF.


endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SIGN" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SIGN" SCONAME="IO_HTTP_REQUEST" VERSION="1" LANGU="E" DESCRIPT="google_http_request" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_HTTP_REQUEST"/>
   <parameter CLSNAME="ZGOOGLE_AUTH_OAUTH2" CMPNAME="SIGN" SCONAME="RO_HTTP_REQUEST" VERSION="1" LANGU="E" DESCRIPT="google_http_request" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_HTTP_REQUEST"/>
   <source>method SIGN.

    DATA lt_result TYPE zgoogle_kcv_t.
    DATA ls_result TYPE zgoogle_kcv_s.
    DATA lv_devkey TYPE string.
    DATA lv_value TYPE string.
    DATA lv_key TYPE string value &apos;Authorization&apos;.

    ro_http_request = io_http_request.

    lt_result = me-&gt;po_client-&gt;getclassconfig(
       io_class = me
       ip_key   = &apos;developer_key&apos;
*       ip_class =
   ).

    READ TABLE lt_result INTO ls_result INDEX 1.

    IF ls_result-vvalue IS NOT INITIAL.
      ro_http_request-&gt;setqueryparam( ip_key = &apos;key&apos; ip_value = ls_result-vvalue ).   &quot;ATU
    ENDIF.

*   Cannot sign the request without an OAuth access token.
    IF me-&gt;ps_token IS INITIAL AND me-&gt;pv_assertioncredentials IS INITIAL. &quot;ATU
      RETURN.
    ENDIF.

*    Check if the token is set to expire in the next 30 seconds
*    (or has already expired).
    IF me-&gt;isaccesstokenexpired( ) EQ &apos;X&apos;.
      IF me-&gt;pv_assertioncredentials IS NOT INITIAL.
*        $this-&gt;refreshTokenWithAssertion(); -----------&gt; TODO
      ELSE.
        IF me-&gt;ps_token-refresh_token IS INITIAL.
*            throw new Google_Auth_Exception(
*                &quot;The OAuth 2.0 access token has expired,&quot;
*                .&quot; and a refresh token is not available. Refresh tokens&quot;
*                .&quot; are not returned for responses that were auto-approved.&quot;
*            );
        ENDIF.
        me-&gt;refreshtoken( me-&gt;ps_token-refresh_token ).
      ENDIF.
    ENDIF.

*   Add the OAuth2 header to the request
    CONCATENATE &apos;Bearer &apos; me-&gt;ps_token-value INTO lv_value RESPECTING BLANKS.
    ro_http_request-&gt;setrequestheaders( EXPORTING ip_key = lv_key
                                                  ip_value = lv_value ).


endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_CONFIG" VERSION="1" LANGU="E" DESCRIPT="google_config" UUID="024C9CBAD63F1ED3BC8F0A147AB28BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_CONFIG definition
  public
  create public .

public section.

  type-pools ABAP .
  constants GZIP_DISABLED type ZGOOGLE_BOOL value ABAP_TRUE. &quot;#EC NOTEXT
  constants GZIP_ENABLED type ZGOOGLE_BOOL value ABAP_FALSE. &quot;#EC NOTEXT
  constants GZIP_UPLOADS_ENABLED type ZGOOGLE_BOOL value ABAP_TRUE. &quot;#EC NOTEXT
  constants ZIP_UPLOADS_DISABLED type ZGOOGLE_BOOL value ABAP_FALSE. &quot;#EC NOTEXT
  constants USE_AUTO_IO_SELECTION type STRING value &apos;auto&apos;. &quot;#EC NOTEXT

  methods CONSTRUCTOR .
  methods GETCLASSCONFIG
    importing
      value(IP_CLASS) type STRING
      value(IP_KEY) type STRING
    returning
      value(ET_CONFIG) type ZGOOGLE_KCV_T .
  methods GETCACHECLASS
    returning
      value(EP_VALUE) type STRING .
  methods GETAUTHCLASS
    returning
      value(EP_VALUE) type STRING .
  methods GETIOCLASS
    returning
      value(EP_VALUE) type STRING .
  methods GETAPPLICATIONNAME
    returning
      value(EP_VALUE) type STRING .
  methods GETBASEPATH
    returning
      value(EP_VALUE) type STRING .
  methods SETCLASSCONFIG
    importing
      value(IP_CLASS) type STRING
      value(IT_CONFIG) type ZGOOGLE_KCV_T
      value(IP_VALUE) type STRING .
  methods SETAUTHCLASS
    importing
      value(IP_CLASS) type STRING .
  methods SETIOCLASS
    importing
      value(IP_CLASS) type STRING .
  methods SETCACHECLASS
    importing
      value(IP_CLASS) type STRING .
  methods SETAPPLICATIONNAME
    importing
      value(IP_VALUE) type STRING .
  methods SETCLIENTID
    importing
      value(IP_VALUE) type STRING .
  methods SETREDIRECTURI
    importing
      value(IP_VALUE) type STRING .
  methods SETREQUESTVISIBLEACTIONS
    importing
      value(IP_VALUE) type STRING .
  methods SETACCESSTYPE
    importing
      value(IP_VALUE) type STRING .
  methods SETAPPROVALPROMPT
    importing
      value(IP_VALUE) type STRING .
  methods SETDEVELOPERKEY
    importing
      value(IP_VALUE) type STRING .
  methods SETAUTHCONFIG
    importing
      value(IP_KEY) type STRING
      value(IP_VALUE) type STRING .
  methods SETCLIENTSECRET
    importing
      value(IP_SECRET) type STRING .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.

  data CONFIGURATION type ZGOOGLE_KCV_T .</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <typeUsage CLSNAME="ZGOOGLE_CONFIG" TYPEGROUP="ABAP" VERSION="1" TPUTYPE="0" IMPLICIT="X"/>
  <forwardDeclaration>ABAP</forwardDeclaration>
  <attribute CLSNAME="ZGOOGLE_CONFIG" CMPNAME="CONFIGURATION" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_T" EXPOSURE="0" STATE="1" EDITORDER="6 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_KCV_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GZIP_DISABLED" VERSION="1" LANGU="E" DESCRIPT="Boolean" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="ABAP_TRUE" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GZIP_ENABLED" VERSION="1" LANGU="E" DESCRIPT="Boolean" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="ABAP_FALSE" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GZIP_UPLOADS_ENABLED" VERSION="1" LANGU="E" DESCRIPT="Boolean" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="ABAP_TRUE" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CONFIG" CMPNAME="USE_AUTO_IO_SELECTION" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;auto&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CONFIG" CMPNAME="ZIP_UPLOADS_DISABLED" VERSION="1" LANGU="E" DESCRIPT="Boolean" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="ABAP_FALSE" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method CONSTRUCTOR.

    DATA ls_configuration   TYPE zgoogle_kcv_s.

*   The application_name is included in the User-Agent HTTP header.
    ls_configuration-vkey = &apos;application_name&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

*   Which Authentication, Storage and HTTP IO classes to use.
    ls_configuration-vkey = &apos;auth_class&apos;.
    ls_configuration-vvalue = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    APPEND ls_configuration TO me-&gt;configuration.
    ls_configuration-vkey = &apos;io_class&apos;.
    ls_configuration-vvalue = me-&gt;use_auto_io_selection.
    APPEND ls_configuration TO me-&gt;configuration.
    ls_configuration-vkey = &apos;cache_class&apos;.
    ls_configuration-vvalue = &apos;google_cache_file&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

*   Don&apos;t change these unless you&apos;re working against a special development
*   or testing environment.
    ls_configuration-vkey = &apos;base_path&apos;.
    ls_configuration-vvalue = &apos;www.googleapis.com&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

*   Definition of class specific values, like file paths and so on.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;google_io_abstract&apos;.
    ls_configuration-vkey = &apos;request_timeout_seconds&apos;.
    ls_configuration-vvalue = &apos;100&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

*   Disable the use of gzip on calls if set to true. Defaults to false.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_HTTP_REQUEST&apos;.
    ls_configuration-vkey = &apos;disable_gzip&apos;.
    ls_configuration-vvalue = me-&gt;gzip_disabled.
    APPEND ls_configuration TO me-&gt;configuration.

*   We default gzip to disabled on uploads even if gzip is otherwise
*   enabled, due to some issues seen with small packet sizes for uploads.
*   Please test with this option before enabling gzip for uploads in
*   a production environment.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_HTTP_REQUEST&apos;.
    ls_configuration-vkey = &apos;enable_gzip_for_uploads&apos;.
    ls_configuration-vvalue = me-&gt;zip_uploads_disabled.
    APPEND ls_configuration TO me-&gt;configuration.


*   If you want to pass in OAuth 2.0 settings, they will need to be
*   structured like this.

*   Keys for OAuth 2.0 access, see the API console at
*   https://developers.google.com/console
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;client_id&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;client_secret&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;redirect_uri&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

*   Simple API access key, also from the API console. Ensure you get
*   a Server key, and not a Browser key.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;developer_key&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

*   Other parameters.
    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;access_type&apos;.
    ls_configuration-vvalue = &apos;offline&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;approval_prompt&apos;.
    ls_configuration-vvalue = &apos;force&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;request_visible_actions&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;ZGOOGLE_AUTH_OAUTH2&apos;.
    ls_configuration-vkey = &apos;federated_signon_certs_url&apos;.
    ls_configuration-vvalue = &apos;https://www.googleapis.com/oauth2/v1/certs&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

    ls_configuration-vcategory = &apos;classes&apos;.
    ls_configuration-vclass = &apos;google_cache_file&apos;.
    ls_configuration-vkey = &apos;directory&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.


*   Definition of service specific values like scopes, oauth token URLs,
*   etc. Example:
    ls_configuration-vcategory = &apos;services&apos;.
    ls_configuration-vvalue = &apos;&apos;.
    APPEND ls_configuration TO me-&gt;configuration.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETAPPLICATIONNAME" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETAPPLICATIONNAME" SCONAME="EP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETAPPLICATIONNAME.

* @return string the name of the application
    DATA: ls_configuration TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration INTO ls_configuration WITH KEY vkey = &apos;application_name&apos;.
    MOVE ls_configuration-vvalue TO ep_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETAUTHCLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETAUTHCLASS" SCONAME="EP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETAUTHCLASS.

* Return the configured Auth class.
* @return string
    DATA: ls_configuration TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration INTO ls_configuration WITH KEY vkey = &apos;auth_class&apos;.
    MOVE ls_configuration-vvalue TO ep_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETBASEPATH" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETBASEPATH" SCONAME="EP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETBASEPATH.

* @return string the base URL to use for API calls
    DATA: ls_configuration TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration INTO ls_configuration WITH KEY vkey = &apos;base_path&apos;.
    MOVE ls_configuration-vvalue TO ep_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETCACHECLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETCACHECLASS" SCONAME="EP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETCACHECLASS.

* Return the configured cache class.
* @return string
    DATA: ls_configuration TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration INTO ls_configuration WITH KEY vkey = &apos;cache_class&apos;.
    MOVE ls_configuration-vvalue TO ep_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETCLASSCONFIG" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETCLASSCONFIG" SCONAME="IP_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETCLASSCONFIG" SCONAME="IP_KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETCLASSCONFIG" SCONAME="ET_CONFIG" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_KCV_T"/>
   <source>method GETCLASSCONFIG.

    DATA: ls_configuration TYPE zgoogle_kcv_s.

    LOOP AT me-&gt;configuration INTO ls_configuration.
      IF ip_key IS INITIAL.
        IF ls_configuration-vcategory = &apos;classes&apos; AND ls_configuration-vclass = ip_class.
          APPEND ls_configuration TO et_config.
          CLEAR ls_configuration.
        ENDIF.
      ELSE.
        IF ls_configuration-vcategory = &apos;classes&apos; AND ls_configuration-vclass = ip_class
                                                  AND ls_configuration-vkey = ip_key.
          APPEND ls_configuration TO et_config.
          CLEAR ls_configuration.
        ENDIF.
      ENDIF.
    ENDLOOP.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETIOCLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="GETIOCLASS" SCONAME="EP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETIOCLASS.
* Return the configured IO class.
* @return string

    DATA: ls_configuration TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration INTO ls_configuration WITH KEY vkey = &apos;io_class&apos;.
    MOVE ls_configuration-vvalue TO ep_value.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETACCESSTYPE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="16 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETACCESSTYPE" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETACCESSTYPE.

* Set the the access type requested (offline or online.)
* @param $access string - the access type
    me-&gt;setauthconfig( ip_key = &apos;access_type&apos; ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAPPLICATIONNAME" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="12 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAPPLICATIONNAME" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETAPPLICATIONNAME.

* Set the application name, this is included in the User-Agent HTTP header.
* @param string $name

    DATA: ls_configuration TYPE zgoogle_kcv_s,
          lv_prev          TYPE string.

    FIELD-SYMBOLS: &lt;fs_configuration&gt; TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration ASSIGNING &lt;fs_configuration&gt; WITH KEY vkey = &apos;application_name&apos;.
    IF sy-subrc = 0.
      &lt;fs_configuration&gt;-vvalue = ip_value.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAPPROVALPROMPT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="17 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAPPROVALPROMPT" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETAPPROVALPROMPT.

* Set when to show the approval prompt (auto or force)
* @param $approval string - the approval request
    me-&gt;setauthconfig( ip_key = &apos;approval_prompt&apos; ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAUTHCLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="9 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAUTHCLASS" SCONAME="IP_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETAUTHCLASS.

* Set the auth class.
* @param $class the class name to set

    DATA: ls_configuration TYPE zgoogle_kcv_s,
          lv_prev          TYPE string.

    FIELD-SYMBOLS: &lt;fs_configuration&gt; TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration ASSIGNING &lt;fs_configuration&gt; WITH KEY vkey = &apos;auth_class&apos;.
    IF sy-subrc = 0.
      lv_prev = &lt;fs_configuration&gt;-vvalue.
      &lt;fs_configuration&gt;-vvalue = ip_class.

      READ TABLE me-&gt;configuration TRANSPORTING NO FIELDS WITH KEY vcategory = &apos;classes&apos; vclass = ip_class.
      IF sy-subrc NE 0.
        LOOP AT me-&gt;configuration ASSIGNING &lt;fs_configuration&gt;.
          IF &lt;fs_configuration&gt;-vcategory = &apos;classes&apos; AND &lt;fs_configuration&gt;-vclass = lv_prev.
            &lt;fs_configuration&gt;-vclass = ip_class.
          ENDIF.
        ENDLOOP.
      ENDIF.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAUTHCONFIG" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="19 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAUTHCONFIG" SCONAME="IP_KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETAUTHCONFIG" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETAUTHCONFIG.

    DATA: lv_class TYPE string.

    FIELD-SYMBOLS: &lt;fs_configuration&gt; TYPE zgoogle_kcv_s.

    lv_class = me-&gt;getauthclass( ).
    IF lv_class IS NOT INITIAL.
      READ TABLE me-&gt;configuration ASSIGNING &lt;fs_configuration&gt; WITH KEY vcategory = &apos;classes&apos;
                                                                         vclass    = lv_class
                                                                         vkey      = ip_key.
      IF sy-subrc = 0.
        &lt;fs_configuration&gt;-vvalue = ip_value.
      ENDIF.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCACHECLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="11 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCACHECLASS" SCONAME="IP_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETCACHECLASS.

* Set the IO class.
* @param $class the class name to set

    DATA: ls_configuration TYPE zgoogle_kcv_s,
          lv_prev          TYPE string.

    FIELD-SYMBOLS: &lt;fs_configuration&gt; TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration ASSIGNING &lt;fs_configuration&gt; WITH KEY vkey = &apos;cache_class&apos;.
    IF sy-subrc = 0.
      lv_prev = &lt;fs_configuration&gt;-vvalue.
      &lt;fs_configuration&gt;-vvalue = ip_class.

      READ TABLE me-&gt;configuration TRANSPORTING NO FIELDS WITH KEY vcategory = &apos;classes&apos; vclass = ip_class.
      IF sy-subrc NE 0.
        LOOP AT me-&gt;configuration ASSIGNING &lt;fs_configuration&gt;.
          IF &lt;fs_configuration&gt;-vcategory = &apos;classes&apos; AND &lt;fs_configuration&gt;-vclass = lv_prev.
            &lt;fs_configuration&gt;-vclass = ip_class.
          ENDIF.
        ENDLOOP.
      ENDIF.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLASSCONFIG" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="8 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLASSCONFIG" SCONAME="IP_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLASSCONFIG" SCONAME="IT_CONFIG" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_KCV_T"/>
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLASSCONFIG" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETCLASSCONFIG.

*    if (!is_array($config)) {
*      if (!isset($this-&gt;configuration[&apos;classes&apos;][$class])) {
*        $this-&gt;configuration[&apos;classes&apos;][$class] = array();
*      }
*      $this-&gt;configuration[&apos;classes&apos;][$class][$config] = $value;
*    } else {
*      $this-&gt;configuration[&apos;classes&apos;][$class] = $config;
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLIENTID" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="13 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLIENTID" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETCLIENTID.

* Set the client ID for the auth class.
* @param $key string - the API console client ID
    me-&gt;setauthconfig( ip_key = &apos;client_id&apos; ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLIENTSECRET" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="20 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETCLIENTSECRET" SCONAME="IP_SECRET" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETCLIENTSECRET.

    me-&gt;setauthconfig( ip_key = &apos;client_secret&apos; ip_value = ip_secret ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETDEVELOPERKEY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="18 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETDEVELOPERKEY" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETDEVELOPERKEY.

* Set the developer key for the auth class. Note that this is separate value
* from the client ID - if it looks like a URL, its a client ID!
* @param $key string - the API console developer key
    me-&gt;setauthconfig( ip_key = &apos;developer_key&apos; ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETIOCLASS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="10 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETIOCLASS" SCONAME="IP_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETIOCLASS.

* Set the IO class.
* @param $class the class name to set
    DATA: ls_configuration TYPE zgoogle_kcv_s,
         lv_prev          TYPE string.

    FIELD-SYMBOLS: &lt;fs_configuration&gt; TYPE zgoogle_kcv_s.
    READ TABLE me-&gt;configuration ASSIGNING &lt;fs_configuration&gt; WITH KEY vkey = &apos;io_class&apos;.
    IF sy-subrc = 0.
      lv_prev = &lt;fs_configuration&gt;-vvalue.
      &lt;fs_configuration&gt;-vvalue = ip_class.

      READ TABLE me-&gt;configuration TRANSPORTING NO FIELDS WITH KEY vcategory = &apos;classes&apos; vclass = ip_class.
      IF sy-subrc NE 0.
        LOOP AT me-&gt;configuration ASSIGNING &lt;fs_configuration&gt;.
          IF &lt;fs_configuration&gt;-vcategory = &apos;classes&apos; AND &lt;fs_configuration&gt;-vclass = lv_prev.
            &lt;fs_configuration&gt;-vclass = ip_class.
          ENDIF.
        ENDLOOP.
      ENDIF.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETREDIRECTURI" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="14 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETREDIRECTURI" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETREDIRECTURI.

* Set the redirect uri for the auth class. Note that if using the
* Javascript based sign in flow, this should be the string &apos;postmessage&apos;.
* @param $key string - the URI that users should be redirected to
    me-&gt;setauthconfig( ip_key = &apos;redirect_uri&apos; ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETREQUESTVISIBLEACTIONS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="15 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CONFIG" CMPNAME="SETREQUESTVISIBLEACTIONS" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETREQUESTVISIBLEACTIONS.

* Set the app activities for the auth class.
* @param $rva string a space separated list of app activity types
    me-&gt;setauthconfig( ip_key = &apos;request_visible_actions&apos; ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" UUID="024C9CBAD63F1ED3BC8F0A147AB26BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_CLIENT definition
  public
  create public .

public section.

  constants LIBVER type STRING value &apos;1.0.0-beta&apos;. &quot;#EC NOTEXT
  constants USER_AGENT_SUFFIX type STRING value &apos;google-api-ABAP-client/&apos;. &quot;#EC NOTEXT

  methods CONSTRUCTOR .
  methods SETAPPLICATIONNAME
    importing
      value(IP_VALUE) type STRING .
  methods SETDEVELOPERKEY
    importing
      value(IP_VALUE) type STRING .
  methods SHOULDDEFER
    returning
      value(RP_VALUE) type ZGOOGLE_BOOL .
  methods GETBASEPATH
    returning
      value(RP_VALUE) type STRING .
  methods GETAUTH
    returning
      value(RP_VALUE) type ref to OBJECT .
  methods GETCLASSCONFIG
    importing
      value(IO_CLASS) type ref to OBJECT optional
      value(IP_KEY) type STRING
      value(IP_CLASS) type STRING optional
    returning
      value(RT_VALUE) type ZGOOGLE_KCV_T .
  methods SETCLIENTID
    importing
      value(IP_CLIENTID) type STRING .
  methods SETCLIENTSECRET
    importing
      value(IP_CLIENTSECRET) type STRING .
  methods SETREDIRECTURI
    importing
      value(IP_REDIRECTURI) type STRING .
  methods GETACCESSTOKEN
    returning
      value(RS_TOKEN) type ZGOOGLE_TOKEN_S .
  methods CREATEAUTHURL
    returning
      value(RP_URL) type STRING .
  methods PREPARESCOPES
    returning
      value(RP_SCOPES) type STRING .
  methods ADDSCOPE
    importing
      value(IP_SCOPE) type STRING .
  methods AUTHENTICATE
    importing
      value(IP_CODE) type STRING optional
      value(IS_ACCESS) type ZGOOGLE_ACCESS optional
    returning
      value(RS_AUTH) type ZGOOGLE_TOKEN_S .
  methods GETIO
    returning
      value(RO_IO) type ref to ZGOOGLE_IO_GENERIC .
  methods EXECUTE
    importing
      value(IO_HTTP_REQUEST) type ref to ZGOOGLE_HTTP_REQUEST
      value(IP_CONTENT_TYPE) type ZGOOGLE_STRING
    returning
      value(ET_RETURN) type ZGOOGLE_STRING_T .
  methods GET_PROXY
    returning
      value(RV_VALUE) type STRING .
  methods GET_PROXY_PORT
    returning
      value(RV_VALUE) type STRING .
  methods SET_PROXY
    importing
      value(IP_VALUE) type STRING .
  methods SET_PROXY_PORT
    importing
      value(IP_VALUE) type STRING .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.

  data PV_DEFEREXECUTION type ZGOOGLE_BOOL .
  data PO_CONFIG type ref to ZGOOGLE_CONFIG .
  data PO_AUTH type ref to OBJECT .
  data PT_SCOPES type ZGOOGLE_SCOPES_T .
  data PV_AUTHENTICATED type ZGOOGLE_BOOL .
  data PO_IO type ref to ZGOOGLE_IO_GENERIC .
  data PV_PROXY type STRING .
  data PV_PROXY_PORT type STRING .</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="LIBVER" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;1.0.0-beta&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PO_AUTH" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="OBJECT" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PO_CONFIG" VERSION="1" LANGU="E" DESCRIPT="google_config" EXPOSURE="0" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_CONFIG" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PO_IO" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_IO_GENERIC" EXPOSURE="0" STATE="1" EDITORDER="6 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_IO_GENERIC" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PT_SCOPES" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_HTTP_PARAM_T" EXPOSURE="0" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_SCOPES_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PV_AUTHENTICATED" VERSION="1" LANGU="E" DESCRIPT="Boolean" EXPOSURE="0" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PV_DEFEREXECUTION" VERSION="1" LANGU="E" DESCRIPT="Boolean" EXPOSURE="0" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PV_PROXY" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="7 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PV_PROXY_PORT" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="8 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_CLIENT" CMPNAME="USER_AGENT_SUFFIX" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;google-api-ABAP-client/&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="ADDSCOPE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="14 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="ADDSCOPE" SCONAME="IP_SCOPE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method ADDSCOPE.

    DATA ls_scopes TYPE zgoogle_scopes_s.
    ls_scopes-value = ip_scope.
    APPEND ls_scopes to me-&gt;pt_scopes.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="AUTHENTICATE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="15 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="AUTHENTICATE" SCONAME="IP_CODE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="AUTHENTICATE" SCONAME="IS_ACCESS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_ACCESS" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_ACCESS" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="AUTHENTICATE" SCONAME="RS_AUTH" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_S" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_TOKEN_S"/>
   <source>method AUTHENTICATE.

    DATA lo_object TYPE REF TO object.
    DATA lo_desc TYPE REF TO cl_abap_typedescr.
    DATA lv_string TYPE string.
    DATA lo_auth TYPE REF TO zgoogle_auth_oauth2.

    me-&gt;pv_authenticated = &apos;X&apos;.
    lo_object = me-&gt;getauth( ).
    cl_abap_typedescr=&gt;describe_by_object_ref(
      EXPORTING
        p_object_ref         =   lo_object  &quot; Reference to described object
      RECEIVING
        p_descr_ref          =  lo_desc   &quot; Reference to description object
*        EXCEPTIONS
*          reference_is_initial = 1
*          others               = 2
    ).
    IF sy-subrc &lt;&gt; 0.
*       MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
*                  WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
    ENDIF.
    lv_string = lo_desc-&gt;get_relative_name( ).
    CASE lv_string.
      WHEN zgoogle_auth_oauth2=&gt;pc_name.
        lo_auth ?= lo_object.
    ENDCASE.

    IF ip_code IS SUPPLIED.
      rs_auth = lo_auth-&gt;authenticate( ip_code = ip_code ).
    else.
      rs_auth = lo_auth-&gt;authenticate( is_access = is_access ).
    ENDIF.


endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method CONSTRUCTOR.

    CREATE OBJECT po_config.

    IF me-&gt;po_config-&gt;getioclass( ) = zgoogle_config=&gt;use_auto_io_selection.
      me-&gt;po_config-&gt;setioclass(&apos;ZGOOGLE_IO_GENERIC&apos;).
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="CREATEAUTHURL" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="12 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="CREATEAUTHURL" SCONAME="RP_URL" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method CREATEAUTHURL.
    DATA lv_scopes TYPE string.
    DATA lo_object TYPE REF TO object.
    DATA lo_desc TYPE REF TO cl_abap_typedescr.
    DATA lv_string TYPE string.
    DATA lo_auth TYPE REF TO zgoogle_auth_oauth2.

    lv_scopes = me-&gt;preparescopes( ).
    lo_object = me-&gt;getauth( ).
    cl_abap_typedescr=&gt;describe_by_object_ref(
      EXPORTING
        p_object_ref         =   lo_object  &quot; Reference to described object
      RECEIVING
        p_descr_ref          =  lo_desc   &quot; Reference to description object
*        EXCEPTIONS
*          reference_is_initial = 1
*          others               = 2
    ).
    IF sy-subrc &lt;&gt; 0.
*       MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
*                  WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
    ENDIF.
    lv_string = lo_desc-&gt;get_relative_name( ).
    CASE lv_string.
      WHEN zgoogle_auth_oauth2=&gt;pc_name.
        lo_auth ?= lo_object.
    ENDCASE.

    rp_url = lo_auth-&gt;createauthurl( ip_scopes = lv_scopes ).
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="EXECUTE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="17 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="EXECUTE" SCONAME="IO_HTTP_REQUEST" VERSION="1" LANGU="E" DESCRIPT="google_http_request" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_HTTP_REQUEST"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="EXECUTE" SCONAME="IP_CONTENT_TYPE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_string" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="EXECUTE" SCONAME="ET_RETURN" VERSION="1" LANGU="E" DESCRIPT="String table" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING_T"/>
   <source>method EXECUTE.

  DATA lt_config TYPE zgoogle_kcv_t.
  DATA ls_config TYPE zgoogle_kcv_s.

  me-&gt;getclassconfig(
*       io_class = &apos;Google_Http_Request&apos;
   ip_key   =  &apos;disable_gzip&apos;
   ip_class = &apos;ZGOOGLE_HTTP_REQUEST&apos;
).
  READ TABLE lt_config INTO ls_config INDEX 1.
  IF ls_config-vvalue EQ &apos;X&apos;.
    io_http_request-&gt;disablegzip( ).
  ENDIF.
*      $request-&gt;maybeMoveParametersToBody();
  CALL METHOD ZGOOGLE_HTTP_REST=&gt;EXECUTE
    EXPORTING
      IO_HTTP_REQUEST = io_http_request
      IO_CLIENT       = me
      IP_CONTENT_TYPE = ip_content_type
    RECEIVING
      ET_RETURN       = et_return.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETACCESSTOKEN" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="11 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETACCESSTOKEN" SCONAME="RS_TOKEN" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_S" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_TOKEN_S"/>
   <source>method GETACCESSTOKEN.

    DATA lo_object type ref to object.
    DATA lo_desc TYPE REF TO cl_abap_typedescr.
    DATA lv_string TYPE string.
    DATA lo_auth TYPE REF TO zgoogle_auth_oauth2.

    lo_object = me-&gt;getauth( ).
    cl_abap_typedescr=&gt;describe_by_object_ref(
      EXPORTING
        p_object_ref         =   lo_object  &quot; Reference to described object
      RECEIVING
        p_descr_ref          =  lo_desc   &quot; Reference to description object
*        EXCEPTIONS
*          reference_is_initial = 1
*          others               = 2
    ).
    IF sy-subrc &lt;&gt; 0.
*       MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
*                  WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
    ENDIF.
    lv_string = lo_desc-&gt;get_relative_name( ).
    CASE lv_string.
      WHEN zgoogle_auth_oauth2=&gt;pc_name.
        lo_auth ?= lo_object.
    ENDCASE.

    rs_token = lo_auth-&gt;getAccessToken( ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETAUTH" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETAUTH" SCONAME="RP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="OBJECT"/>
   <source>method GETAUTH.

    DATA lv_name TYPE string.
    IF me-&gt;po_auth IS INITIAL.
      lv_name = me-&gt;po_config-&gt;getauthclass( ). &quot;google_auth_oauth2
      CREATE OBJECT me-&gt;po_auth TYPE (lv_name) EXPORTING io_client = me.
    ENDIF.
    rp_value = me-&gt;po_auth.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETBASEPATH" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETBASEPATH" SCONAME="RP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GETBASEPATH.

    rp_value = me-&gt;po_config-&gt;getbasepath( ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETCLASSCONFIG" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETCLASSCONFIG" SCONAME="IO_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="OBJECT" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETCLASSCONFIG" SCONAME="IP_KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETCLASSCONFIG" SCONAME="IP_CLASS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETCLASSCONFIG" SCONAME="RT_VALUE" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_KCV_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_KCV_T"/>
   <source>method GETCLASSCONFIG.

    DATA lv_class TYPE string.
    DATA lo_desc TYPE REF TO cl_abap_typedescr.

    IF ip_class IS INITIAL.
      cl_abap_typedescr=&gt;describe_by_object_ref(
        EXPORTING
          p_object_ref         =   io_class  &quot; Reference to described object
        RECEIVING
          p_descr_ref          =  lo_desc   &quot; Reference to description object
*        EXCEPTIONS
*          reference_is_initial = 1
*          others               = 2
      ).
      IF sy-subrc &lt;&gt; 0.
*       MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
*                  WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
      ENDIF.
      lv_class = lo_desc-&gt;get_relative_name( ).
    ELSE.
      lv_class = ip_class.
    ENDIF.

    rt_value = me-&gt;po_config-&gt;getclassconfig(
               ip_class  = lv_class
               ip_key    = ip_key
           ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETIO" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="16 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GETIO" SCONAME="RO_IO" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_IO_GENERIC" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_IO_GENERIC"/>
   <source>method GETIO.
    DATA lv_string TYPE string.

    IF me-&gt;po_io IS INITIAL.
      lv_string = me-&gt;po_config-&gt;getioclass( ).
      CREATE OBJECT me-&gt;po_io TYPE (lv_string).
    ENDIF.

    ro_io = me-&gt;po_io.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GET_PROXY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="18 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GET_PROXY" SCONAME="RV_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_PROXY.

    rv_value = me-&gt;pv_proxy.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GET_PROXY_PORT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="19 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="GET_PROXY_PORT" SCONAME="RV_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_PROXY_PORT.

    rv_value = me-&gt;pv_proxy_port.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PREPARESCOPES" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="13 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="PREPARESCOPES" SCONAME="RP_SCOPES" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method PREPARESCOPES.

    DATA ls_scopes TYPE zgoogle_scopes_s.

    LOOP AT me-&gt;pt_scopes INTO ls_scopes.
      IF sy-tabix NE 1.
        CONCATENATE rp_scopes ls_scopes-value INTO rp_scopes SEPARATED BY &apos;%20&apos;.
      ELSE.
        CONCATENATE rp_scopes ls_scopes-value INTO rp_scopes SEPARATED BY &apos;&apos;.
      ENDIF.
    ENDLOOP.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETAPPLICATIONNAME" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETAPPLICATIONNAME" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETAPPLICATIONNAME.

    po_config-&gt;setapplicationname( ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETCLIENTID" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="8 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETCLIENTID" SCONAME="IP_CLIENTID" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETCLIENTID.

    me-&gt;po_config-&gt;setclientid( ip_value = ip_clientid ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETCLIENTSECRET" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="9 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETCLIENTSECRET" SCONAME="IP_CLIENTSECRET" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETCLIENTSECRET.

    me-&gt;po_config-&gt;setclientsecret( ip_secret = ip_clientsecret ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETDEVELOPERKEY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETDEVELOPERKEY" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETDEVELOPERKEY.

    po_config-&gt;setdeveloperkey( ip_value = ip_value ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETREDIRECTURI" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="10 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SETREDIRECTURI" SCONAME="IP_REDIRECTURI" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SETREDIRECTURI.

    me-&gt;po_config-&gt;setredirecturi( ip_value = ip_redirecturi ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SET_PROXY" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="20 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SET_PROXY" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SET_PROXY.

    me-&gt;pv_proxy = ip_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SET_PROXY_PORT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="21 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SET_PROXY_PORT" SCONAME="IP_VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method SET_PROXY_PORT.

    me-&gt;pv_proxy_port = ip_value.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SHOULDDEFER" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_CLIENT" CMPNAME="SHOULDDEFER" SCONAME="RP_VALUE" VERSION="1" LANGU="E" DESCRIPT="Boolean" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_BOOL"/>
   <source>method SHOULDDEFER.

    rp_value = me-&gt;pv_deferexecution.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_SERVICE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service" UUID="024C9CBAD63F1ED3BC8F0A147AB24BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_SERVICE definition
  public
  create public .

public section.

  data VERSION type STRING .
  data SERVICEPATH type STRING .
  data SERVICENAME type STRING .
  data AVAILABLESCOPES type STRING .
  data RESOURCE type STRING .

  methods CONSTRUCTOR
    importing
      value(IO_CLIENT) type ref to ZGOOGLE_CLIENT .
  methods GETCLIENT
    returning
      value(RO_CLIENT) type ref to ZGOOGLE_CLIENT .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.

  data PO_CLIENT type ref to ZGOOGLE_CLIENT .</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_SERVICE" CMPNAME="AVAILABLESCOPES" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE" CMPNAME="PO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" EXPOSURE="0" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE" CMPNAME="RESOURCE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE" CMPNAME="SERVICENAME" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE" CMPNAME="SERVICEPATH" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE" CMPNAME="VERSION" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_SERVICE" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE" CMPNAME="CONSTRUCTOR" SCONAME="IO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT"/>
   <source>method CONSTRUCTOR.
    me-&gt;po_client = io_client.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE" CMPNAME="GETCLIENT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE" CMPNAME="GETCLIENT" SCONAME="RO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT"/>
   <source>method GETCLIENT.
    ro_client = me-&gt;po_client.
endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZCL_JSON_DOCUMENT" VERSION="1" LANGU="E" DESCRIPT="JSON Document" UUID="024C9CBAD63F1ED3BC8F09C909E14BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZCL_JSON_DOCUMENT definition
  public
  create public .

public section.
  type-pools ABAP .

  methods APPEND_DATA
    importing
      !DATA type ANY
      !IV_NAME type STRING .
  class-methods CREATE
    returning
      value(JSON_DOCUMENT) type ref to ZCL_JSON_DOCUMENT .
  class-methods CREATE_WITH_DATA
    importing
      !DATA type ANY
      !SUPPRESS_ITAB type BOOLEAN optional
      !IGNORE_BOOLEAN type BOOLEAN optional
      !DONT_ESCAPE_LTGT type BOOLEAN optional
      !NUMC_AS_NUMERIC type BOOLEAN optional
      !DATE_FORMAT type CHAR10 optional
    returning
      value(JSON_DOCUMENT) type ref to ZCL_JSON_DOCUMENT .
  class-methods CREATE_WITH_JSON
    importing
      !JSON type STRING
      !DATE_FORMAT type CHAR10 optional
    returning
      value(JSON_DOCUMENT) type ref to ZCL_JSON_DOCUMENT .
  methods DUMPS
    importing
      !JSON type STRING optional
      !CURRENT_INTEND type I optional
    exporting
      !RESULT type STRING_TABLE .
  methods GET_DATA
    importing
      !JSON type STRING optional
    exporting
      !DATA type ANY
    raising
      ZCX_JSON_DOCUMENT .
  methods GET_JSON
    returning
      value(JSON) type STRING .
  methods GET_JSON_LARGE
    exporting
      !JSON type STRING .
  methods GET_NEXT
    returning
      value(DATA_FOUND) type BOOLEAN .
  methods GET_VALUE
    importing
      !KEY type STRING
    returning
      value(VALUE) type STRING .
  methods GET_VALUE_INT
    importing
      !KEY type STRING
    returning
      value(VALUE) type I .
  class-methods GET_VERSION
    returning
      value(VERSION) type STRING .
  methods RESET_CURSOR .
  methods SET_DATA
    importing
      !DATA type ANY
      !SUPPRESS_ITAB type BOOLEAN optional
      !IGNORE_BOOLEAN type BOOLEAN optional
      !DONT_ESCAPE_LTGT type BOOLEAN optional
      !NUMC_AS_NUMERIC type BOOLEAN optional
      !DATE_FORMAT type CHAR10 optional .
  methods SET_DATE_FORMAT
    importing
      !DATE_FORMAT type CHAR10 .
  methods SET_NUMC_AS_NUMERIC
    importing
      !NUMC_AS_NUMERIC type BOOLEAN .
  methods SET_DONT_REPLACE_LINEBREAKS
    importing
      !DONT_REPLACE_LINEBREAKS type BOOLEAN .
  methods SET_DONT_ESCAPE_LTGT
    importing
      !DONT_ESCAPE_LTGT type BOOLEAN .
  methods SET_JSON
    importing
      !JSON type STRING
      !DATE_FORMAT type CHAR10 optional
      !DONT_REPLACE_LINEBREAKS type BOOLEAN optional .
  methods SET_NAMESPACE_CONVERSION
    importing
      !NAMESPACE_1_SLASH_REPLACE type C
      !NAMESPACE_2_SLASH_REPLACE type C .
  methods SET_SUPPRESS_ITAB
    importing
      !SUPPRESS_ITAB type BOOLEAN .
  methods SET_IGNORE_BOOLEAN
    importing
      !IGNORE_BOOLEAN type BOOLEAN .
  class-methods TRANSFORM_SIMPLE
    importing
      !ROOT_NAME type STRING default &apos;RESULT&apos;
      !JSON_IN type STRING optional
      !DATA_IN type ANY optional
      !LOWER_CASE type BOOLEAN optional
    exporting
      !JSON_OUT type STRING
      !DATA_OUT type ANY
    raising
      ZCX_JSON_DOCUMENT
      CX_XSLT_FORMAT_ERROR .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.

  constants CO_VERSION type STRING value &apos;0.2.24&apos;. &quot;#EC NOTEXT
  data JSON type STRING .
  data DATA type ZJSON_KEY_VALUE_T .
  data DATA_T type STRING_TABLE .
  data ARRAY_CURSOR type I .
  data SUPPRESS_ITAB type BOOLEAN .
  data IGNORE_BOOLEAN type BOOLEAN .
  data DONT_ESCAPE_LTGT type BOOLEAN .
  data NUMC_AS_NUMERIC type BOOLEAN .
  data DONT_REPLACE_LINEBREAKS type BOOLEAN .
  data DATE_FORMAT type CHAR10 .
  data NAMESPACE_REPLACE_PATTERN type STRING .
  data ESCAPE_NOT_NEEDED type BOOLEAN value ABAP_UNDEFINED. &quot;#EC NOTEXT .

  methods ADD_DATA
    importing
      !DATA type ANY .
  methods ADD_DATE
    importing
      !DATE type D .
  methods ADD_NUMBER
    importing
      !NUMBER type ANY .
  methods ADD_STRING
    importing
      !STRING type ANY .
  methods ADD_BOOLEAN
    importing
      !STRING type ANY .
  methods ADD_STRU
    importing
      !LINE type ANY .
  methods ADD_TABLE
    importing
      !TABLE type ANY TABLE .
  methods ADD_TIME
    importing
      !TIME type T .
  methods ADD_XSTRING
    importing
      !XSTRING type ANY .
  class-methods COPYRIGHT .
  methods ESCAPECHAR
    importing
      !JSON type STRING
      !OFFSET type I
    changing
      !MATCH_RESULT type MATCH_RESULT_TAB .
  methods FORMAT_DATE
    importing
      !DATE type D
    returning
      value(DATE_FORMATTED) type CHAR10 .
  class-methods GET_KERNEL_INFO
    exporting
      !RELEASE type I
      !PATCH type I .
  methods GET_OFFSET_CLOSE
    importing
      !JSON type STRING
      !OFFSET_OPEN type I default 0
    returning
      value(OFFSET_CLOSE) type I .
  methods GET_STRU
    changing
      !LINE type ANY
    raising
      ZCX_JSON_DOCUMENT .
  methods GET_TABLE
    changing
      !TABLE type ANY TABLE
    raising
      ZCX_JSON_DOCUMENT .
  methods PARSE
    importing
      !JSON type STRING optional .
  methods PARSE_ARRAY .
  methods PARSE_OBJECT .
  methods REPLACE_NAMESPACE
    changing
      !KEY type ABAP_COMPNAME .</privateSection>
  <localImplementation>*&quot;* local class implementation for public class
*&quot;* use this source file for the implementation part of
*&quot;* local helper classes
TYPES: BEGIN OF t_int,
         i TYPE i,
       END OF t_int,
       BEGIN OF t_packed,
         p TYPE p LENGTH 10 DECIMALS 2,
       END OF t_packed,
       BEGIN OF t_numc,
         nc TYPE n LENGTH 4,
       END OF t_numc,
       BEGIN OF t_string,
         s TYPE string,
       END OF t_string,
       BEGIN OF t_struc1,
         i   TYPE i,
         nc  TYPE n LENGTH 4,
         p   TYPE p LENGTH 10 DECIMALS 2,
         s   TYPE string,
         c1  TYPE c LENGTH 1,
         c20 TYPE c LENGTH 20,
         x   TYPE xstring,
         dr  TYPE REF TO data,
       END OF t_struc1,
       BEGIN OF t_date,
         d TYPE d,
       END OF t_date,
       BEGIN OF t_namespace,
         /cex/test TYPE string,
         test      TYPE string,
       END OF t_namespace.

*----------------------------------------------------------------------*
*       CLASS lcl_zjson DEFINITION
*----------------------------------------------------------------------*
CLASS lcl_zjson DEFINITION FINAL FOR TESTING &quot;#AU Risk_Level Harmless
.                                            &quot;#AU Duration   Short
*  DURATION SHORT          &quot;&gt;= 7.02
*  RISK LEVEL HARMLESS.    &quot;&gt;= 7.02

  PRIVATE SECTION.
    DATA: json_doc  TYPE REF TO zcl_json_document,
          json_doc2 TYPE REF TO zcl_json_document,
          json_str  TYPE string.

    METHODS: test_number              FOR TESTING
               RAISING
                zcx_json_document,
             test_string_number       FOR TESTING
               RAISING
                zcx_json_document,
             test_string_escape       FOR TESTING,
             test_string_number_struc FOR TESTING
               RAISING
                zcx_json_document,
             test_xstring             FOR TESTING
               RAISING
                zcx_json_document,
             test_dref                FOR TESTING
               RAISING
                zcx_json_document,
             test_number_struct       FOR TESTING
               RAISING
                zcx_json_document,
             test_append_data         FOR TESTING,
             test_string_table        FOR TESTING
               RAISING
                zcx_json_document,
             test_stru_table          FOR TESTING
               RAISING
                zcx_json_document,
             test_stru_table_named    FOR TESTING,
             test_parse_list_strings  FOR TESTING,
             test_parse_flat_object   FOR TESTING
               RAISING
                zcx_json_document,
             test_date_format         FOR TESTING,
             test_date_format_reverse FOR TESTING
               RAISING
                 zcx_json_document,
             test_namespace           FOR TESTING,
             test_boolean             FOR TESTING
               RAISING
                 zcx_json_document,
             test_transform_simple    FOR TESTING
               RAISING
                 zcx_json_document
                 cx_xslt_format_error.

ENDCLASS.                    &quot;lcl_zjson DEFINITION

*----------------------------------------------------------------------*
*       CLASS lcl_zjson IMPLEMENTATION
*----------------------------------------------------------------------*
CLASS lcl_zjson IMPLEMENTATION.

  METHOD test_number.
    DATA: tpacked  TYPE p LENGTH 10 DECIMALS 2,
          tpacked2 TYPE p LENGTH 10 DECIMALS 2,
          tfloat   TYPE f,
          tint     TYPE i,
          tint2    TYPE i,
          tnumc    TYPE n LENGTH 4,
          tnumc2   TYPE n LENGTH 4.

*   packed number
    tfloat = &apos;10.5&apos;.
    tpacked = tfloat.  &quot;conversion to packed
    json_doc = zcl_json_document=&gt;create_with_data( tpacked ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;10.50&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = tpacked2 ).
    cl_aunit_assert=&gt;assert_equals( exp = tpacked
                                    act = tpacked2 ).

*   packed negative
    tfloat = &apos;-999.55&apos;.
    tpacked = tfloat.  &quot;conversion to packed
    json_doc = zcl_json_document=&gt;create_with_data( tpacked ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;-999.55&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = tpacked2 ).
    cl_aunit_assert=&gt;assert_equals( exp = tpacked
                                    act = tpacked2 ).


*   integer
    tint = 10.
    json_doc = zcl_json_document=&gt;create_with_data( tint ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;10&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = tint2 ).
    cl_aunit_assert=&gt;assert_equals( exp = tint
                                    act = tint2 ).

*   numc
    tnumc = &apos;00010&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( tnumc ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;&quot;0010&quot;&apos;
                                    act = json_str ).

    json_doc = zcl_json_document=&gt;create_with_data(
               data             = tnumc
               numc_as_numeric  = abap_true
           ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;10&apos;
                                    act = json_str ).

    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = tnumc2 ).
    cl_aunit_assert=&gt;assert_equals( exp = tnumc
                                    act = tnumc2 ).

*   numc with just zeros
    tnumc = &apos;00000&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( tnumc ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;&quot;0000&quot;&apos;
                                    act = json_str ).

    json_doc = zcl_json_document=&gt;create_with_data(
               data             = tnumc
               numc_as_numeric  = abap_true
           ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;0&apos;
                                    act = json_str ).

    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = tnumc2 ).
    cl_aunit_assert=&gt;assert_equals( exp = tnumc
                                    act = tnumc2 ).

  ENDMETHOD.                    &quot;test_number


  METHOD test_string_number.
    DATA: t_str  TYPE string,
          t_str2 TYPE string.

    t_str = &apos;0010&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( t_str ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;&quot;0010&quot;&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = t_str2 ).
    cl_aunit_assert=&gt;assert_equals( exp = t_str
                                    act = t_str2 ).

  ENDMETHOD.                    &quot;test_string_number

  METHOD test_string_escape.

    DATA: BEGIN OF t_struc,
              abc TYPE string VALUE &apos;def:&quot;123}&apos;,
           END OF t_struc.
    DATA t_str TYPE string.

    json_doc = zcl_json_document=&gt;create_with_data( t_struc ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;abc&quot; :&quot;def:\&quot;123}&quot;}&apos;
                                    act = json_str ).

    json_doc = zcl_json_document=&gt;create_with_json( json_str ).
    t_str = json_doc-&gt;get_value( &apos;abc&apos; ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;def:\&quot;123}&apos;
                                    act = t_str ).

  ENDMETHOD.                    &quot;test_string_number


  METHOD test_string_number_struc.
    DATA: s_str  TYPE t_string,
          s_str2 TYPE t_string.

    s_str-s = &apos;0010&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( s_str ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;s&quot; :&quot;0010&quot;}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_str2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_str
                                    act = s_str2 ).
  ENDMETHOD.                    &quot;test_string_number_struc


  METHOD test_string_table.
    DATA: str     TYPE string,
          strtab  TYPE TABLE OF string,
          strtab2 TYPE TABLE OF string.

    str = &apos;0010&apos;. APPEND str TO strtab.
    str = &apos;0020&apos;. APPEND str TO strtab.
    str = &apos;0030&apos;. APPEND str TO strtab.

    json_doc = zcl_json_document=&gt;create_with_data( data = strtab suppress_itab = &apos;X&apos; ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;[&quot;0010&quot;,&quot;0020&quot;,&quot;0030&quot;]&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = strtab2 ).
    cl_aunit_assert=&gt;assert_equals( exp = strtab
                                    act = strtab2 ).

  ENDMETHOD.                    &quot;test_string_table


  METHOD test_number_struct.
    DATA: tfloat    TYPE f,
          s_int     TYPE t_int,
          s_int2    TYPE t_int,
          s_packed  TYPE t_packed,
          s_packed2 TYPE t_packed,
          s_numc    TYPE t_numc,
          s_numc2   TYPE t_numc.

*   Integer
    s_int-i = 10.
    json_doc = zcl_json_document=&gt;create_with_data( s_int ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;i&quot; :10}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_int2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_int
                                    act = s_int2 ).

*   Packed number
    tfloat = &apos;10.5&apos;.
    s_packed-p = tfloat.  &quot;conversion
    json_doc = zcl_json_document=&gt;create_with_data( s_packed ).
    json_str = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;p&quot; :10.50}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_packed2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_packed
                                    act = s_packed2 ).

*   NUMC without leading zeros
    s_numc-nc = &apos;10&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( s_numc ).
    json_str = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;nc&quot; :&quot;0010&quot;}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_numc2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_numc
                                    act = s_numc2 ).

    json_doc = zcl_json_document=&gt;create_with_data(
               data             = s_numc
               numc_as_numeric  = abap_true
           ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;nc&quot; :10}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_numc2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_numc
                                    act = s_numc2 ).

*   NUMC with leading zeros
    s_numc-nc = &apos;0010&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( s_numc ).
    json_str = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;nc&quot; :&quot;0010&quot;}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_numc2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_numc
                                    act = s_numc2 ).

    json_doc = zcl_json_document=&gt;create_with_data(
               data             = s_numc
               numc_as_numeric  = abap_true
           ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;nc&quot; :10}&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = s_numc2 ).
    cl_aunit_assert=&gt;assert_equals( exp = s_numc
                                    act = s_numc2 ).

  ENDMETHOD.                    &quot;test_number_struct


  METHOD test_append_data.
    DATA: s_int     TYPE t_int,
          s_string  TYPE t_string.

    s_int-i = 10.
    s_string-s = &apos;abc&apos;.

    json_doc = zcl_json_document=&gt;create( ).
    json_doc-&gt;append_data( data = s_int iv_name = &apos;s_int&apos; ).
    json_doc-&gt;append_data( data = s_string iv_name = &apos;s_string&apos; ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals(
        exp = &apos;{&quot;s_int&quot;:{&quot;i&quot; :10}, &quot;s_string&quot;:{&quot;s&quot; :&quot;abc&quot;}}&apos;
        act = json_str ).

  ENDMETHOD.                    &quot;test_append_data

  METHOD test_stru_table.

    DATA: str     TYPE t_string,
          strtab  TYPE TABLE OF t_string,
          strtab2 TYPE TABLE OF t_string.

    str-s = &apos;0010&apos;. APPEND str TO strtab.
    str-s = &apos;00xx&apos;. APPEND str TO strtab.
    str-s = &apos;0030&apos;. APPEND str TO strtab.

    json_doc = zcl_json_document=&gt;create_with_data( data = strtab suppress_itab = &apos;X&apos; ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;[{&quot;s&quot; :&quot;0010&quot;},{&quot;s&quot; :&quot;00xx&quot;},{&quot;s&quot; :&quot;0030&quot;}]&apos;
                                    act = json_str ).
    json_doc2 = zcl_json_document=&gt;create_with_json( json_str ).
    json_doc2-&gt;get_data( IMPORTING data = strtab2 ).
    cl_aunit_assert=&gt;assert_equals( exp = strtab
                                    act = strtab2 ).

  ENDMETHOD.                    &quot;test_stru_table

  METHOD test_stru_table_named.

    DATA: str     TYPE t_string,
          strtab  TYPE TABLE OF t_string,
          strtab2 TYPE TABLE OF t_string.

    str-s = &apos;0010&apos;. APPEND str TO strtab.
    str-s = &apos;00xx&apos;. APPEND str TO strtab.
    str-s = &apos;0030&apos;. APPEND str TO strtab.

    json_doc = zcl_json_document=&gt;create( ).
    json_doc-&gt;append_data( data = strtab
                           iv_name = &apos;dataname&apos; ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;dataname&quot;: [{&quot;s&quot; :&quot;0010&quot;},{&quot;s&quot; :&quot;00xx&quot;},{&quot;s&quot; :&quot;0030&quot;}]}&apos;
                                    act = json_str ).

  ENDMETHOD.                    &quot;test_stru_table_named

  METHOD test_parse_list_strings.
    DATA: json_input TYPE string,
          has_next   TYPE boolean.

    json_input = &apos;[&quot;value1&quot;,&quot;value2&quot;,&quot;value3&quot;]&apos;.
    json_doc = zcl_json_document=&gt;create_with_json( json_input ).
    json_doc-&gt;get_next( ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;value1&apos;
                                    act = json_str ).
    json_doc-&gt;get_next( ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;value2&apos;
                                    act = json_str ).
    json_doc-&gt;get_next( ).
    json_str = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;value3&apos;
                                    act = json_str ).
    has_next = json_doc-&gt;get_next( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;&apos;
                                    act = has_next ).
  ENDMETHOD.                    &quot;test_parse_list_strings

  METHOD test_parse_flat_object.
    DATA: json_input TYPE string,
          input_stru TYPE t_struc1,
          ref_stru TYPE t_struc1.

    json_input = &apos;{&quot;i&quot;:22,&quot;nc&quot;:20,&quot;c1&quot;:&quot;X&quot;,&quot;c20&quot;:&quot;test&quot;,&quot;s&quot;:&quot;string test&quot;,&quot;p&quot;:20.5}&apos;.
    ref_stru-i = 22.
    ref_stru-nc = 20.
    ref_stru-c1 = &apos;X&apos;.
    ref_stru-c20 = &apos;test&apos;.
    ref_stru-s = &apos;string test&apos;.
    ref_stru-p = &apos;20.5&apos;.

    json_doc = zcl_json_document=&gt;create_with_json( json_input ).
    json_doc-&gt;get_data( IMPORTING data = input_stru ).

    cl_aunit_assert=&gt;assert_equals( exp = ref_stru
                                    act = input_stru ).

    &quot;test starting from a structure and getting the structure in the end
    CLEAR input_stru.
    json_doc = zcl_json_document=&gt;create_with_data( ref_stru ).
    json_doc-&gt;get_data( IMPORTING data = input_stru ).

    cl_aunit_assert=&gt;assert_equals( exp = ref_stru
                                    act = input_stru ).

  ENDMETHOD.                    &quot;test_parse_flat_object

  METHOD test_date_format.

    DATA input_stru TYPE t_date.
    DATA ref_stru   TYPE t_date.
    DATA json       TYPE string.

    input_stru-d = &apos;20120927&apos;.
    json_doc = zcl_json_document=&gt;create( ).

    &quot;*--- test standard JSON date format ---*
    json_doc-&gt;set_data( input_stru ).
    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;d&quot; :&quot;20120927&quot;}&apos;
                                    act = json ).

    &quot;*--- test SUP date format ---*
    json_doc-&gt;set_data(
        data          = input_stru
        date_format   = &apos;YYYY-MM-DD&apos;
    ).

    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;d&quot; :&quot;2012-09-27&quot;}&apos;
                                    act = json ).

    &quot;*--- test world date format ---*
    json_doc-&gt;set_data(
        data          = input_stru
        date_format   = &apos;DD.MM.YYYY&apos;
    ).

    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;d&quot; :&quot;27.09.2012&quot;}&apos;
                                    act = json ).

    &quot;*--- test US date format ---*
    json_doc-&gt;set_data(
        data          = input_stru
        date_format   = &apos;MM/DD/YYYY&apos;
    ).

    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;d&quot; :&quot;09/27/2012&quot;}&apos;
                                    act = json ).

    &quot;*--- test short date format ---*
    json_doc-&gt;set_data(
        data          = input_stru
        date_format   = &apos;DDMMYY&apos;
    ).

    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;d&quot; :&quot;270912&quot;}&apos;
                                    act = json ).

  ENDMETHOD.                    &quot;test_date_format

  METHOD test_date_format_reverse.

    DATA input_stru TYPE t_date.
    DATA ref_stru   TYPE t_date.
    DATA json       TYPE string.

    input_stru-d = &apos;20120927&apos;.
    json_doc = zcl_json_document=&gt;create( ).

    &quot;*--- test standard JSON date format ---*
    json = &apos;{&quot;d&quot; :&quot;20120927&quot;}&apos;.
    json_doc-&gt;set_json( json ).

    json_doc-&gt;get_data(
      IMPORTING
        data = ref_stru
    ).

    cl_aunit_assert=&gt;assert_equals( exp = input_stru
                                    act = ref_stru ).

    &quot;*--- test SUP date format ---*
    json = &apos;{&quot;d&quot; :&quot;2012-09-27&quot;}&apos;.
    json_doc-&gt;set_json(
      EXPORTING
        json        = json
        date_format = &apos;YYYY-MM-DD&apos;
    ).

    json_doc-&gt;get_data(
      IMPORTING
        data = ref_stru
    ).

    cl_aunit_assert=&gt;assert_equals( exp = input_stru
                                    act = ref_stru ).

    &quot;*--- test world date format ---*
    json = &apos;{&quot;d&quot; :&quot;27.09.2012&quot;}&apos;.
    json_doc-&gt;set_json(
      EXPORTING
        json        = json
        date_format = &apos;DD.MM.YYYY&apos;
    ).

    json_doc-&gt;get_data(
      IMPORTING
        data = ref_stru
    ).

    cl_aunit_assert=&gt;assert_equals( exp = input_stru
                                    act = ref_stru ).

    &quot;*--- test US date format ---*
    json = &apos;{&quot;d&quot; :&quot;09/27/2012&quot;}&apos;.
    json_doc-&gt;set_json(
      EXPORTING
        json        = json
        date_format = &apos;MM/DD/YYYY&apos;
    ).

    json_doc-&gt;get_data(
      IMPORTING
        data = ref_stru
    ).

    cl_aunit_assert=&gt;assert_equals( exp = input_stru
                                    act = ref_stru ).


  ENDMETHOD.                    &quot;test_date_format_reverse

  METHOD test_namespace.

    DATA input_stru TYPE t_namespace.
    DATA json       TYPE string.

    input_stru-/cex/test = &apos;with namespace&apos;.
    input_stru-test = &apos;without namespace&apos;.

    json_doc = zcl_json_document=&gt;create( ).

    &quot;*--- regular namespace ---*
    json_doc-&gt;set_data( input_stru ).
    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;/cex/test&quot; :&quot;with namespace&quot;,&quot;test&quot; :&quot;without namespace&quot;}&apos;
                                    act = json ).

    &quot;*--- replace namespace ---*
    json_doc-&gt;set_namespace_conversion(
      EXPORTING
        namespace_1_slash_replace = &apos;&apos;
        namespace_2_slash_replace = &apos;_&apos;
    ).

    json_doc-&gt;set_data( input_stru ).
    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;cex_test&quot; :&quot;with namespace&quot;,&quot;test&quot; :&quot;without namespace&quot;}&apos;
                                    act = json ).

  ENDMETHOD.                    &quot;test_namespace


  METHOD test_xstring.

    DATA input_stru TYPE t_struc1.
    DATA ref_stru   TYPE t_struc1.
    DATA json       TYPE string.

    input_stru-x = &apos;00AABB&apos;.
    json_doc = zcl_json_document=&gt;create_with_data( input_stru ).

    json = json_doc-&gt;get_json( ).

    json_doc-&gt;set_json( json ).

    json_doc-&gt;get_data(
      IMPORTING
        data = ref_stru
    ).

    cl_aunit_assert=&gt;assert_equals( exp = input_stru
                                    act = ref_stru ).

  ENDMETHOD.                    &quot;test_xstring

  METHOD test_dref.

    DATA input_stru TYPE t_struc1.
    DATA ref_stru   TYPE t_struc1.
    DATA json       TYPE string.

    FIELD-SYMBOLS &lt;inp&gt; TYPE string.
    FIELD-SYMBOLS &lt;ref&gt; TYPE string.

    CREATE DATA input_stru-dr TYPE string.
    ASSIGN input_stru-dr-&gt;* TO &lt;inp&gt;.
    &lt;inp&gt; = &apos;Dref string&apos;.

    json_doc = zcl_json_document=&gt;create_with_data( input_stru ).

    json = json_doc-&gt;get_json( ).

    json_doc-&gt;set_json( json ).

    json_doc-&gt;get_data(
      IMPORTING
        data = ref_stru
    ).

    ASSIGN ref_stru-dr-&gt;* TO &lt;ref&gt;.

    cl_aunit_assert=&gt;assert_equals( exp = &lt;inp&gt;
                                    act = &lt;ref&gt; ).

  ENDMETHOD.                    &quot;test_dref

  METHOD test_boolean.

    DATA: BEGIN OF ls_test,
            yyy TYPE boolean,
            xxx TYPE boolean,
          END OF ls_test.

    DATA: ls_test_ref LIKE ls_test.
    DATA: json TYPE string.

    ls_test-xxx = abap_true.

    json_doc = zcl_json_document=&gt;create_with_data( ls_test ).
    json = json_doc-&gt;get_json( ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;yyy&quot; :false,&quot;xxx&quot; :true}&apos;
                                    act = json ).

    json_doc-&gt;get_data(
      EXPORTING
        json              = json
      IMPORTING
        data              = ls_test_ref
    ).

    cl_aunit_assert=&gt;assert_equals( exp = ls_test
                                    act = ls_test_ref ).

    json_doc = zcl_json_document=&gt;create_with_data(
                     data             = ls_test
                     ignore_boolean   = abap_true
                 ).

    json = json_doc-&gt;get_json( ).
    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;yyy&quot; :&quot;&quot;,&quot;xxx&quot; :&quot;X&quot;}&apos;
                                    act = json ).

  ENDMETHOD.


  METHOD test_transform_simple.

    DATA: BEGIN OF ls_test,
           yyy TYPE string,
           xxx TYPE n LENGTH 3,
         END OF ls_test.

    DATA: ls_test_ref LIKE ls_test.
    DATA: json TYPE string.

    ls_test-yyy = &apos;Field 1&apos;.
    ls_test-xxx = &apos;123&apos;.

    zcl_json_document=&gt;transform_simple(
      EXPORTING
        data_in              = ls_test
      IMPORTING
        json_out             = json
    ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;RESULT&quot;:{&quot;YYY&quot;:&quot;Field 1&quot;,&quot;XXX&quot;:&quot;123&quot;}}&apos;
                                    act = json ).

    zcl_json_document=&gt;transform_simple(
      EXPORTING
        json_in              = json
      IMPORTING
        data_out             = ls_test_ref
    ).

    cl_aunit_assert=&gt;assert_equals( exp = ls_test
                                    act = ls_test_ref ).

    zcl_json_document=&gt;transform_simple(
      EXPORTING
        data_in              = ls_test
        lower_case           = abap_true
      IMPORTING
        json_out             = json
    ).

    cl_aunit_assert=&gt;assert_equals( exp = &apos;{&quot;result&quot;:{&quot;yyy&quot;:&quot;Field 1&quot;,&quot;xxx&quot;:&quot;123&quot;}}&apos;
                                    act = json ).

    CLEAR ls_test_ref.

    zcl_json_document=&gt;transform_simple(
      EXPORTING
        json_in              = json
        lower_case           = abap_true
      IMPORTING
        data_out             = ls_test_ref
    ).

    cl_aunit_assert=&gt;assert_equals( exp = ls_test
                                    act = ls_test_ref ).

  ENDMETHOD.

ENDCLASS.                    &quot;lcl_zjson IMPLEMENTATION</localImplementation>
  <localTypes>*&quot;* use this source file for any type declarations (class
*&quot;* definitions, interfaces or data types) you need for method
*&quot;* implementation or private method&apos;s signature</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <typeUsage CLSNAME="ZCL_JSON_DOCUMENT" TYPEGROUP="ABAP" VERSION="1" TPUTYPE="0" EXPLICIT="X"/>
  <forwardDeclaration>ABAP</forwardDeclaration>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ARRAY_CURSOR" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="I" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CO_VERSION" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;0.2.24&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DATA" VERSION="1" LANGU="E" DESCRIPT="JSON Key/Value pairs (hashed)" EXPOSURE="0" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZJSON_KEY_VALUE_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DATA_T" VERSION="1" LANGU="E" DESCRIPT="Table of Strings" EXPOSURE="0" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING_TABLE" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DATE_FORMAT" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="11 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="CHAR10" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DONT_ESCAPE_LTGT" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="8 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="BOOLEAN" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DONT_REPLACE_LINEBREAKS" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="10 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="BOOLEAN" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ESCAPE_NOT_NEEDED" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="13 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTVALUE="ABAP_UNDEFINED" ATTEXPVIRT="0" TYPTYPE="1" TYPE="BOOLEAN" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="IGNORE_BOOLEAN" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="7 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="BOOLEAN" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="JSON" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="NAMESPACE_REPLACE_PATTERN" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="12 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="NUMC_AS_NUMERIC" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="9 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="BOOLEAN" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SUPPRESS_ITAB" VERSION="1" LANGU="E" DESCRIPT='no output of &quot;itab:[...]&quot;, just the table' EXPOSURE="0" STATE="1" EDITORDER="6 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="BOOLEAN" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_BOOLEAN" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_BOOLEAN" SCONAME="STRING" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <source>method ADD_BOOLEAN.

    IF string = abap_true.
      CONCATENATE
        json
        &apos;true&apos;
      INTO json.
    ELSE.
      CONCATENATE
        json
        &apos;false&apos;
      INTO json.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_DATA" VERSION="1" LANGU="E" DESCRIPT="Add unknown data" EXPOSURE="0" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_DATA" SCONAME="DATA" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <source>method ADD_DATA.

    DATA: data_descr TYPE REF TO cl_abap_datadescr.

    data_descr ?= cl_abap_typedescr=&gt;describe_by_data( data ).

    CASE data_descr-&gt;type_kind.
      WHEN data_descr-&gt;typekind_table.       &quot;table

        add_table( data ).

      WHEN data_descr-&gt;typekind_struct1     &quot;flat strcuture
      OR   data_descr-&gt;typekind_struct2.     &quot;deep strcuture

        add_stru( data ).

      WHEN data_descr-&gt;typekind_char
      OR   data_descr-&gt;typekind_string
      OR   data_descr-&gt;typekind_clike
      OR   data_descr-&gt;typekind_csequence.

        IF data_descr-&gt;absolute_name = &apos;\TYPE=BOOLEAN&apos;
        AND me-&gt;ignore_boolean IS INITIAL.
          add_boolean( data ).
        ELSE.
          add_string( data ).
        ENDIF.

      WHEN data_descr-&gt;typekind_num.          &quot;charlike incl. NUMC.

        IF me-&gt;numc_as_numeric IS INITIAL.
          add_string( data ).
        ELSE.
          add_number( data ).
        ENDIF.

      WHEN data_descr-&gt;typekind_int
      OR   data_descr-&gt;typekind_int1
      OR   data_descr-&gt;typekind_int2
      OR   data_descr-&gt;typekind_packed.

        add_number( data ).

      WHEN data_descr-&gt;typekind_date.

        add_date( data ).

      WHEN data_descr-&gt;typekind_time.

        add_time( data ).

      WHEN data_descr-&gt;typekind_xstring.

        add_xstring( data ).

      WHEN data_descr-&gt;typekind_dref.
        FIELD-SYMBOLS &lt;any&gt; TYPE data.

        IF data IS BOUND.
          ASSIGN data-&gt;* TO &lt;any&gt;.
          add_data( &lt;any&gt; ).
        ELSE.
          add_string( `` ).
        ENDIF.

      WHEN data_descr-&gt;typekind_hex.      &quot;RAW (ie. GUID)

        DATA: str_data TYPE char512.
        TRY.
            WRITE data TO str_data.
            add_string( str_data ).
          CATCH cx_root.
            add_string( `` ).
        ENDTRY.

*    WHEN data_descr-&gt;typekind_float.
*    WHEN data_descr-&gt;typekind_w.
*    WHEN data_descr-&gt;typekind_oref.
*    WHEN data_descr-&gt;typekind_class.
*    WHEN data_descr-&gt;typekind_intf.
*    WHEN data_descr-&gt;typekind_any.
*    WHEN data_descr-&gt;typekind_data.
*    WHEN data_descr-&gt;typekind_simple.
*    WHEN data_descr-&gt;typekind_xsequence.
*    WHEN data_descr-&gt;typekind_numeric.
*    WHEN data_descr-&gt;typekind_table.
*    WHEN data_descr-&gt;typekind_iref.

*    WHEN OTHERS.

    ENDCASE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_DATE" VERSION="1" LANGU="E" DESCRIPT="Add date" EXPOSURE="0" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_DATE" SCONAME="DATE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="D"/>
   <source>method ADD_DATE.

    DATA: lv_date_c TYPE c LENGTH 10.

    lv_date_c = format_date( date ).

    CONCATENATE
      json
      &apos;&quot;&apos;
      lv_date_c
      &apos;&quot;&apos;
    INTO json.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_NUMBER" VERSION="1" LANGU="E" DESCRIPT="Add number (I/P)" EXPOSURE="0" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_NUMBER" SCONAME="NUMBER" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <source>method ADD_NUMBER.

    DATA: lv_num_c TYPE c LENGTH 30.

    lv_num_c = number.

    &quot;*--- sign on the left ---*
    IF lv_num_c CS &apos;-&apos;.
      SHIFT lv_num_c RIGHT UP TO &apos;-&apos;.
      SHIFT lv_num_c CIRCULAR RIGHT.
    ENDIF.

    &quot;*--- store NUMC without leading zero (sapcodexch #issue 17) ---*
    SHIFT lv_num_c LEFT DELETING LEADING &apos;0&apos;.

    &quot;*--- if all numbers are deleted, set lv_num_c to zero
    IF lv_num_c IS INITIAL.
      lv_num_c = &apos;0&apos;.
    ENDIF.

    CONDENSE lv_num_c NO-GAPS.

    CONCATENATE
      json
      lv_num_c
    INTO json.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_STRING" VERSION="1" LANGU="E" DESCRIPT="Add string" EXPOSURE="0" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_STRING" SCONAME="STRING" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <source>method ADD_STRING.

    DATA: lv_string TYPE string.

    &quot;*--- JSON conform conversion ---*
    &quot;*--- sapcodexch issue #4 ---*
    lv_string = string.   &quot;convert to string
    lv_string = cl_http_utility=&gt;if_http_utility~escape_javascript( lv_string ).

    &quot;*--- don&apos;t escape single quotes ---*
    &quot;*--- sapcodexch issue #11 ---*
    REPLACE ALL OCCURRENCES OF &apos;\&apos;&apos;&apos; IN lv_string WITH &apos;&apos;&apos;&apos;.

    &quot;*--- don&apos;t escape LT / GT ? ---*
    IF me-&gt;dont_escape_ltgt = abap_true.
      REPLACE ALL OCCURRENCES OF &apos;\x3c&apos; IN lv_string WITH &apos;&lt;&apos;.
      REPLACE ALL OCCURRENCES OF &apos;\x3e&apos; IN lv_string WITH &apos;&gt;&apos;.
    ENDIF.

    CONCATENATE
      json
      &apos;&quot;&apos;
      lv_string
      &apos;&quot;&apos;
    INTO json.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_STRU" VERSION="1" LANGU="E" DESCRIPT="Add structure" EXPOSURE="0" STATE="1" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_STRU" SCONAME="LINE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <source>method ADD_STRU.

    DATA: stru_descr   TYPE REF TO cl_abap_structdescr
        , lv_tabix     TYPE sy-tabix
        , comp_name    TYPE abap_compname
        .

    FIELD-SYMBOLS: &lt;value&gt; TYPE any
                 , &lt;component&gt; TYPE abap_compdescr
                 .

    DATA lv_parameter_id TYPE string.

    stru_descr ?= cl_abap_typedescr=&gt;describe_by_data( line ).

    CONCATENATE
      json
      &apos;{&apos;
    INTO json.

    LOOP AT stru_descr-&gt;components
      ASSIGNING &lt;component&gt;.

      lv_tabix = sy-tabix.

      ASSIGN COMPONENT &lt;component&gt;-name OF STRUCTURE line TO &lt;value&gt;.

      comp_name = &lt;component&gt;-name.
      TRANSLATE comp_name TO LOWER CASE.

      replace_namespace( CHANGING key = comp_name ).

      IF comp_name = &apos;parameter_id&apos;.
*      lv_parameter_id = |{ &lt;value&gt; }|.   &quot;&gt;= 7.02
        lv_parameter_id = &lt;value&gt;.                            &quot;&lt;= 7.01
      ELSEIF comp_name = &apos;data&apos;.
        comp_name = lv_parameter_id.
      ENDIF.

      CONCATENATE
        json
        &apos;&quot;&apos;
        comp_name
        &apos;&quot; :&apos;
      INTO json.

      add_data( &lt;value&gt; ).

      IF lv_tabix &lt;&gt; lines( stru_descr-&gt;components ).
        CONCATENATE
          json
          &apos;,&apos;
        INTO json.
      ENDIF.

    ENDLOOP.

    CONCATENATE
      json
      &apos;}&apos;
    INTO json.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_TABLE" VERSION="1" LANGU="E" DESCRIPT="Add table type" EXPOSURE="0" STATE="1" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_TABLE" SCONAME="TABLE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY TABLE"/>
   <source>method ADD_TABLE.

    DATA: lv_tabix TYPE sytabix.
    FIELD-SYMBOLS: &lt;line&gt; TYPE any.

    DATA lv_end TYPE boolean.

    IF strlen( json ) &gt; 3
    OR suppress_itab = abap_true. &quot;sapcodexch issue #13
      CONCATENATE
        json
        &apos; [&apos;
      INTO json.
    ELSE.
      lv_end = abap_true.
      CONCATENATE
        json
        &apos;{ &quot;itab&quot; : [&apos;
      INTO json.
    ENDIF.

    LOOP AT table
      ASSIGNING &lt;line&gt;.

      lv_tabix = sy-tabix.

      add_data( &lt;line&gt; ).

      IF lv_tabix &lt;&gt; lines( table ).
        CONCATENATE
          json
          &apos;,&apos;
        INTO json.
      ENDIF.

    ENDLOOP.

    IF lv_end = abap_true.
      CONCATENATE
        json
        &apos;] }&apos;
      INTO json.
    ELSE.
      CONCATENATE
        json
        &apos;]&apos;
      INTO json.
    ENDIF.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_TIME" VERSION="1" LANGU="E" DESCRIPT="Add time" EXPOSURE="0" STATE="1" EDITORDER="8 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_TIME" SCONAME="TIME" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="T"/>
   <source>method ADD_TIME.

    DATA: lv_time_c TYPE c LENGTH 8.

    CONCATENATE
      time(2)
      &apos;:&apos;
      time+2(2)
      &apos;:&apos;
      time+4(2)
    INTO lv_time_c.

    CONCATENATE
      json
      &apos;&quot;&apos;
      lv_time_c
      &apos;&quot;&apos;
    INTO json.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_XSTRING" VERSION="1" LANGU="E" DESCRIPT="Add binary string" EXPOSURE="0" STATE="1" EDITORDER="9 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ADD_XSTRING" SCONAME="XSTRING" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <source>method ADD_XSTRING.

    DATA: lv_string TYPE string.

*  lv_string = cl_http_utility=&gt;encode_x_base64( xstring ) .  &quot;&gt;= 7.02

    &quot;*--- &lt;= 7.01 ---*
    DATA: c_last_error TYPE i.
    DATA: ihttp_scid_base64_escape_x TYPE i VALUE 86.

    SYSTEM-CALL ict
      DID
        ihttp_scid_base64_escape_x
      PARAMETERS
        xstring                            &quot; &gt;
        lv_string                          &quot; &lt;
        c_last_error.                      &quot; &lt; return code

    CONCATENATE
      json
      &apos;&quot;&apos;
      lv_string
      &apos;&quot;&apos;
    INTO json.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="APPEND_DATA" VERSION="1" LANGU="E" DESCRIPT="Set document data (ABAP data)" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="APPEND_DATA" SCONAME="DATA" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="APPEND_DATA" SCONAME="IV_NAME" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <source>method APPEND_DATA.

    IF json IS INITIAL.
*    json =  | &quot;{ iv_name }&quot;:|.                             &quot;&gt;= 7.02

      CONCATENATE                                             &quot;&lt;= 7.01
        &apos;&quot;&apos;
        iv_name
        &apos;&quot;:&apos;
      INTO json.

    ELSE.
*    json = json &amp;&amp; |, &quot;{ iv_name }&quot;:|.                     &quot;&gt;= 7.02

      CONCATENATE                                             &quot;&lt;= 7.01
        json
        &apos;, &quot;&apos;
        iv_name
        &apos;&quot;:&apos;
      INTO json.

    ENDIF.

    add_data( data ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="COPYRIGHT" VERSION="1" LANGU="E" DESCRIPT="Readme: Copyright" EXPOSURE="0" STATE="1" EDITORDER="10 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method COPYRIGHT.

*--------------------------------------------------------------------*
*
* The JSON document class
* Copyright (C) 2010 Uwe Fetzer
*
* Project home: https://github.com/se38/zJSON
*
* Published under Apache License, Version 2.0
* http://www.apache.org/licenses/LICENSE-2.0.html
*
*--------------------------------------------------------------------*

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE" VERSION="1" LANGU="E" DESCRIPT="Create new document" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE" SCONAME="JSON_DOCUMENT" VERSION="1" LANGU="E" DESCRIPT="JSON Document" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="ZCL_JSON_DOCUMENT"/>
   <source>method CREATE.

    CREATE OBJECT json_document.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" VERSION="1" LANGU="E" DESCRIPT="Create new document (with ABAP data)" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="DATA" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="SUPPRESS_ITAB" VERSION="1" LANGU="E" DESCRIPT='no output of &quot;itab:[...]&quot;, just the table' CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="IGNORE_BOOLEAN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="DONT_ESCAPE_LTGT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="NUMC_AS_NUMERIC" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="DATE_FORMAT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="CHAR10" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_DATA" SCONAME="JSON_DOCUMENT" VERSION="1" LANGU="E" DESCRIPT="JSON Document" CMPTYPE="1" MTDTYPE="0" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="ZCL_JSON_DOCUMENT"/>
   <source>method CREATE_WITH_DATA.

    CREATE OBJECT json_document.
    json_document-&gt;set_data(
      data             = data
      suppress_itab    = suppress_itab
      ignore_boolean   = ignore_boolean
      dont_escape_ltgt = dont_escape_ltgt
      numc_as_numeric  = numc_as_numeric
      date_format      = date_format
      ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_JSON" VERSION="1" LANGU="E" DESCRIPT="Create new document (with JSON)" EXPOSURE="2" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_JSON" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_JSON" SCONAME="DATE_FORMAT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="CHAR10" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="CREATE_WITH_JSON" SCONAME="JSON_DOCUMENT" VERSION="1" LANGU="E" DESCRIPT="JSON Document" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="3" TYPE="ZCL_JSON_DOCUMENT"/>
   <source>method CREATE_WITH_JSON.

    CREATE OBJECT json_document.
    json_document-&gt;set_json(
      EXPORTING
        json        = json
        date_format = date_format
    ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DUMPS" VERSION="1" LANGU="E" DESCRIPT="format JSON output" EXPOSURE="2" STATE="1" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DUMPS" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DUMPS" SCONAME="CURRENT_INTEND" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="I" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="DUMPS" SCONAME="RESULT" VERSION="1" LANGU="E" DESCRIPT="Table of Strings" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING_TABLE"/>
   <source>method DUMPS.

    DATA: json_doc   TYPE REF TO zcl_json_document
        , json_tmp   TYPE string
        , data_tmp   TYPE zjson_key_value_t
        , data_t_tmp TYPE string_table
        , intend     TYPE i
        , tabix      TYPE sytabix
        , dump       TYPE string_table
        , lines      TYPE i
        .

    FIELD-SYMBOLS: &lt;data_line&gt;   TYPE zjson_key_value
                 , &lt;data_t_line&gt; TYPE string
                 , &lt;result_line&gt; TYPE string
                 .

    IF json IS NOT INITIAL.
      json_tmp = json.
    ELSE.
      json_tmp = me-&gt;json.
    ENDIF.

    SHIFT json_tmp LEFT DELETING LEADING space.
    me-&gt;json = json_tmp.

    intend = current_intend.

    CASE json_tmp(1).
      WHEN &apos;{&apos;.
        parse_object( ).

        INSERT INITIAL LINE INTO TABLE result ASSIGNING &lt;result_line&gt;.
        DO intend TIMES.
*          &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; ` `.
          CONCATENATE
            &lt;result_line&gt;
            ` `
          INTO &lt;result_line&gt; RESPECTING BLANKS.
        ENDDO.
*        &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; `{`.
        CONCATENATE
          &lt;result_line&gt;
          `{`
        INTO &lt;result_line&gt;.
        ADD 4 TO intend.

        CLEAR tabix.

        data_tmp = me-&gt;data.

        LOOP AT data_tmp
          ASSIGNING &lt;data_line&gt;.

          ADD 1 TO tabix.          &quot;sy-tabix doesn&apos;t work here

          INSERT INITIAL LINE INTO TABLE result ASSIGNING &lt;result_line&gt;.
          DO intend TIMES.
*            &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; ` `.
            CONCATENATE
              &lt;result_line&gt;
              ` `
            INTO &lt;result_line&gt; RESPECTING BLANKS.
          ENDDO.

*          &lt;result_line&gt; = |{ &lt;result_line&gt; }&quot;{ &lt;data_line&gt;-key }&quot; : |.
          CONCATENATE
            &lt;result_line&gt;
            `&quot;`
            &lt;data_line&gt;-key
            `&quot; :`
          INTO &lt;result_line&gt;.

          IF &lt;data_line&gt;-value IS INITIAL.

*            &lt;result_line&gt; = |{ &lt;result_line&gt; }&quot;&quot;|.
            CONCATENATE
              &lt;result_line&gt;
              `&quot;&quot;`
            INTO &lt;result_line&gt;.

          ELSEIF &lt;data_line&gt;-value(1) CN &apos;{[&apos;.

            IF &lt;data_line&gt;-value CO &apos;0123456789.&apos;
            AND &lt;data_line&gt;-value(1) &lt;&gt; &apos;0&apos;.        &quot;no leading zero (else asume a string)
*              &lt;result_line&gt; = |{ &lt;result_line&gt; }{ &lt;data_line&gt;-value }|.
              CONCATENATE
                &lt;result_line&gt;
                &lt;data_line&gt;-value
              INTO &lt;result_line&gt;.
            ELSE.
*              &lt;result_line&gt; = |{ &lt;result_line&gt; }&quot;{ &lt;data_line&gt;-value }&quot;|.
              CONCATENATE
                &lt;result_line&gt;
                `&quot;`
                &lt;data_line&gt;-value
                `&quot;`
              INTO &lt;result_line&gt;.
            ENDIF.

          ELSE.
            CLEAR dump.
            json_doc = zcl_json_document=&gt;create_with_json( &lt;data_line&gt;-value ).
            json_doc-&gt;dumps( EXPORTING current_intend = intend
                             IMPORTING result = dump ).
            INSERT LINES OF dump INTO TABLE result.
            lines = lines( result ).
            READ TABLE result INDEX lines ASSIGNING &lt;result_line&gt;.

          ENDIF.

          IF tabix &lt; lines( data_tmp ).
*            &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; `,`.
            CONCATENATE
              &lt;result_line&gt;
              `,`
            INTO &lt;result_line&gt;.
          ENDIF.

        ENDLOOP.

        SUBTRACT 4 FROM intend.
        INSERT INITIAL LINE INTO TABLE result ASSIGNING &lt;result_line&gt;.
        DO intend TIMES.
*          &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; ` `.
          CONCATENATE
            &lt;result_line&gt;
            ` `
          INTO &lt;result_line&gt; RESPECTING BLANKS.
        ENDDO.
*        &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; `}`.
        CONCATENATE
          &lt;result_line&gt;
          `}`
        INTO &lt;result_line&gt;.

      WHEN &apos;[&apos;.
        parse_array( ).

        INSERT INITIAL LINE INTO TABLE result ASSIGNING &lt;result_line&gt;.
        DO intend TIMES.
*          &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; ` `.
          CONCATENATE
            &lt;result_line&gt;
            ` `
          INTO &lt;result_line&gt; RESPECTING BLANKS.
        ENDDO.
*        &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; `[`.
        CONCATENATE
          &lt;result_line&gt;
          `[`
        INTO &lt;result_line&gt;.
        ADD 4 TO intend.

        CLEAR tabix.

        data_t_tmp = me-&gt;data_t.

        LOOP AT data_t_tmp
          ASSIGNING &lt;data_t_line&gt;.

          ADD 1 TO tabix.          &quot;sy-tabix doesn&apos;t work here

          IF &lt;data_t_line&gt;(1) CN &apos;{[&apos;.
            INSERT INITIAL LINE INTO TABLE result ASSIGNING &lt;result_line&gt;.
            DO intend TIMES.
*              &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; ` `.
              CONCATENATE
                &lt;result_line&gt;
                ` `
              INTO &lt;result_line&gt; RESPECTING BLANKS.
            ENDDO.

*            &lt;result_line&gt; = |{ &lt;result_line&gt; }&quot;{ &lt;data_t_line&gt; }&quot;|.
            CONCATENATE
              &lt;result_line&gt;
              `&quot;`
              &lt;data_t_line&gt;
              `&quot;`
            INTO &lt;result_line&gt;.
          ELSE.
            CLEAR dump.
            json_doc = zcl_json_document=&gt;create_with_json( &lt;data_t_line&gt; ).
            json_doc-&gt;dumps( EXPORTING current_intend = intend
                             IMPORTING result = dump ).
            INSERT LINES OF dump INTO TABLE result.
            lines = lines( result ).
            READ TABLE result INDEX lines ASSIGNING &lt;result_line&gt;.
          ENDIF.
          IF tabix &lt; lines( data_t_tmp ).
*            &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; `,`.
            CONCATENATE
              &lt;result_line&gt;
              `,`
            INTO &lt;result_line&gt;.
          ENDIF.

        ENDLOOP.

        SUBTRACT 4 FROM intend.
        INSERT INITIAL LINE INTO TABLE result ASSIGNING &lt;result_line&gt;.
        DO intend TIMES.
*          &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; ` `.
          CONCATENATE
            &lt;result_line&gt;
            ` `
          INTO &lt;result_line&gt; RESPECTING BLANKS.
        ENDDO.
*        &lt;result_line&gt; = &lt;result_line&gt; &amp;&amp; `]`.
        CONCATENATE
          &lt;result_line&gt;
          `]`
        INTO &lt;result_line&gt;.

    ENDCASE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ESCAPECHAR" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="11 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ESCAPECHAR" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ESCAPECHAR" SCONAME="OFFSET" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="I"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="ESCAPECHAR" SCONAME="MATCH_RESULT" VERSION="1" LANGU="E" DESCRIPT="Tabelle von Suchergebnissen" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="2" PARPASSTYP="1" TYPTYPE="1" TYPE="MATCH_RESULT_TAB"/>
   <source>method ESCAPECHAR.

    DATA lv_tab TYPE LINE OF match_result_tab.
    DATA lv_len TYPE i.
    DATA lt_result_tabguillemet TYPE match_result_tab.
    DATA lv_result_tabguillemet TYPE LINE OF match_result_tab.
    DATA lv_pos_echap TYPE i.
    DATA lv_count TYPE i.
    DATA lv_parite TYPE p DECIMALS 1.

    CONSTANTS : c_echap TYPE c VALUE &apos;\&apos;.

    IF escape_not_needed = abap_true.
      RETURN.
    ENDIF.

    IF escape_not_needed = abap_undefined.
      IF json CS c_echap.       &quot;escape needed
        escape_not_needed = abap_false.
      ELSE.
        escape_not_needed = abap_true.
        RETURN.
      ENDIF.
    ENDIF.

    LOOP AT match_result INTO lv_tab.
      FIND ALL OCCURRENCES OF &apos;&quot;&apos; IN json+offset(lv_tab-offset) RESULTS lt_result_tabguillemet.
      CLEAR lv_count.
      LOOP AT lt_result_tabguillemet INTO lv_result_tabguillemet WHERE offset LT lv_tab-offset.
        lv_pos_echap = offset + lv_result_tabguillemet-offset - 1.
        CHECK json+lv_pos_echap(1) NE c_echap.
        lv_count = lv_count + 1.
      ENDLOOP.
      lv_parite = frac( lv_count / 2 ).
      CHECK lv_parite IS NOT INITIAL.
      DELETE match_result.
    ENDLOOP.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="FORMAT_DATE" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="12 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="FORMAT_DATE" SCONAME="DATE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="D"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="FORMAT_DATE" SCONAME="DATE_FORMATTED" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="CHAR10"/>
   <source>method FORMAT_DATE.

    DATA: i   TYPE i,
          fmt TYPE c LENGTH 10.

    IF date_format IS INITIAL.
      date_formatted = date.

    ELSE.

      fmt = date_format.

      IF fmt CS &apos;YYYY&apos;.
        WRITE date(4) TO date_formatted+sy-fdpos(4).
      ELSEIF fmt CS &apos;YY&apos;.
        WRITE date+2(2) TO date_formatted+sy-fdpos(2).
      ENDIF.
      IF fmt CS &apos;MM&apos;.
        WRITE date+4(2) TO date_formatted+sy-fdpos(2).
      ENDIF.
      IF fmt CS &apos;DD&apos;.
        WRITE date+6(2) TO date_formatted+sy-fdpos(2).
      ENDIF.

* delimiter
      i = 0.
      WHILE NOT fmt IS INITIAL.
        IF fmt(1) NA &apos;YMD&apos;.
          WRITE fmt(1) TO date_formatted+i(1).
        ENDIF.
        SHIFT fmt LEFT.
        i = i + 1.
      ENDWHILE.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_DATA" VERSION="1" LANGU="E" DESCRIPT="Get document data (ABAP data)" EXPOSURE="2" STATE="1" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" MTDNEWEXC="X" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_DATA" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_DATA" SCONAME="DATA" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <exception CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_DATA" SCONAME="ZCX_JSON_DOCUMENT" VERSION="1" LANGU="E" DESCRIPT="JSON Document Class Exceptions" MTDTYPE="0" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
   <source>method GET_DATA.

    DATA: data_descr  TYPE REF TO cl_abap_datadescr.
    DATA: lr_json_doc TYPE REF TO zcl_json_document.
    DATA: lv_json     TYPE string.
    DATA: tmp         TYPE c LENGTH 10.
    DATA: tmp_s       TYPE string.
    DATA: lv_submatch TYPE string.
    DATA: lv_len      TYPE i.

    DATA: lr_cx_root    TYPE REF TO cx_root.
    DATA: lv_error_text TYPE string.
    DATA: lv_type_kind  TYPE string.

    IF json IS NOT INITIAL.
      lv_json = json.
    ELSE.
      lv_json = me-&gt;json.
    ENDIF.

    CLEAR data.

    &quot;*--- create new JSON document (recursive!) ---*
    lr_json_doc = zcl_json_document=&gt;create_with_json(
        json          = lv_json
        date_format   = me-&gt;date_format
    ).

    data_descr ?= cl_abap_typedescr=&gt;describe_by_data( data ).

    CASE data_descr-&gt;type_kind.

      WHEN data_descr-&gt;typekind_char         &quot;charlike
      OR   data_descr-&gt;typekind_string
      OR   data_descr-&gt;typekind_clike
      OR   data_descr-&gt;typekind_csequence.

        lr_json_doc-&gt;get_json_large(
          IMPORTING
            json = tmp_s
        ).

        lv_len = data_descr-&gt;length / cl_abap_char_utilities=&gt;charsize.  &quot;length of field (unicode/non-unicode)

        IF  data_descr-&gt;type_kind = data_descr-&gt;typekind_char   &quot;character
        AND lv_len = 1.                                          &quot;length 1

          IF tmp_s = &apos;true&apos;.                                     &quot;-&gt; boolean
            data = abap_true.
          ELSEIF tmp_s = &apos;false&apos;.
            data = abap_false.
          ELSE.
            data = tmp_s.
          ENDIF.

        ELSE.
          data = tmp_s.
        ENDIF.

        &quot;*--- eliminate surrounding &quot; ---*
        FIND REGEX &apos;^&quot;(.{1,})&quot;&apos; IN data     &quot;get 1-n chars surrounded by quot.marks (sapcodexch issue #22)
          SUBMATCHES lv_submatch.

        IF sy-subrc = 0.
          data = lv_submatch.
        ENDIF.

        &quot;*--- unescape control character ---*
        REPLACE ALL OCCURRENCES OF &apos;\&quot;&apos; IN data WITH &apos;&quot;&apos;.
        REPLACE ALL OCCURRENCES OF &apos;\\&apos; IN data WITH &apos;\&apos;.
        REPLACE ALL OCCURRENCES OF &apos;\x3c&apos; IN data WITH &apos;&lt;&apos;.
        REPLACE ALL OCCURRENCES OF &apos;\x3e&apos; IN data WITH &apos;&gt;&apos;.

      WHEN data_descr-&gt;typekind_num          &quot;NUM + integer + packed (auto conversion)
      OR   data_descr-&gt;typekind_int
      OR   data_descr-&gt;typekind_int1
      OR   data_descr-&gt;typekind_int2
      OR   data_descr-&gt;typekind_packed
      OR   data_descr-&gt;typekind_hex.        &quot;RAW (ie. GUID)

        lr_json_doc-&gt;get_json_large(
          IMPORTING
            json = tmp_s
        ).

        TRY.
            data = tmp_s.

          CATCH cx_root INTO lr_cx_root.
            lv_error_text = lr_cx_root-&gt;get_text( ).
            lv_type_kind = data_descr-&gt;type_kind.

            RAISE EXCEPTION TYPE zcx_json_document
              EXPORTING
                textid       = zcx_json_document=&gt;conversation_error
                error_text   = lv_error_text
                type_kind    = lv_type_kind
                actual_value = lv_json.

        ENDTRY.

      WHEN data_descr-&gt;typekind_xstring.

        DATA lv_xstring TYPE xstring.

        lr_json_doc-&gt;get_json_large(
          IMPORTING
            json = tmp_s
        ).

*        data = cl_http_utility=&gt;decode_x_base64( tmp_s ) .  &quot;&gt;= 7.02

        &quot;*--- &lt;= 7.01 ---*
        DATA: c_last_error TYPE i.
        DATA: ihttp_scid_base64_unescape_x TYPE i VALUE 87.

        SYSTEM-CALL ict
          DID
            ihttp_scid_base64_unescape_x
          PARAMETERS
            tmp_s                            &quot; &gt;
            data                            &quot; &lt;
            c_last_error.                      &quot; &lt; return code

      WHEN data_descr-&gt;typekind_time.

        lr_json_doc-&gt;get_json_large(
          IMPORTING
            json = tmp_s
        ).

        REPLACE ALL OCCURRENCES OF &apos;:&apos; IN tmp_s WITH ``.
        data = tmp_s.

      WHEN data_descr-&gt;typekind_struct1     &quot;flat strcuture
      OR   data_descr-&gt;typekind_struct2.     &quot;deep strcuture

        lr_json_doc-&gt;get_stru( CHANGING line = data ).

      WHEN data_descr-&gt;typekind_table.       &quot;table

        lr_json_doc-&gt;get_table( CHANGING table = data ).

      WHEN data_descr-&gt;typekind_date.

        lr_json_doc-&gt;get_json_large(
          IMPORTING
            json = tmp_s
        ).

        tmp = tmp_s.

        IF date_format IS INITIAL.
          data = tmp.
        ELSE.
          IF date_format CS &apos;YYYY&apos;.
            DATA(4) = tmp+sy-fdpos(4).
          ELSE.
            FIND &apos;YY&apos; IN date_format.
            CONCATENATE
              &apos;20&apos;
              tmp+sy-fdpos(2)
            INTO DATA(4).
          ENDIF.

          IF date_format CS &apos;MM&apos;.
            data+4(2) = tmp+sy-fdpos(2).
          ENDIF.

          IF date_format CS &apos;DD&apos;.
            data+6(2) = tmp+sy-fdpos(2).
          ENDIF.

        ENDIF.

      WHEN data_descr-&gt;typekind_dref.

        &quot;*--- as we don&apos;t know the original data type, ---*
        &quot;*--- we always pass back a string dref        ---*
        &quot;*--- (function not really useful)             ---*
        FIELD-SYMBOLS &lt;f&gt; TYPE string.
        CREATE DATA data TYPE string.

        ASSIGN data-&gt;* TO &lt;f&gt;.

        lr_json_doc-&gt;get_json_large(
          IMPORTING
            json = &lt;f&gt;
        ).

        GET REFERENCE OF &lt;f&gt; INTO data.

*    WHEN data_descr-&gt;typekind_float.
*    WHEN data_descr-&gt;typekind_w.
*    WHEN data_descr-&gt;typekind_oref.
*    WHEN data_descr-&gt;typekind_class.
*    WHEN data_descr-&gt;typekind_intf.
*    WHEN data_descr-&gt;typekind_any.
*    WHEN data_descr-&gt;typekind_data.
*    WHEN data_descr-&gt;typekind_simple.
*    WHEN data_descr-&gt;typekind_xsequence.
*    WHEN data_descr-&gt;typekind_numeric.
*    WHEN data_descr-&gt;typekind_iref.

*    WHEN OTHERS.

    ENDCASE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_JSON" VERSION="1" LANGU="E" DESCRIPT="Get document data (JSON)" EXPOSURE="2" STATE="1" EDITORDER="7 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_JSON" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_JSON.

    get_json_large(
      IMPORTING
        json = json
    ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_JSON_LARGE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="8 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_JSON_LARGE" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_JSON_LARGE.

    IF me-&gt;json IS NOT INITIAL.

      IF  me-&gt;json+0(1) NE `{`
      AND me-&gt;json+0(1) NE `[`.    &quot;sapcodexch issue #7

        &quot;*--- key/value pair only (sapcodexch issue #3) ---*
        FIND REGEX &apos;&quot;*&quot;:&apos; IN me-&gt;json.
        IF sy-subrc = 0.
*        me-&gt;json = `{` &amp;&amp; `}` &amp;&amp; me-&gt;json .            &quot;&gt;= 7.02
          CONCATENATE &apos;{&apos; me-&gt;json &apos;}&apos; INTO me-&gt;json.             &quot;&lt;= 7.01
        ENDIF.
      ENDIF.

    ENDIF.

    json = me-&gt;json.

    SHIFT json LEFT DELETING LEADING space.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_KERNEL_INFO" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="13 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_KERNEL_INFO" SCONAME="RELEASE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="I"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_KERNEL_INFO" SCONAME="PATCH" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="I"/>
   <source>method GET_KERNEL_INFO.

    TYPES: BEGIN OF ts_kernel_version,
             key(21) TYPE c,
             data(69) TYPE c,
          END OF ts_kernel_version.

    DATA kernel_version TYPE STANDARD TABLE OF ts_kernel_version.
    FIELD-SYMBOLS &lt;ls_kernel_version&gt; TYPE ts_kernel_version.

    CALL &apos;SAPCORE&apos; ID &apos;ID&apos; FIELD &apos;VERSION&apos;
                   ID &apos;TABLE&apos; FIELD kernel_version.

    &quot;*--- get kernel release ---*
    READ TABLE kernel_version
      ASSIGNING &lt;ls_kernel_version&gt;
      INDEX 12.

    CHECK sy-subrc = 0.

    release = &lt;ls_kernel_version&gt;-data.

    &quot;*--- get patch level ---*
    READ TABLE kernel_version
      ASSIGNING &lt;ls_kernel_version&gt;
      INDEX 15.

    CHECK sy-subrc = 0.

    patch = &lt;ls_kernel_version&gt;-data.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_NEXT" VERSION="1" LANGU="E" DESCRIPT="Set cursor to next array entry" EXPOSURE="2" STATE="1" EDITORDER="9 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_NEXT" SCONAME="DATA_FOUND" VERSION="1" LANGU="E" DESCRIPT="Boolean Variable (X=True, -=False, Space=Unknown)" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="BOOLEAN"/>
   <source>method GET_NEXT.

    DATA lv_json   TYPE string.
    DATA lt_data   LIKE me-&gt;data_t.
    DATA lv_cursor LIKE me-&gt;array_cursor.

    ADD 1 TO me-&gt;array_cursor.

    &quot;*--- get next entry ---*
    READ TABLE me-&gt;data_t INDEX me-&gt;array_cursor INTO lv_json.

    IF sy-subrc = 0.
      lt_data = me-&gt;data_t.    &quot;save data_t (nasted for tables)    codexch issue #20
      lv_cursor = me-&gt;array_cursor.

      set_json( lv_json ).

      me-&gt;data_t = lt_data.    &quot;restore data_t (nasted for tables) codexch issue #20
      me-&gt;array_cursor = lv_cursor.

      data_found = abap_true.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_OFFSET_CLOSE" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="14 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_OFFSET_CLOSE" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_OFFSET_CLOSE" SCONAME="OFFSET_OPEN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="I" PARVALUE="0"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_OFFSET_CLOSE" SCONAME="OFFSET_CLOSE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="I"/>
   <source>method GET_OFFSET_CLOSE.

    DATA: lv_offset          TYPE i
        , lv_copen           TYPE c
        , lv_cclose          TYPE c
        , lv_pos_echap       TYPE i
        , lt_result_tabopen  TYPE match_result_tab
        , lt_result_tabclose TYPE match_result_tab
        , lv_offsetclose_old TYPE i
        .

    FIELD-SYMBOLS &lt;lv_result_tabclose&gt; TYPE LINE OF match_result_tab.
    FIELD-SYMBOLS &lt;lv_result_tabopen&gt;  TYPE LINE OF match_result_tab.

    CONSTANTS : c_echap TYPE c VALUE &apos;\&apos;.

    lv_copen = json+offset_open(1).
    CASE lv_copen.
      WHEN &apos;&quot;&apos;. lv_cclose = &apos;&quot;&apos;.
      WHEN &apos;{&apos;. lv_cclose = &apos;}&apos;.
      WHEN &apos;[&apos;. lv_cclose = &apos;]&apos;.
    ENDCASE.
    lv_offset = offset_open + 1.
    IF lv_copen EQ &apos;&quot;&apos;.
      FIND ALL OCCURRENCES OF lv_cclose IN json+lv_offset RESULTS lt_result_tabclose.

      LOOP AT lt_result_tabclose ASSIGNING &lt;lv_result_tabclose&gt;.
        lv_pos_echap = lv_offset + &lt;lv_result_tabclose&gt;-offset - 1.
        CHECK json+lv_pos_echap(1) NE c_echap.
        EXIT.
      ENDLOOP.
      offset_close = lv_offset + &lt;lv_result_tabclose&gt;-offset + 1. &quot;CBO due to change in the else statement
    ELSE.

      FIND ALL OCCURRENCES OF lv_copen IN json+lv_offset RESULTS lt_result_tabopen.

      escapechar(
        EXPORTING
          json = json
          offset = lv_offset
        CHANGING
          match_result = lt_result_tabopen
        ).

      FIND ALL OCCURRENCES OF lv_cclose IN json+lv_offset RESULTS lt_result_tabclose.

      escapechar(
        EXPORTING
          json = json
          offset = lv_offset
        CHANGING
          match_result = lt_result_tabclose
        ).

*   CHANGING CBO : We look to the first close where no open is set before
*                by removing each open corresponding of each close
      DATA lv_last_idx LIKE sy-tabix.
      LOOP AT lt_result_tabclose ASSIGNING &lt;lv_result_tabclose&gt;.
        lv_last_idx = -1.
        LOOP AT lt_result_tabopen ASSIGNING &lt;lv_result_tabopen&gt;
          WHERE offset BETWEEN 0 AND &lt;lv_result_tabclose&gt;-offset.
          lv_last_idx = sy-tabix.
        ENDLOOP.
        IF NOT lv_last_idx = -1 .
          DELETE lt_result_tabopen INDEX lv_last_idx.
        ELSE.
          offset_close = lv_offset + &lt;lv_result_tabclose&gt;-offset + 1.
          EXIT.
        ENDIF.
      ENDLOOP.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_STRU" VERSION="1" LANGU="E" DESCRIPT="Get structure" EXPOSURE="0" STATE="1" EDITORDER="15 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" MTDNEWEXC="X" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_STRU" SCONAME="LINE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="2" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <exception CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_STRU" SCONAME="ZCX_JSON_DOCUMENT" VERSION="1" LANGU="E" MTDTYPE="0" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
   <source>method GET_STRU.

    DATA: stru_descr   TYPE REF TO cl_abap_structdescr
        , comp_name    TYPE string
        , lv_json      TYPE string
        .

    FIELD-SYMBOLS: &lt;value&gt; TYPE any
                 , &lt;component&gt; TYPE abap_compdescr
                 .

    stru_descr ?= cl_abap_typedescr=&gt;describe_by_data( line ).

    LOOP AT stru_descr-&gt;components
      ASSIGNING &lt;component&gt;.

      ASSIGN COMPONENT &lt;component&gt;-name OF STRUCTURE line TO &lt;value&gt;.

      comp_name = &lt;component&gt;-name.
      TRANSLATE comp_name TO LOWER CASE.
      lv_json = me-&gt;get_value( comp_name ).

      CHECK lv_json IS NOT INITIAL.    &quot;value found?  &quot;sapcodexch issue #6

      &quot;*--- and again -&gt; recursive! ---*
      me-&gt;get_data(
        EXPORTING json = lv_json
        IMPORTING data = &lt;value&gt;
        ).

    ENDLOOP.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_TABLE" VERSION="1" LANGU="E" DESCRIPT="Get table" EXPOSURE="0" STATE="1" EDITORDER="16 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" MTDNEWEXC="X" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_TABLE" SCONAME="TABLE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="2" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY TABLE"/>
   <exception CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_TABLE" SCONAME="ZCX_JSON_DOCUMENT" VERSION="1" LANGU="E" MTDTYPE="0" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
   <source>method GET_TABLE.

    DATA: table_descr  TYPE REF TO cl_abap_tabledescr
        , data_descr   TYPE REF TO cl_abap_datadescr
        , stru_descr   TYPE REF TO cl_abap_structdescr
        , comp_name    TYPE string
        , lv_json      TYPE string
        .

    FIELD-SYMBOLS: &lt;value&gt; TYPE any
                 , &lt;line&gt;  TYPE any
                 , &lt;component&gt; TYPE abap_compdescr
                 .

    table_descr ?= cl_abap_typedescr=&gt;describe_by_data( table ).

    &quot;*--- currently only standard tables possible (no hashed/sorted) ---*
    CHECK table_descr-&gt;table_kind = table_descr-&gt;tablekind_std.

    data_descr ?= table_descr-&gt;get_table_line_type( ).

    &quot;*--- check structure or simple ---*
    IF data_descr-&gt;type_kind = data_descr-&gt;typekind_struct1     &quot;flat strcuture
    OR data_descr-&gt;type_kind = data_descr-&gt;typekind_struct2.    &quot;deep strcuture
      stru_descr ?= data_descr.
    ENDIF.

    WHILE me-&gt;get_next( ) IS NOT INITIAL.

      INSERT INITIAL LINE INTO TABLE table ASSIGNING &lt;line&gt;.

      IF stru_descr IS NOT BOUND.    &quot;table line is not a structure

        me-&gt;get_data(
          EXPORTING json = lv_json
          IMPORTING data = &lt;line&gt;
          ).

      ELSE.

        LOOP AT stru_descr-&gt;components
          ASSIGNING &lt;component&gt;.

          ASSIGN COMPONENT &lt;component&gt;-name OF STRUCTURE &lt;line&gt; TO &lt;value&gt;.

          comp_name = &lt;component&gt;-name.
          TRANSLATE comp_name TO LOWER CASE.
          CLEAR lv_json.
          lv_json = me-&gt;get_value( comp_name ).

          CHECK lv_json IS NOT INITIAL.    &quot;value found?  &quot;sapcodexch issue #6

          &quot;*--- and again -&gt; recursive! ---*
          me-&gt;get_data(
            EXPORTING json = lv_json
            IMPORTING data = &lt;value&gt;
            ).

        ENDLOOP.

      ENDIF.

    ENDWHILE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VALUE" VERSION="1" LANGU="E" DESCRIPT="get string value" EXPOSURE="2" STATE="1" EDITORDER="10 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VALUE" SCONAME="KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VALUE" SCONAME="VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_VALUE.

    FIELD-SYMBOLS: &lt;data&gt; TYPE zjson_key_value.

    READ TABLE me-&gt;data
      ASSIGNING &lt;data&gt;
      WITH TABLE KEY
        key = key.

    IF sy-subrc = 0.
      value = &lt;data&gt;-value.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VALUE_INT" VERSION="1" LANGU="E" DESCRIPT="get integer value" EXPOSURE="2" STATE="1" EDITORDER="11 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VALUE_INT" SCONAME="KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VALUE_INT" SCONAME="VALUE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="I"/>
   <source>method GET_VALUE_INT.

    DATA: lv_value_string TYPE string.
    FIELD-SYMBOLS: &lt;data&gt; TYPE zjson_key_value.

    READ TABLE me-&gt;data
      ASSIGNING &lt;data&gt;
      WITH TABLE KEY
      key = key.

    IF sy-subrc = 0.
      lv_value_string = &lt;data&gt;-value.
    ENDIF.

    IF lv_value_string CO &apos; 1234567890-&apos;.
      value = lv_value_string.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VERSION" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="12 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="GET_VERSION" SCONAME="VERSION" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method GET_VERSION.

    version = co_version.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="PARSE" VERSION="1" LANGU="E" DESCRIPT="Parse data" EXPOSURE="0" STATE="1" EDITORDER="17 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="PARSE" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <source>method PARSE.

    escape_not_needed = abap_undefined.

    &quot;*--- new data given ---*
    IF json IS NOT INITIAL.

      set_json( json ).

    ELSE.

      CHECK me-&gt;json IS NOT INITIAL.  &quot;Codexch issue #1 CX_SY_RANGE_OUT_OF_BOUNDS

      CASE me-&gt;json(1).
        WHEN &apos;[&apos;.
          parse_array( ).
        WHEN &apos;{&apos;.
          parse_object( ).
        WHEN OTHERS.
          RETURN.
      ENDCASE.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="PARSE_ARRAY" VERSION="1" LANGU="E" DESCRIPT="Parse JSON into object array" EXPOSURE="0" STATE="1" EDITORDER="18 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method PARSE_ARRAY.

    DATA: lv_json      TYPE string
        , lv_json_part TYPE string
        , lv_close     TYPE i
        , data         TYPE zjson_key_value_t
        .

    lv_json = me-&gt;json.

    CLEAR me-&gt;data_t.
    CLEAR me-&gt;array_cursor.

    REPLACE REGEX &apos;^\[&apos; IN lv_json WITH ``.   &quot;codexch issue #20
    REPLACE REGEX &apos;\]$&apos; IN lv_json WITH ``.   &quot;codexch issue #20

    SHIFT lv_json LEFT DELETING LEADING space. &quot;codexch issue #35

    WHILE NOT lv_json CO space.

      CASE lv_json(1).

        WHEN &apos;{&apos; OR &apos;[&apos;.          &quot;object or array

          lv_close = get_offset_close( lv_json ).

          &quot;*--- get object ---*
          lv_json_part = lv_json(lv_close).
          INSERT lv_json_part INTO TABLE me-&gt;data_t.

          lv_json = lv_json+lv_close.

        WHEN &apos;&quot;&apos;.          &quot;string

          lv_close = get_offset_close( lv_json ) - 2.  &quot;w/o &quot;

          &quot;*--- get object ---*
          IF lv_close &gt; 0.
            lv_json_part = lv_json+1(lv_close).
          ELSE.
            CLEAR lv_json_part.
          ENDIF.

          INSERT lv_json_part INTO TABLE me-&gt;data_t.

          ADD 2 TO lv_close.
          lv_json = lv_json+lv_close.

        WHEN OTHERS.       &quot;numbers, boolean, NULL

          SPLIT lv_json AT &apos;,&apos; INTO lv_json_part lv_json.
          SHIFT lv_json_part LEFT DELETING LEADING space.
          INSERT lv_json_part INTO TABLE me-&gt;data_t.

      ENDCASE.

      SHIFT lv_json LEFT DELETING LEADING space.
      SHIFT lv_json LEFT DELETING LEADING &apos;,&apos;.
      SHIFT lv_json LEFT DELETING LEADING space.

    ENDWHILE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="PARSE_OBJECT" VERSION="1" LANGU="E" DESCRIPT="Parse JSON string into key/value pair table" EXPOSURE="0" STATE="1" EDITORDER="19 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method PARSE_OBJECT.

    DATA: lv_json TYPE string
        , lv_close TYPE i
        , ls_key_value TYPE zjson_key_value
        .

    lv_json = me-&gt;json.
    CLEAR me-&gt;data.

    WHILE NOT lv_json CO &apos;{} &apos;.

      &quot;*--- get key ---*
      SHIFT lv_json LEFT UP TO &apos;&quot;&apos;.
      lv_close = get_offset_close( lv_json ).

      SUBTRACT 2 FROM lv_close.
      ls_key_value-key = lv_json+1(lv_close).
      TRANSLATE ls_key_value-key TO LOWER CASE.   &quot;sapcodexch ticket #5

      &quot;*--- get value ---*
      SHIFT lv_json LEFT UP TO &apos;:&apos;.
      SHIFT lv_json LEFT.
      SHIFT lv_json LEFT DELETING LEADING space.

      CASE lv_json(1).
        WHEN &apos;&quot;&apos;.
          lv_close = get_offset_close( lv_json ).
          SUBTRACT 2 FROM lv_close.
          ls_key_value-value = lv_json+1(lv_close).
          ADD 2 TO lv_close.
          lv_json = lv_json+lv_close.
        WHEN &apos;{&apos; OR &apos;[&apos;.
          lv_close = get_offset_close( lv_json ).
          ls_key_value-value = lv_json+0(lv_close).
          ADD 1 TO lv_close.
          lv_json = lv_json+lv_close.
        WHEN OTHERS.     &quot;boolean, numbers
          SPLIT lv_json AT &apos;,&apos; INTO ls_key_value-value lv_json.
          REPLACE &apos;}&apos; WITH `` INTO ls_key_value-value.   &quot;last one of the list
      ENDCASE.

      INSERT ls_key_value INTO TABLE me-&gt;data.
    ENDWHILE.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="REPLACE_NAMESPACE" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="20 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="REPLACE_NAMESPACE" SCONAME="KEY" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="2" PARPASSTYP="1" TYPTYPE="1" TYPE="ABAP_COMPNAME"/>
   <source>method REPLACE_NAMESPACE.

    DATA namespace TYPE string.

    CHECK namespace_replace_pattern IS NOT INITIAL.

*    REPLACE REGEX `/(\w+)/` IN cv_key WITH mv_namespace_replace_pattern.  &quot;&gt;= 7.31

    &quot;*--- &lt; 7.31 ---*
    FIND REGEX `/(\w+)/` IN key SUBMATCHES namespace.

    IF namespace IS NOT INITIAL.
      REPLACE REGEX `/(\w+)/` IN key WITH namespace_replace_pattern.
      REPLACE &apos;&amp;1&apos; IN key WITH namespace.
      CONDENSE key.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="RESET_CURSOR" VERSION="1" LANGU="E" DESCRIPT="Reset array loop cursor" EXPOSURE="2" STATE="1" EDITORDER="13 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method RESET_CURSOR.

    CLEAR me-&gt;array_cursor.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" VERSION="1" LANGU="E" DESCRIPT="Set document data (ABAP data)" EXPOSURE="2" STATE="1" EDITORDER="14 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" SCONAME="DATA" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" SCONAME="SUPPRESS_ITAB" VERSION="1" LANGU="E" DESCRIPT='no output of &quot;itab:[...]&quot;, just the table' CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" SCONAME="IGNORE_BOOLEAN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" SCONAME="DONT_ESCAPE_LTGT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" SCONAME="NUMC_AS_NUMERIC" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATA" SCONAME="DATE_FORMAT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="CHAR10" PAROPTIONL="X"/>
   <source>method SET_DATA.

    IF suppress_itab IS SUPPLIED.
      set_suppress_itab( suppress_itab ).
    ENDIF.

    IF ignore_boolean IS SUPPLIED.
      set_ignore_boolean( ignore_boolean ).
    ENDIF.

    IF dont_escape_ltgt IS SUPPLIED.
      set_dont_escape_ltgt( dont_escape_ltgt ).
    ENDIF.

    IF date_format IS SUPPLIED.
      set_date_format( date_format ).
    ENDIF.

    IF numc_as_numeric IS SUPPLIED.
      set_numc_as_numeric( numc_as_numeric ).
    ENDIF.

    CLEAR json.
    add_data( data ).

    parse( ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATE_FORMAT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="15 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DATE_FORMAT" SCONAME="DATE_FORMAT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="CHAR10"/>
   <source>method SET_DATE_FORMAT.

    me-&gt;date_format = date_format.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DONT_ESCAPE_LTGT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="18 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DONT_ESCAPE_LTGT" SCONAME="DONT_ESCAPE_LTGT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN"/>
   <source>method SET_DONT_ESCAPE_LTGT.

    me-&gt;dont_escape_ltgt = dont_escape_ltgt.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DONT_REPLACE_LINEBREAKS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="17 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_DONT_REPLACE_LINEBREAKS" SCONAME="DONT_REPLACE_LINEBREAKS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN"/>
   <source>method SET_DONT_REPLACE_LINEBREAKS.
    me-&gt;dont_replace_linebreaks = dont_replace_linebreaks.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_IGNORE_BOOLEAN" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="22 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_IGNORE_BOOLEAN" SCONAME="IGNORE_BOOLEAN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN"/>
   <source>method SET_IGNORE_BOOLEAN.

    me-&gt;ignore_boolean = ignore_boolean.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_JSON" VERSION="1" LANGU="E" DESCRIPT="Set document data (JSON)" EXPOSURE="2" STATE="1" EDITORDER="19 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_JSON" SCONAME="JSON" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_JSON" SCONAME="DATE_FORMAT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="CHAR10" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_JSON" SCONAME="DONT_REPLACE_LINEBREAKS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <source>method SET_JSON.

    IF date_format IS SUPPLIED.
      set_date_format( date_format ).
    ENDIF.

    IF dont_replace_linebreaks IS SUPPLIED.
      set_dont_replace_linebreaks( dont_replace_linebreaks ).
    ENDIF.

    me-&gt;json = json.

    IF me-&gt;dont_replace_linebreaks &lt;&gt; abap_true.
      &quot;*--- esp. for CouchDB ---*
      REPLACE ALL OCCURRENCES OF cl_abap_char_utilities=&gt;cr_lf IN me-&gt;json WITH ``.
      REPLACE ALL OCCURRENCES OF cl_abap_char_utilities=&gt;newline IN me-&gt;json WITH ``.
    ENDIF.

    SHIFT me-&gt;json LEFT DELETING LEADING space.

    parse( ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_NAMESPACE_CONVERSION" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="20 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_NAMESPACE_CONVERSION" SCONAME="NAMESPACE_1_SLASH_REPLACE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="C"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_NAMESPACE_CONVERSION" SCONAME="NAMESPACE_2_SLASH_REPLACE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="C"/>
   <source>method SET_NAMESPACE_CONVERSION.

    IF  namespace_1_slash_replace IS INITIAL
    AND namespace_2_slash_replace IS INITIAL.
      CLEAR namespace_replace_pattern.
    ELSE.
      CONCATENATE
        namespace_1_slash_replace
        &apos;&amp;1&apos;
        namespace_2_slash_replace
      INTO namespace_replace_pattern.
    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_NUMC_AS_NUMERIC" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="16 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_NUMC_AS_NUMERIC" SCONAME="NUMC_AS_NUMERIC" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN"/>
   <source>method SET_NUMC_AS_NUMERIC.
    me-&gt;numc_as_numeric = numc_as_numeric.
endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_SUPPRESS_ITAB" VERSION="1" LANGU="E" DESCRIPT='no output of &quot;itab:[...]&quot;, just the table' EXPOSURE="2" STATE="1" EDITORDER="21 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="SET_SUPPRESS_ITAB" SCONAME="SUPPRESS_ITAB" VERSION="1" LANGU="E" DESCRIPT='no output of &quot;itab:[...]&quot;, just the table' CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN"/>
   <source>method SET_SUPPRESS_ITAB.

    me-&gt;suppress_itab = suppress_itab.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="23 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="1" MTDNEWEXC="X" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="ROOT_NAME" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PARVALUE="&apos;RESULT&apos;"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="JSON_IN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="DATA_IN" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="LOWER_CASE" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="1" TYPE="BOOLEAN" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="JSON_OUT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="DATA_OUT" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="6 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="1" PARPASSTYP="1" TYPTYPE="1" TYPE="ANY"/>
   <exception CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="ZCX_JSON_DOCUMENT" VERSION="1" LANGU="E" MTDTYPE="0" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
   <exception CLSNAME="ZCL_JSON_DOCUMENT" CMPNAME="TRANSFORM_SIMPLE" SCONAME="CX_XSLT_FORMAT_ERROR" VERSION="1" LANGU="E" MTDTYPE="0" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
   <source>method TRANSFORM_SIMPLE.

    &quot;see http://scn.sap.com/people/horst.keller/blog/2013/01/07/abap-and-json
    &quot;see also SAP note 1648418

    &quot;*--- first check kernel version ---*
    DATA release TYPE i.
    DATA patch   TYPE i.

    get_kernel_info(
      IMPORTING
        release = release
        patch   = patch
        ).

    IF release &lt; 720
    OR release = 720 AND patch &lt; 116.
      RAISE EXCEPTION TYPE zcx_json_document
        EXPORTING
          textid = zcx_json_document=&gt;not_supported.
    ENDIF.

    &quot;*--- check whether current basis release supports JSON transformation ---*
    FIELD-SYMBOLS &lt;type&gt; TYPE if_sxml=&gt;xml_stream_type.

    ASSIGN (&apos;if_sxml=&gt;co_xt_json&apos;) TO &lt;type&gt;.

    IF &lt;type&gt; IS NOT ASSIGNED.
      RAISE EXCEPTION TYPE zcx_json_document
        EXPORTING
          textid = zcx_json_document=&gt;not_supported.
    ENDIF.

    &quot;*--- transform ---*
    DATA writer     TYPE REF TO if_sxml_writer.
    DATA writer_out TYPE REF TO cl_sxml_string_writer.
    DATA reader     TYPE REF TO if_sxml_reader.
    DATA jsonx      TYPE xstring.
    DATA conv_in    TYPE REF TO cl_abap_conv_in_ce.
    DATA param_t    TYPE abap_trans_srcbind_tab.
    DATA node       TYPE REF TO if_sxml_node.
    DATA node_el    TYPE REF TO if_sxml_open_element.
    DATA att        TYPE if_sxml_attribute=&gt;attributes.
    DATA varname    TYPE string.

    FIELD-SYMBOLS &lt;param&gt; LIKE LINE OF param_t.
    FIELD-SYMBOLS &lt;att&gt;   TYPE REF TO if_sxml_attribute.

    IF json_in IS NOT INITIAL.

      INSERT INITIAL LINE INTO TABLE param_t ASSIGNING &lt;param&gt;.
      &lt;param&gt;-name = root_name.
      GET REFERENCE OF data_out INTO &lt;param&gt;-value.

      &quot;*--- field names contain lower case character? ---*
      IF lower_case = abap_true.

        &quot;*--- convert field names to upper case ---*
        CALL METHOD (&apos;CL_ABAP_CODEPAGE&apos;)=&gt;convert_to  &quot;dyn call because of downward compatibility
          EXPORTING
            source = json_in    &quot; Source String
          RECEIVING
            result = jsonx.

        reader = cl_sxml_string_reader=&gt;create( jsonx ).
        writer ?= cl_sxml_string_writer=&gt;create( type = &lt;type&gt; ).   &quot;type = if_sxml=&gt;co_xt_json

        node = reader-&gt;read_next_node( ).

        WHILE node IS NOT INITIAL.

          IF node-&gt;type = if_sxml_node=&gt;co_nt_element_open.
            node_el ?= node.
            att = node_el-&gt;get_attributes( ).

            LOOP AT att ASSIGNING &lt;att&gt;.
              CHECK &lt;att&gt;-&gt;qname-name = &apos;name&apos;.
              varname = &lt;att&gt;-&gt;get_value( ).
              TRANSLATE varname TO UPPER CASE.
              &lt;att&gt;-&gt;set_value( varname ).
            ENDLOOP.

          ENDIF.

          writer-&gt;write_node( node ).

          node = reader-&gt;read_next_node( ).
        ENDWHILE.

        writer_out ?= writer.
        jsonx = writer_out-&gt;get_output( ).

        &quot;*--- JSONX (upper case) -&gt; ABAP ---*
        CALL TRANSFORMATION id SOURCE XML jsonx
                               RESULT (param_t).

      ELSE.

        &quot;*--- JSON -&gt; ABAP ---*
        CALL TRANSFORMATION id SOURCE XML json_in
                               RESULT (param_t).

      ENDIF.

    ELSE.
      &quot;*--- ABAP -&gt; JSON ---*
      INSERT INITIAL LINE INTO TABLE param_t ASSIGNING &lt;param&gt;.
      &lt;param&gt;-name = root_name.
      GET REFERENCE OF data_in INTO &lt;param&gt;-value.

      writer_out = cl_sxml_string_writer=&gt;create( type = &lt;type&gt; ).  &quot;type = if_sxml=&gt;co_xt_json
      CALL TRANSFORMATION id SOURCE (param_t)
                             RESULT XML writer_out.
      jsonx = writer_out-&gt;get_output( ).

      &quot;*--- field names as lower case characters? ---*
      IF lower_case = abap_true.

        reader = cl_sxml_string_reader=&gt;create( jsonx ).
        writer ?= cl_sxml_string_writer=&gt;create( type = &lt;type&gt; ).   &quot;type = if_sxml=&gt;co_xt_json

        node = reader-&gt;read_next_node( ).

        WHILE node IS NOT INITIAL.

          IF node-&gt;type = if_sxml_node=&gt;co_nt_element_open.
            node_el ?= node.
            att = node_el-&gt;get_attributes( ).

            LOOP AT att ASSIGNING &lt;att&gt;.
              CHECK &lt;att&gt;-&gt;qname-name = &apos;name&apos;.
              varname = &lt;att&gt;-&gt;get_value( ).
              TRANSLATE varname TO LOWER CASE.
              &lt;att&gt;-&gt;set_value( varname ).
            ENDLOOP.

          ENDIF.

          writer-&gt;write_node( node ).

          node = reader-&gt;read_next_node( ).
        ENDWHILE.

        writer_out ?= writer.
        jsonx = writer_out-&gt;get_output( ).

      ENDIF.

      &quot;*--- convert xstring to string ---*
      TRY.
          conv_in = cl_abap_conv_in_ce=&gt;create( input = jsonx ).
          conv_in-&gt;read( IMPORTING data = json_out ).

        CATCH cx_root.
*          ##no_handler     &quot;inactive for 7.01
      ENDTRY.

    ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_SERVICE_RESOURCE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service_resource" UUID="024C9CBAD63F1ED3BC8F09C909E12BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 ">
  <publicSection>class ZGOOGLE_SERVICE_RESOURCE definition
  public
  create public .

public section.

  methods CONSTRUCTOR
    importing
      value(SERVICE) type ref to ZGOOGLE_SERVICE
      value(SERVICENAME) type STRING
      value(RESOURCENAME) type STRING
      value(RESOURCE) type ZGOOGLE_METHODS_T .
  methods CALL
    importing
      value(NAME) type STRING
      value(IT_ARGUMENTS) type ZGOOGLE_HTTP_PARAM_T
      value(IT_POSTBODY) type ZGOOGLE_POSTBODY_T optional
      value(IP_CONTENT_TYPE) type ZGOOGLE_STRING
    returning
      value(ET_RETURN) type ZGOOGLE_STRING_T .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.

  data PO_SERVICE type ref to ZGOOGLE_SERVICE .
  data PO_CLIENT type ref to ZGOOGLE_CLIENT .
  data PV_SERVICENAME type STRING .
  data PV_RESOURCENAME type STRING .
  data PT_RESOURCE type ZGOOGLE_METHODS_T .</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="PO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" EXPOSURE="0" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="PO_SERVICE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service" EXPOSURE="0" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_SERVICE" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="PT_RESOURCE" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_METHODS_T" EXPOSURE="0" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="ZGOOGLE_METHODS_T" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="PV_RESOURCENAME" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="PV_SERVICENAME" VERSION="1" LANGU="E" EXPOSURE="0" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <method CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CALL" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CALL" SCONAME="NAME" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CALL" SCONAME="IT_ARGUMENTS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_HTTP_PARAM_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_HTTP_PARAM_T"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CALL" SCONAME="IT_POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T" PAROPTIONL="X"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CALL" SCONAME="IP_CONTENT_TYPE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_string" CMPTYPE="1" MTDTYPE="0" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CALL" SCONAME="ET_RETURN" VERSION="1" LANGU="E" DESCRIPT="String table" CMPTYPE="1" MTDTYPE="0" EDITORDER="5 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_STRING_T"/>
   <source>method CALL.

  DATA ls_resource TYPE zgoogle_methods_s.
  DATA lv_path TYPE string.
  DATA lv_httpmethod TYPE string.
  DATA lv_servicepath TYPE string.
  DATA lv_url TYPE string.
  DATA lo_http_request TYPE REF TO zgoogle_http_request.
  DATA lt_postbody TYPE zgoogle_postbody_t.
  DATA lv_basepath TYPE string.
  DATA lo_object TYPE REF TO object.
  DATA lo_desc TYPE REF TO cl_abap_typedescr.
  DATA lv_string TYPE string.
  DATA lo_auth TYPE REF TO zgoogle_auth_oauth2.
  DATA ls_token TYPE zgoogle_token_s.

  DATA ls_param TYPE zgoogle_http_param_s.
  DATA lt_param TYPE zgoogle_http_param_t.

  LOOP AT me-&gt;pt_resource INTO ls_resource WHERE method = name.
    lv_path = ls_resource-path.
    lv_httpmethod = ls_resource-httpmethod.
    IF ls_resource-param IS NOT INITIAL.
      READ TABLE it_arguments WITH KEY vkey = ls_resource-param INTO ls_param.
      IF sy-subrc NE 0.
        IF ls_resource-required EQ &apos;X&apos;.
          RAISE EXCEPTION TYPE ZCX_GOOGLE_EXCEPTION
            EXPORTING
              textid   = &apos;TP01&apos;
*              previous =
          .
        ENDIF.
      ELSE.
        ls_param-location = ls_resource-location.
        APPEND ls_param TO lt_param.
      ENDIF.
    ENDIF.
  ENDLOOP.

  lv_servicepath = me-&gt;po_service-&gt;servicepath.
  lv_url = zgoogle_http_rest=&gt;createrequesturi(
                servicepath = lv_servicepath
                respath = lv_path
                params = lt_param
  ).

  IF it_postbody IS SUPPLIED.
    lt_postbody = it_postbody.
  ENDIF.

  CREATE OBJECT lo_http_request
    EXPORTING
      url      = lv_url
      method   = lv_httpmethod
      postbody = lt_postbody.

  lv_basepath = me-&gt;po_client-&gt;getbasepath( ).
  lo_http_request-&gt;setbasecomponent( ip_basepath = lv_basepath ).
  lo_object = me-&gt;po_client-&gt;getauth( ).
  cl_abap_typedescr=&gt;describe_by_object_ref(
    EXPORTING
      p_object_ref         =   lo_object  &quot; Reference to described object
    RECEIVING
      p_descr_ref          =  lo_desc   &quot; Reference to description object
*        EXCEPTIONS
*          reference_is_initial = 1
*          others               = 2
  ).
  IF sy-subrc &lt;&gt; 0.
*       MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno
*                  WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.
  ENDIF.
  lv_string = lo_desc-&gt;get_relative_name( ).
  CASE lv_string.
    WHEN zgoogle_auth_oauth2=&gt;pc_name.
      lo_auth ?= me-&gt;po_client-&gt;getauth( ).
      lo_http_request ?= lo_auth-&gt;sign( lo_http_request ).
  ENDCASE.

  ls_token = lo_auth-&gt;getaccesstoken( ).

  IF ls_token-value IS NOT INITIAL.
    IF me-&gt;po_client-&gt;shoulddefer( ) EQ &apos;X&apos;.
*      // If we are in batch or upload mode, return the raw request.
*      return $httpRequest;
    ENDIF.

    et_return = me-&gt;po_client-&gt;execute( io_http_request = lo_http_request
                                        ip_content_type = ip_content_type ).
  ELSE.
    RAISE EXCEPTION TYPE ZCX_GOOGLE_EXCEPTION
      EXPORTING
        textid   = &apos;T01&apos;
*        previous =
    .
  ENDIF.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CONSTRUCTOR" SCONAME="SERVICE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_SERVICE"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CONSTRUCTOR" SCONAME="SERVICENAME" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CONSTRUCTOR" SCONAME="RESOURCENAME" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <parameter CLSNAME="ZGOOGLE_SERVICE_RESOURCE" CMPNAME="CONSTRUCTOR" SCONAME="RESOURCE" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_METHODS_T" CMPTYPE="1" MTDTYPE="2" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_METHODS_T"/>
   <source>method CONSTRUCTOR.

    me-&gt;po_service = service.
    me-&gt;po_client = service-&gt;getclient( ).
    me-&gt;pv_servicename = servicename.
    me-&gt;pv_resourcename = resourcename.
    me-&gt;pt_resource = resource.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service_mirror_tl_rss" UUID="024C9CBAD63F1ED3BC8F09C909E10BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 " REFCLSNAME="ZGOOGLE_SERVICE_RESOURCE">
  <publicSection>class ZGOOGLE_SERVICE_MIRROR_TL_RSS definition
  public
  inheriting from ZGOOGLE_SERVICE_RESOURCE
  create public .

public section.

  methods LISTTIMELINE
    returning
      value(RS_RESULTS) type ZGOOGLE_TIMELINE_S .
  methods INSERT
    importing
      value(IT_POSTBODY) type ZGOOGLE_POSTBODY_T .
  methods DELETE
    importing
      value(IP_ID) type STRING .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <inheritance CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" REFCLSNAME="ZGOOGLE_SERVICE_RESOURCE" VERSION="1" STATE="1" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" CMPNAME="DELETE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" CMPNAME="DELETE" SCONAME="IP_ID" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method DELETE.

  DATA lt_results TYPE zgoogle_string_t.
  DATA ls_results TYPE string.
  DATA ls_data TYPE zgoogle_timeline_s.

  DATA lt_params TYPE zgoogle_http_param_t.
  DATA ls_params TYPE zgoogle_http_param_s.

  ls_params-vvalue = cl_http_utility=&gt;if_http_utility~escape_url( ip_id ).
  ls_params-vkey = &apos;id&apos;.
  append ls_params to lt_params.

  lt_results = me-&gt;call( name = &apos;delete&apos;
                         it_arguments = lt_params
*                           it_postbody = it_postbody
                         ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" CMPNAME="INSERT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" CMPNAME="INSERT" SCONAME="IT_POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T"/>
   <source>method INSERT.

    DATA lt_results TYPE zgoogle_string_t.
    DATA ls_results TYPE string.

    DATA lt_params TYPE zgoogle_http_param_t.

    lt_results = me-&gt;call( name = &apos;insert&apos;
                           it_arguments = lt_params
                           it_postbody = it_postbody
                           ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" CMPNAME="LISTTIMELINE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_TL_RSS" CMPNAME="LISTTIMELINE" SCONAME="RS_RESULTS" VERSION="1" LANGU="E" DESCRIPT="String table" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_TIMELINE_S"/>
   <source>method LISTTIMELINE.

    DATA lt_results TYPE zgoogle_string_t.
    DATA ls_results TYPE string.
    DATA ls_data TYPE zgoogle_timeline_s.
    DATA lo_json TYPE REF TO zcl_json_document.

    DATA lt_params TYPE ZGOOGLE_HTTP_PARAM_T.

    lt_results = me-&gt;call( name = &apos;list&apos;
                           it_arguments = lt_params
                           ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

    READ TABLE lt_results INDEX 1 INTO ls_results.
    zcl_json_document=&gt;create_with_json(
      EXPORTING
        json          = ls_results
*      date_format   =
      RECEIVING
        json_document = lo_json    &quot; JSON Document
    ).
    lo_json-&gt;get_data(
*        EXPORTING
*          json              =
    IMPORTING
      data              = ls_data
  ).
    rs_results = ls_data.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZCX_GOOGLE_EXCEPTION" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_EXCEPTION" UUID="024C9CBAD63F1ED3BC8F09A57C576BBA" CATEGORY="40" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSFINAL="X" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 " REFCLSNAME="CX_STATIC_CHECK">
  <publicSection>class ZCX_GOOGLE_EXCEPTION definition
  public
  inheriting from CX_STATIC_CHECK
  final
  create public .

public section.

  methods CONSTRUCTOR
    importing
      !TEXTID like TEXTID optional
      !PREVIOUS like PREVIOUS optional .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool>
   <language SPRAS="E">
    <textElement ID="I" KEY="P01" ENTRY="Parameter missing" LENGTH="17 "/>
    <textElement ID="I" KEY="T01" ENTRY="Bad token" LENGTH="9 "/>
   </language>
  </textPool>
  <classDocumentation/>
  <inheritance CLSNAME="ZCX_GOOGLE_EXCEPTION" REFCLSNAME="CX_STATIC_CHECK" VERSION="1" STATE="1" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
  <method CLSNAME="ZCX_GOOGLE_EXCEPTION" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" LOCKED="X" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZCX_GOOGLE_EXCEPTION" CMPNAME="CONSTRUCTOR" SCONAME="TEXTID" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="0" TYPE="TEXTID" PAROPTIONL="X"/>
   <parameter CLSNAME="ZCX_GOOGLE_EXCEPTION" CMPNAME="CONSTRUCTOR" SCONAME="PREVIOUS" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="2" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="1" TYPTYPE="0" TYPE="PREVIOUS" PAROPTIONL="X"/>
   <source>method CONSTRUCTOR.
CALL METHOD SUPER-&gt;CONSTRUCTOR
EXPORTING
TEXTID = TEXTID
PREVIOUS = PREVIOUS
.
endmethod.</source>
   <methodDocumentation/>
   <methodDocumentation/>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_SERVICE_MIRROR" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service_mirror" UUID="024C9CBAD63F1ED3BC8F09A57C574BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 " REFCLSNAME="ZGOOGLE_SERVICE">
  <publicSection>class ZGOOGLE_SERVICE_MIRROR definition
  public
  inheriting from ZGOOGLE_SERVICE
  create public .

public section.

  constants GLASS_LOCATION type STRING value &apos;https://www.googleapis.com/auth/glass.location&apos;. &quot;#EC NOTEXT
  constants GLASS_TIMELINE type STRING value &apos;https://www.googleapis.com/auth/glass.timeline&apos;. &quot;#EC NOTEXT
  data ACCOUNTS type STRING .
  data CONTACTS type STRING .
  data LOCATIONS type ref to ZGOOGLE_SERVICE_MIRROR_LOC_RSS .
  data SETTINGS type STRING .
  data SUBSCRIPTIONS type ref to ZGOOGLE_SERVICE_MIRROR_SUB_RSS .
  data TIMELINE type ref to ZGOOGLE_SERVICE_MIRROR_TL_RSS .
  data TIMELINE_ATTACHMENTS type STRING .

  methods CONSTRUCTOR
    importing
      value(IO_CLIENT) type ref to ZGOOGLE_CLIENT .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="ACCOUNTS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="CONTACTS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="GLASS_LOCATION" VERSION="1" LANGU="E" DESCRIPT="View your location" EXPOSURE="2" STATE="1" EDITORDER="1 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;https://www.googleapis.com/auth/glass.location&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="GLASS_TIMELINE" VERSION="1" LANGU="E" DESCRIPT="View and manage your Glass timeline" EXPOSURE="2" STATE="1" EDITORDER="2 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="2" ATTVALUE="&apos;https://www.googleapis.com/auth/glass.timeline&apos;" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="LOCATIONS" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service_mirror_tl_rss" EXPOSURE="2" STATE="1" EDITORDER="5 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_SERVICE_MIRROR_LOC_RSS" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="SETTINGS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="6 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="SUBSCRIPTIONS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" EXPOSURE="2" STATE="1" EDITORDER="7 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20141017" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="TIMELINE" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service_mirror_tl_rss" EXPOSURE="2" STATE="1" EDITORDER="8 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="3" TYPE="ZGOOGLE_SERVICE_MIRROR_TL_RSS" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <attribute CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="TIMELINE_ATTACHMENTS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="9 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" ATTDECLTYP="0" ATTEXPVIRT="0" TYPTYPE="1" TYPE="STRING" SRCROW1="0 " SRCCOLUMN1="0 " SRCROW2="0 " SRCCOLUMN2="0 " R3RELEASE="731" TYPESRC_LENG="0 "/>
  <inheritance CLSNAME="ZGOOGLE_SERVICE_MIRROR" REFCLSNAME="ZGOOGLE_SERVICE" VERSION="1" STATE="1" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="CONSTRUCTOR" VERSION="1" LANGU="E" DESCRIPT="CONSTRUCTOR" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="2" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR" CMPNAME="CONSTRUCTOR" SCONAME="IO_CLIENT" VERSION="1" LANGU="E" DESCRIPT="zgoogle_client" CMPTYPE="1" MTDTYPE="2" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="3" TYPE="ZGOOGLE_CLIENT"/>
   <source>method CONSTRUCTOR.

    super-&gt;constructor( io_client ).
    me-&gt;servicepath = &apos;mirror/v1/&apos;.
    me-&gt;version = &apos;v1&apos;.
    me-&gt;servicename = &apos;mirror&apos;.

    DATA ls_resource TYPE zgoogle_methods_s.
    DATA lt_resource TYPE zgoogle_methods_t.

    ls_resource-method = &apos;delete&apos;.
    ls_resource-path = &apos;timeline/{id}&apos;.
    ls_resource-httpmethod = &apos;DELETE&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;get&apos;.
    ls_resource-path = &apos;timeline/{id}&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;insert&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;POST&apos;.
    ls_resource-param = &apos;&apos;.
    ls_resource-location = &apos;&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;orderBy&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.
    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;includeDeleted&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.
    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;maxResults&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.
    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;pageToken&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.
    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;sourceItemId&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.
    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;pinnedOnly&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.
    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;timeline&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;bundleId&apos;.
    ls_resource-location = &apos;query&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;patch&apos;.
    ls_resource-path = &apos;timeline/{id}&apos;.
    ls_resource-httpmethod = &apos;PATCH&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;update&apos;.
    ls_resource-path = &apos;timeline/{id}&apos;.
    ls_resource-httpmethod = &apos;PUT&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    CREATE OBJECT timeline
      EXPORTING
        service      = me
        servicename  = me-&gt;servicename
        resourcename = &apos;timeline&apos;
        resource     = lt_resource.

    CLEAR: ls_resource, lt_resource.

    ls_resource-method = &apos;get&apos;.
    ls_resource-path = &apos;locations/{id}&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;getlast&apos;.
    ls_resource-path = &apos;locations&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;&apos;.
    ls_resource-location = &apos;&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.

    CREATE OBJECT locations
      EXPORTING
        service      = me
        servicename  = me-&gt;servicename
        resourcename = &apos;locations&apos;
        resource     = lt_resource.

    CLEAR: ls_resource, lt_resource.

    ls_resource-method = &apos;delete&apos;.
    ls_resource-path = &apos;subscriptions/{id}&apos;.
    ls_resource-httpmethod = &apos;DELETE&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;insert&apos;.
    ls_resource-path = &apos;subscriptions&apos;.
    ls_resource-httpmethod = &apos;POST&apos;.
    ls_resource-param = &apos;&apos;.
    ls_resource-location = &apos;&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;list&apos;.
    ls_resource-path = &apos;subscriptions&apos;.
    ls_resource-httpmethod = &apos;GET&apos;.
    ls_resource-param = &apos;&apos;.
    ls_resource-location = &apos;&apos;.
    ls_resource-required = &apos;&apos;.
    APPEND ls_resource TO lt_resource.

    ls_resource-method = &apos;update&apos;.
    ls_resource-path = &apos;subscriptions/{id}&apos;.
    ls_resource-httpmethod = &apos;PUT&apos;.
    ls_resource-param = &apos;id&apos;.
    ls_resource-location = &apos;path&apos;.
    ls_resource-required = &apos;X&apos;.
    APPEND ls_resource TO lt_resource.

    CREATE OBJECT subscriptions
      EXPORTING
        service      = me
        servicename  = me-&gt;servicename
        resourcename = &apos;subscriptions&apos;
        resource     = lt_resource.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_SERVICE_MIRROR_LOC_RSS" VERSION="1" LANGU="E" DESCRIPT="zgoogle_service_mirror_tl_rss" UUID="024C9CBAD63F1ED3BC8F095931764BBA" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" CHGDANYON="00000000" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 " REFCLSNAME="ZGOOGLE_SERVICE_RESOURCE">
  <publicSection>class ZGOOGLE_SERVICE_MIRROR_LOC_RSS definition
  public
  inheriting from ZGOOGLE_SERVICE_RESOURCE
  create public .

public section.

  methods GETLAST
    returning
      value(RS_RESULTS) type ZGOOGLE_LOCATION_S .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <inheritance CLSNAME="ZGOOGLE_SERVICE_MIRROR_LOC_RSS" REFCLSNAME="ZGOOGLE_SERVICE_RESOURCE" VERSION="1" STATE="1" AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611"/>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_LOC_RSS" CMPNAME="GETLAST" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_LOC_RSS" CMPNAME="GETLAST" SCONAME="RS_RESULTS" VERSION="1" LANGU="E" DESCRIPT="String table" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20140610" CHANGEDBY="IANNACCI" CHANGEDON="20140611" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_LOCATION_S"/>
   <source>method GETLAST.

  DATA lt_results TYPE zgoogle_string_t.
  DATA ls_results TYPE string.
  DATA ls_data TYPE zgoogle_location_s.
  DATA lo_json TYPE REF TO zcl_json_document.

  DATA lt_arguments TYPE zgoogle_http_param_t.

  lt_results = me-&gt;call( name = &apos;getlast&apos;
                         it_arguments = lt_arguments
                         ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

  READ TABLE lt_results INDEX 1 INTO ls_results.
  zcl_json_document=&gt;create_with_json(
    EXPORTING
      json          = ls_results
*      date_format   =
    RECEIVING
      json_document = lo_json    &quot; JSON Document
  ).
  lo_json-&gt;get_data(
*        EXPORTING
*          json              =
  IMPORTING
    data              = ls_data
).
  rs_results = ls_data.

endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <CLAS CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" UUID="024C9CBAD63F1ED495BF525A2DF91FA9" CATEGORY="00" EXPOSURE="2" STATE="1" RELEASE="0" AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" CHGDANYON="00000000" CLSFINAL="X" CLSCCINCL="X" FIXPT="X" UNICODE="X" R3RELEASE="731" CLSBCCAT="00" DURATION_TYPE="0 " RISK_LEVEL="0 " REFCLSNAME="ZGOOGLE_SERVICE_RESOURCE">
  <publicSection>class ZGOOGLE_SERVICE_MIRROR_SUB_RSS definition
  public
  inheriting from ZGOOGLE_SERVICE_RESOURCE
  final
  create public .

public section.

  methods INSERT
    importing
      value(IT_POSTBODY) type ZGOOGLE_POSTBODY_T .
  methods LISTSUBSCRIPTIONS
    returning
      value(RS_RESULTS) type ZGOOGLE_SUBSCRIPTION_S .
  methods DELETE
    importing
      value(IP_ID) type STRING .
  methods UPDATE .</publicSection>
  <protectedSection>protected section.</protectedSection>
  <privateSection>private section.</privateSection>
  <localImplementation>*&quot;* use this source file for the definition and implementation of
*&quot;* local helper classes, interface definitions and type
*&quot;* declarations</localImplementation>
  <localTypes>*&quot;* use this source file for any type of declarations (class
*&quot;* definitions, interfaces or type declarations) you need for
*&quot;* components in the private section</localTypes>
  <localMacros>*&quot;* use this source file for any macro definitions you need
*&quot;* in the implementation part of the class</localMacros>
  <textPool/>
  <classDocumentation/>
  <inheritance CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" REFCLSNAME="ZGOOGLE_SERVICE_RESOURCE" VERSION="1" STATE="1" AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000"/>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="DELETE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="3 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="DELETE" SCONAME="IP_ID" VERSION="1" LANGU="E" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="STRING"/>
   <source>method DELETE.

  DATA lt_results TYPE zgoogle_string_t.
  DATA ls_results TYPE string.
  DATA ls_data TYPE zgoogle_timeline_s.

  DATA lt_params TYPE zgoogle_http_param_t.
  DATA ls_params TYPE zgoogle_http_param_s.

  ls_params-vvalue = cl_http_utility=&gt;if_http_utility~escape_url( ip_id ).
  ls_params-vkey = &apos;id&apos;.
  append ls_params to lt_params.

  lt_results = me-&gt;call( name = &apos;delete&apos;
                         it_arguments = lt_params
*                           it_postbody = it_postbody
                         ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="INSERT" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="INSERT" SCONAME="IT_POSTBODY" VERSION="1" LANGU="E" DESCRIPT="ZGOOGLE_POSTBODY_T" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" PARDECLTYP="0" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_POSTBODY_T"/>
   <source>method INSERT.

    DATA lt_results TYPE zgoogle_string_t.
    DATA ls_results TYPE string.

    DATA lt_params TYPE zgoogle_http_param_t.

    lt_results = me-&gt;call( name = &apos;insert&apos;
                           it_arguments = lt_params
                           it_postbody = it_postbody
                           ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="LISTSUBSCRIPTIONS" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="2 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <parameter CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="LISTSUBSCRIPTIONS" SCONAME="RS_RESULTS" VERSION="1" LANGU="E" DESCRIPT="zgoogle_scopes_s" CMPTYPE="1" MTDTYPE="0" EDITORDER="1 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" PARDECLTYP="3" PARPASSTYP="0" TYPTYPE="1" TYPE="ZGOOGLE_SUBSCRIPTION_S"/>
   <source>method LISTSUBSCRIPTIONS.

    DATA lt_results TYPE zgoogle_string_t.
    DATA ls_results TYPE string.
    DATA ls_data TYPE zgoogle_subscription_s.
    DATA lo_json TYPE REF TO zcl_json_document.

    DATA lt_params TYPE ZGOOGLE_HTTP_PARAM_T.

    lt_results = me-&gt;call( name = &apos;list&apos;
                           it_arguments = lt_params
                           ip_content_type = zgoogle_io_generic=&gt;c_ctype_json ).

    READ TABLE lt_results INDEX 1 INTO ls_results.
    zcl_json_document=&gt;create_with_json(
      EXPORTING
        json          = ls_results
*      date_format   =
      RECEIVING
        json_document = lo_json    &quot; JSON Document
    ).
    lo_json-&gt;get_data(
*        EXPORTING
*          json              =
    IMPORTING
      data              = ls_data
  ).
    rs_results = ls_data.

endmethod.</source>
   <methodDocumentation/>
  </method>
  <method CLSNAME="ZGOOGLE_SERVICE_MIRROR_SUB_RSS" CMPNAME="UPDATE" VERSION="1" LANGU="E" EXPOSURE="2" STATE="1" EDITORDER="4 " DISPID="0 " AUTHOR="IANNACCI" CREATEDON="20141017" CHANGEDON="00000000" MTDTYPE="0" MTDDECLTYP="0" R3RELEASE="731" BCMTDCAT="00" BCMTDSYN="0">
   <source>method UPDATE.
endmethod.</source>
   <methodDocumentation/>
  </method>
 </CLAS>
 <DOMA DOMNAME="ZGOOGLE_STRING" DDLANGUAGE="E" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" LOWERCASE="X" MASKLEN="0000" DDTEXT="zgoogle_string" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145151" OUTPUTSTYLE="00"/>
 <DTEL ROLLNAME="ZGOOGLE_STRING" DDLANGUAGE="E" DOMNAME="ZGOOGLE_STRING" ROUTPUTLEN="000000" HEADLEN="05" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DDTEXT="zgoogle_string" REPTEXT="token" SCRTEXT_S="token" SCRTEXT_M="token" SCRTEXT_L="token" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" DTELMASTER="E" DATATYPE="STRG" LENG="000000" DECIMALS="000000" OUTPUTLEN="000000" LOWERCASE="X" REFKIND="D">
  <tpara/>
 </DTEL>
 <DTEL ROLLNAME="ZGOOGLE_BOOL" DDLANGUAGE="E" ROUTPUTLEN="000000" HEADLEN="07" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DDTEXT="Boolean" REPTEXT="Boolean" SCRTEXT_S="Boolean" SCRTEXT_M="Boolean" SCRTEXT_L="Boolean" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145154" DTELMASTER="E" DATATYPE="CHAR" LENG="000001" DECIMALS="000000" OUTPUTLEN="000001">
  <tpara/>
 </DTEL>
 <MSAG ARBGB="ZJSON" MASTERLANG="E" RESPUSER="IANNACCI" LASTUSER="IANNACCI" LDATE="20140611" LTIME="145502">
  <t100 SPRSL="E" ARBGB="ZJSON" MSGNR="000" TEXT='&quot;&amp;1&quot;: Requested Type &quot;&amp;2&quot; Current Value &quot;&amp;3&quot;'/>
  <t100 SPRSL="E" ARBGB="ZJSON" MSGNR="001" TEXT="Method not supported yet -&gt; see SAP Note 1648418"/>
  <t100t SPRSL="E" ARBGB="ZJSON"/>
 </MSAG>
 <PROG NAME="ZGOOGLE_TEST" VARCL="X" SUBC="1" CDAT="00000000" UNAM="IANNACCI" UDAT="20141017" VERN="000035" RMAND="001" RLOAD="E" FIXPT="X" SDATE="20141017" STIME="154918" IDATE="20141017" ITIME="154918" UCCHECK="X">
  <textPool>
   <language SPRAS="E">
    <textElement ID="R" ENTRY="Program ZGOOGLE_TEST" LENGTH="20 "/>
   </language>
  </textPool>
  <programDocumentation/>
  <dynpros>
   <dynpro PROG="ZGOOGLE_TEST" DNUM="0100" FNUM="0000" BZMX="3 " BZBR="119 " MILI="192 " MICO="37 " MALI="0 " MACO="0 " NOLI="27 " NOCO="120 " VALP="0 " CUAN="G" SPRA="E" DGEN="20140611" TGEN="145056" DTEXT="screen">
    <dynprofield FNAM="LABEL" DIDX="0000" FLG1="00" FLG2="00" FLG3="00" FMB1="30" FMB2="00" LENG="04" LINE="03" COLN="04" LANF="00" LBLK="00" LREP="00" TYPE="CHAR" ITYP="0" AGLT="00" ADEZ="00" STXT="Code" RES1="                                                                                                                                                                                                                                                        X"/>
    <dynprofield FNAM="LV_XCHAGETOKEN" DIDX="006D" FLG1="81" FLG2="02" FLG3="80" FMB1="00" FMB2="00" LENG="FF" LINE="03" COLN="0C" LANF="00" LBLK="00" LREP="00" TYPE="STRG" ITYP="g" AGLT="00" ADEZ="00" STXT="____________________________________________________________________________________________________________________________________"/>
    <dynprofield DIDX="0000" FLG1="80" FLG2="10" FLG3="00" FMB1="00" FMB2="00" LENG="14" LINE="FF" COLN="01" LTYP="O" LANF="00" LBLK="00" LREP="00" TYPE="CHAR" AGLT="00" ADEZ="00" STXT="____________________"/>
    <dynproflowsource>PROCESS BEFORE OUTPUT.
* MODULE STATUS_0100.
*
PROCESS AFTER INPUT.
 MODULE USER_COMMAND_0100.</dynproflowsource>
   </dynpro>
  </dynpros>
  <source>*&amp;---------------------------------------------------------------------*
*&amp; Report  ZGOOGLE_TEST
*&amp;
*&amp;---------------------------------------------------------------------*
*&amp;
*&amp;
*&amp;---------------------------------------------------------------------*
REPORT zgoogle_test.

START-OF-SELECTION.

  DATA lo_client TYPE REF TO zgoogle_client.
  DATA lo_service TYPE REF TO zgoogle_service_mirror.
  DATA ls_results TYPE zgoogle_timeline_s.
  DATA ls_results_loc TYPE zgoogle_location_s.
  DATA ls_results_sub TYPE zgoogle_subscription_s.
  DATA ls_results_details TYPE zgoogle_timeline_details_s.
  DATA lt_results_details TYPE zgoogle_timeline_details_t.
  DATA ls_token TYPE zgoogle_token_s.
  DATA lv_xchagetoken TYPE string.
  DATA lv_client_id TYPE string VALUE &apos;422143070437-51u1p3kaet97s88noehdvrmb4cbg3tb3.apps.googleusercontent.com&apos;.
  DATA lv_client_secret TYPE string VALUE &apos;qyXSsqa4XdteFK9u4Xu-RZoT&apos;.
  DATA lv_redirect_uri TYPE string VALUE &apos;urn:ietf:wg:oauth:2.0:oob&apos;.
  DATA ls_access TYPE zgoogle_access.
  DATA lv_urlc TYPE c LENGTH 2200.
  DATA lv_url TYPE string.
  DATA lo_json TYPE REF TO zcl_json_document.
  TYPES: BEGIN OF s_data,
            items TYPE string,
        END OF s_data.
  DATA ls_data TYPE s_data.
  DATA lt_strings TYPE zgoogle_string_t.
  DATA ls_strings TYPE string.
  DATA lv_token TYPE zgoogle_token_s.

  CREATE OBJECT lo_client.

  lo_client-&gt;setclientid( lv_client_id ).
  lo_client-&gt;setclientsecret( lv_client_secret ).
  lo_client-&gt;setredirecturi( lv_redirect_uri ).

  lo_client-&gt;set_proxy( &apos;squid.techedge.corp&apos; ).
  lo_client-&gt;set_proxy_port( &apos;3128&apos; ).

*  lo_client-&gt;set_proxy( &apos;10.3.1.155&apos; ).
*  lo_client-&gt;set_proxy_port( &apos;8080&apos; ).

  lo_client-&gt;addscope( zgoogle_service_mirror=&gt;glass_timeline ).
  lo_client-&gt;addscope( zgoogle_service_mirror=&gt;glass_location ).

  CREATE OBJECT lo_service
    EXPORTING
      io_client = lo_client.

* Retrieve stored access token
  SELECT SINGLE * FROM zgoogle_access INTO ls_access WHERE username = sy-uname.

  PERFORM authorize. &quot;If the access token is provided this step will be jumped

  CALL METHOD lo_client-&gt;getaccesstoken
    RECEIVING
      rs_token = lv_token.

*  IF lo_client-&gt;getaccesstoken( )-value IS NOT INITIAL.
  IF lv_token-value IS NOT INITIAL.
*AUTHENTICATED
    PERFORM execute. &quot;If needed the execution of the services perform refresh token
  ENDIF.


*&amp;---------------------------------------------------------------------*
*&amp;      FORM authorize.
*&amp;---------------------------------------------------------------------*
*       Execute user authorization retrieving exchange token and then
*       perform authentication
*----------------------------------------------------------------------*
FORM authorize.

  CALL METHOD lo_client-&gt;getaccesstoken
    RECEIVING
      rs_token = lv_token.

*  WHILE lo_client-&gt;getaccesstoken( )-value IS INITIAL.
  WHILE lv_token-value IS INITIAL.
    PERFORM authenticate.

    CALL METHOD lo_client-&gt;getaccesstoken
      RECEIVING
        rs_token = lv_token.

*    IF lo_client-&gt;getaccesstoken( )-value IS INITIAL.
    IF lv_token-value IS INITIAL.
*  if the token is not set, go to this link for the authentication:
      lv_url = lo_client-&gt;createauthurl( ).
      lv_urlc = lv_url.
      CALL FUNCTION &apos;CALL_BROWSER&apos;
        EXPORTING
          url = lv_urlc.
      CALL SCREEN 100.
    ENDIF.

  ENDWHILE.
ENDFORM.                    &quot;authorize

*&amp;---------------------------------------------------------------------*
*&amp;      FORM authenticate.
*&amp;---------------------------------------------------------------------*
*       Execute authentication using the exchange token given by authorization
*       or using the stored access token
*----------------------------------------------------------------------*
FORM authenticate.

  IF ls_access-access_token IS INITIAL.
    IF lv_xchagetoken IS NOT INITIAL.
*      ls_token = lo_client-&gt;authenticate( ip_code = lv_xchagetoken ).
      CALL METHOD lo_client-&gt;authenticate
        EXPORTING
          ip_code   = lv_xchagetoken
*          is_access =
        RECEIVING
          rs_auth   = ls_token
          .

    ENDIF.
  ELSE.
    lo_client-&gt;authenticate( is_access = ls_access ).
  ENDIF.

ENDFORM.                    &quot;authenticate

*&amp;---------------------------------------------------------------------*
*&amp;      FORM execute.
*&amp;---------------------------------------------------------------------*
*       Execute one insert and list all the items in the current
*       user timeline for the current application
*----------------------------------------------------------------------*
FORM execute.
  &quot;Call the service
  DATA lo_exc TYPE REF TO zcx_google_exception.
  DATA lt_postbody TYPE zgoogle_postbody_t.
  DATA ls_postbody TYPE zgoogle_postbody_s.
*  DATA lt_params TYPE zgoogle_http_param_t.

  TRY.

*      &quot;Simple text insertion
*      ls_postbody-key = &apos;&quot;text&quot;&apos;.
*      ls_postbody-value = &apos;&quot;GLASS CARD FROM ABAP!&quot;&apos;.
*      append ls_postbody to lt_postbody.
*      append ls_postbody to lt_postbody.
*      lo_service-&gt;timeline-&gt;insert(
*        EXPORTING
*          it_postbody = lt_postbody    &quot; ZGOOGLE_POSTBODY_T
*      ).
*      clear lt_postbody.
*
*      &quot;Location insertion
*      ls_postbody-key = &apos;&quot;text&quot;&apos;.
*      ls_postbody-value = &apos;&quot;Navigation example. Location: \n\nLat: 37.76 \nLong: -122.4&quot;&apos;.
*      APPEND ls_postbody TO lt_postbody.
*      ls_postbody-key = &apos;&quot;location&quot;&apos;.
*      ls_postbody-value = &apos;{ &quot;kind&quot;: &quot;mirror#location&quot;, &quot;latitude&quot;: 37.7657774, &quot;longitude&quot;: -122.4075774, &quot;displayName&quot;: &quot;Crushpath Labs&quot; }&apos;.
*      APPEND ls_postbody TO lt_postbody.
*      ls_postbody-key = &apos;&quot;menuItems&quot;&apos;.
*      ls_postbody-value = &apos;[ { &quot;action&quot;: &quot;NAVIGATE&quot; } ]&apos;.
*      APPEND ls_postbody TO lt_postbody.
*      lo_service-&gt;timeline-&gt;insert(
*        EXPORTING
*          it_postbody = lt_postbody    &quot; ZGOOGLE_POSTBODY_T
*      ).
*      CLEAR lt_postbody.
*
      &quot;Approval insertion
      ls_postbody-key = &apos;&quot;text&quot;&apos;.
      ls_postbody-value = &apos;&quot;Approve/Reject Example\n\nSales order no. 10232\n\nTotal amount: 10,923.32 &quot;&apos;.
      APPEND ls_postbody TO lt_postbody.
      ls_postbody-key = &apos;&quot;menuItems&quot;&apos;.
      ls_postbody-value = &apos;[ { &quot;id&quot;: &quot;APPROVE&quot;, &quot;action&quot;: &quot;CUSTOM&quot;, &quot;values&quot;: [ { &quot;displayName&quot;: &quot;APPROVE&quot;, &quot;iconUrl&quot;: &quot;https://mirror-api-playground.appspot.com/links/icons_30_0001_green.png&quot; } ] }, &apos;.
      CONCATENATE ls_postbody-value &apos;{ &quot;id&quot;: &quot;REJECT&quot;, &quot;action&quot;: &quot;CUSTOM&quot;, &quot;values&quot;: [ { &quot;displayName&quot;: &quot;REJECT&quot;, &quot;iconUrl&quot;: &quot;https://mirror-api-playground.appspot.com/links/icons_30_0003_red.png&quot; } ] } ]&apos; INTO ls_postbody-value.
      APPEND ls_postbody TO lt_postbody.
      lo_service-&gt;timeline-&gt;insert(
        EXPORTING
          it_postbody = lt_postbody    &quot; ZGOOGLE_POSTBODY_T
      ).
      CLEAR lt_postbody.

      &quot;List
      ls_results = lo_service-&gt;timeline-&gt;listtimeline( ).

      &quot;Delete last
*      IF ls_results-items IS NOT INITIAL.
*        READ TABLE ls_results-items INDEX 1 INTO ls_results_details.
*        lo_service-&gt;timeline-&gt;delete( ip_id = ls_results_details-id ).
*      ENDIF.

      &quot;Location get last
      ls_results_loc = lo_service-&gt;locations-&gt;getlast( ).


      &quot;Subscription insert
      ls_postbody-key = &apos;&quot;callbackUrl&quot;&apos;.
      ls_postbody-value = &apos;&quot;https://mirrornotifications.appspot.com/forward?url=http://www.alessandroiannacci.it/reset.asp&quot;&apos;.
      APPEND ls_postbody TO lt_postbody.
      ls_postbody-key = &apos;&quot;collection&quot;&apos;.
      ls_postbody-value = &apos;&quot;timeline&quot;&apos;.
      APPEND ls_postbody TO lt_postbody.
      lo_service-&gt;subscriptions-&gt;insert( it_postbody = lt_postbody ).
      CLEAR lt_postbody.

      &quot;Subscriptions list
      ls_results_sub = lo_service-&gt;subscriptions-&gt;listsubscriptions( ).

    CATCH zcx_google_exception INTO lo_exc. &quot;Bad refresh token or missing parameter.
      IF lo_exc-&gt;get_text( ) EQ &apos;Bad token&apos;.
        PERFORM authorize.
      ELSE.
        WRITE: / &apos;Missing parameter&apos;.
      ENDIF.
  ENDTRY.

  &quot;Store token info (after the service call because the token can be refreshed)
  CALL METHOD lo_client-&gt;getaccesstoken
    RECEIVING
      rs_token = lv_token.
*  ls_access-access_token = lo_client-&gt;getaccesstoken( )-value.
*  ls_access-expires_in = lo_client-&gt;getaccesstoken( )-expires_in.
*  ls_access-refresh_token = lo_client-&gt;getaccesstoken( )-refresh_token.
*  ls_access-created = lo_client-&gt;getaccesstoken( )-created.
*  ls_access-data = lo_client-&gt;getaccesstoken( )-data.
  ls_access-access_token = lv_token-value.
  ls_access-expires_in = lv_token-expires_in.
  ls_access-refresh_token = lv_token-refresh_token.
  ls_access-created = lv_token-created.
  ls_access-data = lv_token-data.
  ls_access-username = sy-uname.
  MODIFY zgoogle_access FROM ls_access.

  &quot;Print results
  MOVE ls_results-items TO lt_results_details.
  WRITE: &apos;TIMELINE ITEMS FOR USER &apos;, sy-uname, &apos;:&apos;.
  WRITE /.
  LOOP AT lt_results_details INTO ls_results_details.
    IF ls_results_details-text IS NOT INITIAL.
      WRITE: / sy-tabix, &apos;. - &apos;, ls_results_details-text.
    ELSE.
      WRITE: / sy-tabix, &apos;. - &apos;, ls_results_details-html.
    ENDIF.
  ENDLOOP.
ENDFORM.                    &quot;execute

*&amp;---------------------------------------------------------------------*
*&amp;      Module  USER_COMMAND_0100  INPUT
*&amp;---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE user_command_0100 INPUT.

ENDMODULE.                 &quot; USER_COMMAND_0100  INPUT</source>
 </PROG>
 <TABL TABNAME="ZGOOGLE_HTTP_HEADERS_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="ZGOOGLE_HTTP_PARAM_S" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140610" AS4TIME="152543" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_HTTP_HEADERS_S" FIELDNAME="VKEY" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_HTTP_HEADERS_S" FIELDNAME="VVALUE" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_KCV_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="ZGOOGLE_KCV_S" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_KCV_S" FIELDNAME="VCATEGORY" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_KCV_S" FIELDNAME="VCLASS" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_KCV_S" FIELDNAME="VKEY" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_KCV_S" FIELDNAME="VVALUE" DDLANGUAGE="E" POSITION="0004" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_METHODS_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_methods_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_METHODS_S" FIELDNAME="METHOD" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_METHODS_S" FIELDNAME="PATH" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_METHODS_S" FIELDNAME="HTTPMETHOD" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_METHODS_S" FIELDNAME="PARAM" DDLANGUAGE="E" POSITION="0004" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_METHODS_S" FIELDNAME="LOCATION" DDLANGUAGE="E" POSITION="0005" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_METHODS_S" FIELDNAME="REQUIRED" DDLANGUAGE="E" POSITION="0006" ROLLNAME="ZGOOGLE_BOOL" ADMINFIELD="0" INTTYPE="C" INTLEN="000002" ROUTPUTLEN="000000" HEADLEN="07" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="E" DATATYPE="CHAR" LENG="000001" OUTPUTLEN="000001" DECIMALS="000000" MASK="  CHARE" MASKLEN="0000" DDTEXT="Boolean" REPTEXT="Boolean" SCRTEXT_S="Boolean" SCRTEXT_M="Boolean" SCRTEXT_L="Boolean" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_TOKEN_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="ZGOOGLE_KCV_S" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_TOKEN_S" FIELDNAME="CREATED" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="T" INTLEN="000012" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="TIMS" LENG="000006" OUTPUTLEN="000000" DECIMALS="000000" MASK="  TIMS" MASKLEN="0000" SHLPORIGIN="T" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TOKEN_S" FIELDNAME="EXPIRES_IN" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="X" INTLEN="000004" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="INT4" LENG="000010" OUTPUTLEN="000000" DECIMALS="000000" MASK="  INT4" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TOKEN_S" FIELDNAME="VALUE" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TOKEN_S" FIELDNAME="REFRESH_TOKEN" DDLANGUAGE="E" POSITION="0004" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TOKEN_S" FIELDNAME="DATA" DDLANGUAGE="E" POSITION="0005" ADMINFIELD="0" INTTYPE="D" INTLEN="000016" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="DATS" LENG="000008" OUTPUTLEN="000000" DECIMALS="000000" MASK="  DATS" MASKLEN="0000" SHLPORIGIN="T" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_POSTBODY_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="ZGOOGLE_KCV_S" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_POSTBODY_S" FIELDNAME="KEY" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_POSTBODY_S" FIELDNAME="VALUE" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_SCOPES_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_SCOPES_S" FIELDNAME="VALUE" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_ACCESS" DDLANGUAGE="E" TABCLASS="TRANSP" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" CLIDEP="X" DDTEXT="ZGOOGLE_ACCESS" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" MAINFLAG="X" CONTFLAG="A" PROZPUFF="000" EXCLASS="0">
  <dd09l TABNAME="ZGOOGLE_ACCESS" AS4LOCAL="A" AS4VERS="0000" TABKAT="0" TABART="APPL0" SCHFELDANZ="000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" BUFALLOW="N"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="MANDT" DDLANGUAGE="E" POSITION="0001" KEYFLAG="X" ROLLNAME="MANDT" ADMINFIELD="0" INTTYPE="C" INTLEN="000006" NOTNULL="X" DOMNAME="MANDT" ROUTPUTLEN="000000" HEADLEN="03" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="D" DATATYPE="CLNT" LENG="000003" OUTPUTLEN="000003" DECIMALS="000000" ENTITYTAB="T000" MASK="  CLNTE" MASKLEN="0000" DDTEXT="Client" REPTEXT="Cl." SCRTEXT_S="Client" SCRTEXT_M="Client" SCRTEXT_L="Client" DOMNAME3L="MANDT" DEPTH="00" COMPTYPE="E" DEFFDNAME="CLIENT" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="USERNAME" DDLANGUAGE="E" POSITION="0002" KEYFLAG="X" ROLLNAME="UNAME" ADMINFIELD="0" INTTYPE="C" INTLEN="000024" NOTNULL="X" DOMNAME="UNAME" ROUTPUTLEN="000000" HEADLEN="20" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="D" DATATYPE="CHAR" LENG="000012" OUTPUTLEN="000012" DECIMALS="000000" MASK="  CHARE" MASKLEN="0000" DDTEXT="User Name" REPTEXT="User Name" SCRTEXT_S="User" SCRTEXT_M="User Name" SCRTEXT_L="User Name" DOMNAME3L="UNAME" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="ACCESS_TOKEN" DDLANGUAGE="E" POSITION="0003" ROLLNAME="ZGOOGLE_STRING" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" DOMNAME="ZGOOGLE_STRING" ROUTPUTLEN="000000" HEADLEN="05" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="E" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" LOWERCASE="X" MASK="  STRGE" MASKLEN="0000" DDTEXT="zgoogle_string" REPTEXT="token" SCRTEXT_S="token" SCRTEXT_M="token" SCRTEXT_L="token" DOMNAME3L="ZGOOGLE_STRING" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="TOKEN_TYPE" DDLANGUAGE="E" POSITION="0004" ROLLNAME="ZGOOGLE_STRING" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" DOMNAME="ZGOOGLE_STRING" ROUTPUTLEN="000000" HEADLEN="05" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="E" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" LOWERCASE="X" MASK="  STRGE" MASKLEN="0000" DDTEXT="zgoogle_string" REPTEXT="token" SCRTEXT_S="token" SCRTEXT_M="token" SCRTEXT_L="token" DOMNAME3L="ZGOOGLE_STRING" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="EXPIRES_IN" DDLANGUAGE="E" POSITION="0005" ADMINFIELD="0" INTTYPE="X" INTLEN="000004" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="INT4" LENG="000010" OUTPUTLEN="000000" DECIMALS="000000" MASK="  INT4" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="REFRESH_TOKEN" DDLANGUAGE="E" POSITION="0006" ROLLNAME="ZGOOGLE_STRING" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" DOMNAME="ZGOOGLE_STRING" ROUTPUTLEN="000000" HEADLEN="05" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="E" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" LOWERCASE="X" MASK="  STRGE" MASKLEN="0000" DDTEXT="zgoogle_string" REPTEXT="token" SCRTEXT_S="token" SCRTEXT_M="token" SCRTEXT_L="token" DOMNAME3L="ZGOOGLE_STRING" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="CREATED" DDLANGUAGE="E" POSITION="0007" ADMINFIELD="0" INTTYPE="T" INTLEN="000012" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="TIMS" LENG="000006" OUTPUTLEN="000000" DECIMALS="000000" MASK="  TIMS" MASKLEN="0000" SHLPORIGIN="T" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_ACCESS" FIELDNAME="DATA" DDLANGUAGE="E" POSITION="0008" ADMINFIELD="0" INTTYPE="D" INTLEN="000016" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="DATS" LENG="000008" OUTPUTLEN="000000" DECIMALS="000000" MASK="  DATS" MASKLEN="0000" SHLPORIGIN="T" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZJSON_KEY_VALUE" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="JSON Key/Value pair" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" PROZPUFF="000" EXCLASS="1">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZJSON_KEY_VALUE" FIELDNAME="KEY" DDLANGUAGE="E" POSITION="0001" ROLLNAME="STRINGVAL" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="06" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="D" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRGE" MASKLEN="0000" DDTEXT="String" REPTEXT="String" SCRTEXT_S="String" SCRTEXT_M="String" SCRTEXT_L="String" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZJSON_KEY_VALUE" FIELDNAME="VALUE" DDLANGUAGE="E" POSITION="0002" ROLLNAME="STRINGVAL" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="06" SCRLEN1="10" SCRLEN2="15" SCRLEN3="20" DTELMASTER="D" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRGE" MASKLEN="0000" DDTEXT="String" REPTEXT="String" SCRTEXT_S="String" SCRTEXT_M="String" SCRTEXT_L="String" DEPTH="00" COMPTYPE="E" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_HTTP_PARAM_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="ZGOOGLE_HTTP_PARAM_S" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145155" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_HTTP_PARAM_S" FIELDNAME="VKEY" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_HTTP_PARAM_S" FIELDNAME="VVALUE" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_HTTP_PARAM_S" FIELDNAME="LOCATION" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_LOCATION_DETAILS_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140610" AS4TIME="102649" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="KIND" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="ID" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="ACCURACY" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="ADDRESS" DDLANGUAGE="E" POSITION="0004" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="DISPLAYNAME" DDLANGUAGE="E" POSITION="0005" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="LATITUDE" DDLANGUAGE="E" POSITION="0006" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="LONGITUDE" DDLANGUAGE="E" POSITION="0007" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_DETAILS_S" FIELDNAME="TIMESTAMP" DDLANGUAGE="E" POSITION="0008" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_LOCATION_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140610" AS4TIME="102716" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_LOCATION_S" FIELDNAME="ITEMS" DDLANGUAGE="E" POSITION="0001" ROLLNAME="ZGOOGLE_LOCATION_DETAILS_T" ADMINFIELD="0" INTLEN="000000" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="TTYP" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  TTYPL" MASKLEN="0000" DDTEXT="ZGOOGLE_TIMELINE_S" DEPTH="00" COMPTYPE="L" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="KIND" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="ID" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="SELFLINK" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="CREATED" DDLANGUAGE="E" POSITION="0004" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="UPDATED" DDLANGUAGE="E" POSITION="0005" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="ETAG" DDLANGUAGE="E" POSITION="0006" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="TEXT" DDLANGUAGE="E" POSITION="0007" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="HTML" DDLANGUAGE="E" POSITION="0008" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_DETAILS_S" FIELDNAME="NOTIFICATION" DDLANGUAGE="E" POSITION="0009" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_TIMELINE_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145159" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_TIMELINE_S" FIELDNAME="ITEMS" DDLANGUAGE="E" POSITION="0001" ROLLNAME="ZGOOGLE_TIMELINE_DETAILS_T" ADMINFIELD="0" INTLEN="000000" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="TTYP" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  TTYPL" MASKLEN="0000" DDTEXT="ZGOOGLE_TIMELINE_S" DEPTH="00" COMPTYPE="L" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20141017" AS4TIME="151429" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_S" FIELDNAME="KIND" DDLANGUAGE="E" POSITION="0001" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_S" FIELDNAME="ID" DDLANGUAGE="E" POSITION="0002" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_S" FIELDNAME="UPDATED" DDLANGUAGE="E" POSITION="0003" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_S" FIELDNAME="COLLECTION" DDLANGUAGE="E" POSITION="0004" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
  <dd03p TABNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_S" FIELDNAME="CALLBACKURL" DDLANGUAGE="E" POSITION="0005" ADMINFIELD="0" INTTYPE="g" INTLEN="000008" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="STRG" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  STRG" MASKLEN="0000" DEPTH="00" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TABL TABNAME="ZGOOGLE_SUBSCRIPTION_S" DDLANGUAGE="E" TABCLASS="INTTAB" DATMIN="0000000000" DATMAX="0000000000" DATAVG="0000000000" DDTEXT="zgoogle_scopes_s" AUTHCLASS="00" AS4USER="IANNACCI" AS4DATE="20141017" AS4TIME="151432" PROZPUFF="000" EXCLASS="0">
  <dd09l AS4VERS="0000" SCHFELDANZ="000" AS4DATE="00000000" AS4TIME="000000"/>
  <dd03p TABNAME="ZGOOGLE_SUBSCRIPTION_S" FIELDNAME="ITEMS" DDLANGUAGE="E" POSITION="0001" ROLLNAME="ZGOOGLE_SUBSCRIPTION_DETAILS_T" ADMINFIELD="0" INTLEN="000000" ROUTPUTLEN="000000" HEADLEN="00" SCRLEN1="00" SCRLEN2="00" SCRLEN3="00" DATATYPE="TTYP" LENG="000000" OUTPUTLEN="000000" DECIMALS="000000" MASK="  TTYPL" MASKLEN="0000" DDTEXT="ZGOOGLE_TIMELINE_S" DEPTH="00" COMPTYPE="L" EXCLASS="0" DBPOSITION="0000" OUTPUTSTYLE="00" STRORLOCPOS="00"/>
 </TABL>
 <TTYP TYPENAME="ZGOOGLE_SUBSCRIPTION_DETAILS_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_SUBSCRIPTION_DETAILS_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20141017" AS4TIME="151432" DDTEXT="ZGOOGLE_TIMELINE_S" TYPELEN="000040" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZJSON_KEY_VALUE_T" DDLANGUAGE="E" ROWTYPE="ZJSON_KEY_VALUE" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="H" KEYDEF="K" KEYKIND="U" KEYFDCOUNT="0001" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" DDTEXT="JSON Key/Value pairs (hashed)" TYPELEN="000016" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000">
  <dd42v TYPENAME="ZJSON_KEY_VALUE_T" KEYFDPOS="0001" ROWTYPEPOS="0001" KEYFIELD="KEY"/>
 </TTYP>
 <TTYP TYPENAME="ZGOOGLE_HTTP_PARAM_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_HTTP_PARAM_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" DDTEXT="ZGOOGLE_HTTP_PARAM_T" TYPELEN="000024" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_METHODS_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_METHODS_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145159" DDTEXT="ZGOOGLE_METHODS_T" TYPELEN="000044" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_STRING_T" DDLANGUAGE="E" DATATYPE="STRG" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145156" DDTEXT="String table" TYPELEN="000008" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_KCV_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_KCV_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" DDTEXT="ZGOOGLE_KCV_T" TYPELEN="000032" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_LOCATION_DETAILS_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_LOCATION_DETAILS_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140610" AS4TIME="102707" DDTEXT="ZGOOGLE_TIMELINE_S" TYPELEN="000064" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_TIMELINE_DETAILS_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_TIMELINE_DETAILS_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" DDTEXT="ZGOOGLE_TIMELINE_S" TYPELEN="000072" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_POSTBODY_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_POSTBODY_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" DDTEXT="ZGOOGLE_POSTBODY_T" TYPELEN="000016" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_TIMELINE_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_TIMELINE_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145159" DDTEXT="ZGOOGLE_TIMELINE_S" TYPELEN="000008" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_SCOPES_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_SCOPES_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140611" AS4TIME="145157" DDTEXT="ZGOOGLE_HTTP_PARAM_T" TYPELEN="000008" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
 <TTYP TYPENAME="ZGOOGLE_HTTP_HEADERS_T" DDLANGUAGE="E" ROWTYPE="ZGOOGLE_HTTP_HEADERS_S" ROWKIND="S" DATATYPE="STRU" LENG="000000" DECIMALS="000000" ACCESSMODE="T" KEYDEF="D" KEYKIND="N" KEYFDCOUNT="0000" AS4USER="IANNACCI" AS4DATE="20140610" AS4TIME="152615" DDTEXT="ZGOOGLE_HTTP_PARAM_T" TYPELEN="000016" CTLENG="000000" CTDECIMALS="000000" OCCURS="00000"/>
</nugget>
